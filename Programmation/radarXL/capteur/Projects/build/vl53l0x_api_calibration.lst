ARM GAS  /tmp/cczWh4GR.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"vl53l0x_api_calibration.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.VL53L0X_perform_xtalk_calibration,"ax",%progbits
  22              		.align	2
  23              		.global	VL53L0X_perform_xtalk_calibration
  24              		.thumb
  25              		.thumb_func
  27              	VL53L0X_perform_xtalk_calibration:
  28              	.LFB113:
  29              		.file 1 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c"
   1:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** /*******************************************************************************
   2:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  Copyright © 2016, STMicroelectronics International N.V.
   3:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  All rights reserved.
   4:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
   5:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  Redistribution and use in source and binary forms, with or without
   6:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  modification, are permitted provided that the following conditions are met:
   7:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Redistributions of source code must retain the above copyright
   8:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer.
   9:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Redistributions in binary form must reproduce the above copyright
  10:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer in the
  11:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  documentation and/or other materials provided with the distribution.
  12:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Neither the name of STMicroelectronics nor the
  13:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  names of its contributors may be used to endorse or promote products
  14:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  derived from this software without specific prior written permission.
  15:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  16:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  17:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  18:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
  19:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  NON-INFRINGEMENT OF INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED.
  20:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  IN NO EVENT SHALL STMICROELECTRONICS INTERNATIONAL N.V. BE LIABLE FOR ANY
  21:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  23:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  24:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  25:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  26:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ******************************************************************************/
  28:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  29:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api.h"
ARM GAS  /tmp/cczWh4GR.s 			page 2


  30:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api_core.h"
  31:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api_calibration.h"
  32:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  33:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #ifndef __KERNEL__
  34:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include <stdlib.h>
  35:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #endif
  36:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  37:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_START(fmt, ...) \
  38:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_START(TRACE_MODULE_API, fmt, ##__VA_ARGS__)
  39:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END(status, ...) \
  40:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END(TRACE_MODULE_API, status, ##__VA_ARGS__)
  41:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END_FMT(status, fmt, ...) \
  42:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END_FMT(TRACE_MODULE_API, status, fmt, ##__VA_ARGS__)
  43:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  44:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_0  0
  45:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_5  5
  46:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_10 10
  47:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  48:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** uint32_t refArrayQuadrants[4] = {REF_ARRAY_SPAD_10, REF_ARRAY_SPAD_5,
  49:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		REF_ARRAY_SPAD_0, REF_ARRAY_SPAD_5 };
  50:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  51:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_xtalk_calibration(VL53L0X_DEV Dev,
  52:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t XTalkCalDistance,
  53:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t *pXTalkCompensationRateMegaCps)
  54:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
  30              		.loc 1 54 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 32
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              	.LVL0:
  35 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 36
  38              		.cfi_offset 4, -36
  39              		.cfi_offset 5, -32
  40              		.cfi_offset 6, -28
  41              		.cfi_offset 7, -24
  42              		.cfi_offset 8, -20
  43              		.cfi_offset 9, -16
  44              		.cfi_offset 10, -12
  45              		.cfi_offset 11, -8
  46              		.cfi_offset 14, -4
  47 0004 89B0     		sub	sp, sp, #36
  48              	.LCFI1:
  49              		.cfi_def_cfa_offset 72
  50 0006 8146     		mov	r9, r0
  51 0008 9346     		mov	fp, r2
  52              	.LVL1:
  55:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  56:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
  57:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  58:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  59:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  60:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  61:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
  62:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanSignalRate;
  63:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRange;
ARM GAS  /tmp/cczWh4GR.s 			page 3


  64:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRtnSpads;
  65:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t signalXTalkTotalPerSpad;
  66:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t xTalkStoredMeanRtnSpadsAsInt;
  67:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t xTalkCalDistanceAsInt;
  68:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t XTalkCompensationRateMegaCps;
  69:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  70:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (XTalkCalDistance <= 0)
  53              		.loc 1 70 0
  54 000a 8A46     		mov	r10, r1
  55 000c 09B1     		cbz	r1, .L13
  55:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  56              		.loc 1 55 0
  57 000e 0023     		movs	r3, #0
  58 0010 01E0     		b	.L2
  59              	.L13:
  71:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
  60              		.loc 1 71 0
  61 0012 6FF00303 		mvn	r3, #3
  62              	.L2:
  63              	.LVL2:
  72:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  73:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the XTalk compensation */
  74:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
  64              		.loc 1 74 0
  65 0016 23B9     		cbnz	r3, .L3
  75:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
  66              		.loc 1 75 0
  67 0018 0021     		movs	r1, #0
  68              	.LVL3:
  69 001a 4846     		mov	r0, r9
  70              	.LVL4:
  71 001c FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
  72              	.LVL5:
  73 0020 0346     		mov	r3, r0
  74              	.LVL6:
  75              	.L3:
  76:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  77:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
  78:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  76              		.loc 1 78 0
  77 0022 2BB9     		cbnz	r3, .L4
  79:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
  78              		.loc 1 79 0
  79 0024 0022     		movs	r2, #0
  80 0026 0321     		movs	r1, #3
  81 0028 4846     		mov	r0, r9
  82 002a FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
  83              	.LVL7:
  84 002e 0346     		mov	r3, r0
  85              	.LVL8:
  86              	.L4:
  80:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
  81:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
  82:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  83:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
  84:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  87              		.loc 1 84 0
ARM GAS  /tmp/cczWh4GR.s 			page 4


  88 0030 E3B1     		cbz	r3, .L14
  59:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  89              		.loc 1 59 0
  90 0032 0027     		movs	r7, #0
  58:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  91              		.loc 1 58 0
  92 0034 B846     		mov	r8, r7
  57:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  93              		.loc 1 57 0
  94 0036 3D46     		mov	r5, r7
  56:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  95              		.loc 1 56 0
  96 0038 3E46     		mov	r6, r7
  97 003a 21E0     		b	.L6
  98              	.LVL9:
  99              	.L9:
  85:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
  86:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_spads = 0;
  87:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
  88:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		total_count = 0;
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
  90:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 100              		.loc 1 90 0
 101 003c 01A9     		add	r1, sp, #4
 102 003e 4846     		mov	r0, r9
 103 0040 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 104              	.LVL10:
  91:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
  92:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  93:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 105              		.loc 1 93 0
 106 0044 0346     		mov	r3, r0
 107 0046 C0B9     		cbnz	r0, .L7
  94:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
  95:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  96:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
  97:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 108              		.loc 1 97 0
 109 0048 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 110 004c 5AB9     		cbnz	r2, .L8
  98:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
  99:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 111              		.loc 1 99 0
 112 004e BDF80C20 		ldrh	r2, [sp, #12]
  98:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 113              		.loc 1 98 0
 114 0052 1644     		add	r6, r6, r2
 115              	.LVL11:
 116 0054 B6B2     		uxth	r6, r6
 117              	.LVL12:
 100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 101:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 118              		.loc 1 101 0
 119 0056 049A     		ldr	r2, [sp, #16]
 100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 120              		.loc 1 100 0
 121 0058 9044     		add	r8, r8, r2
ARM GAS  /tmp/cczWh4GR.s 			page 5


 122              	.LVL13:
 102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 103:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 123              		.loc 1 103 0
 124 005a BDF81820 		ldrh	r2, [sp, #24]
 102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 125              		.loc 1 102 0
 126 005e 05EB1225 		add	r5, r5, r2, lsr #8
 127              	.LVL14:
 128 0062 ADB2     		uxth	r5, r5
 129              	.LVL15:
 104:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/ 256;
 105:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 130              		.loc 1 105 0
 131 0064 0137     		adds	r7, r7, #1
 132              	.LVL16:
 133              	.L8:
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 134              		.loc 1 89 0 discriminator 2
 135 0066 0134     		adds	r4, r4, #1
 136              	.LVL17:
 137 0068 E4B2     		uxtb	r4, r4
 138              	.LVL18:
 139 006a 04E0     		b	.L5
 140              	.LVL19:
 141              	.L14:
 142 006c 0024     		movs	r4, #0
 143 006e 2746     		mov	r7, r4
 144 0070 A046     		mov	r8, r4
 145 0072 2546     		mov	r5, r4
 146 0074 2646     		mov	r6, r4
 147              	.LVL20:
 148              	.L5:
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 149              		.loc 1 89 0 is_stmt 0 discriminator 1
 150 0076 312C     		cmp	r4, #49
 151 0078 E0D9     		bls	.L9
 152              	.LVL21:
 153              	.L7:
 106:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 107:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 108:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 109:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* no valid values found */
 110:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 154              		.loc 1 110 0 is_stmt 1
 155 007a 0FB9     		cbnz	r7, .L6
 111:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 156              		.loc 1 111 0
 157 007c 6FF00503 		mvn	r3, #5
 158              	.LVL22:
 159              	.L6:
 112:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 113:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 114:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 115:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 116:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 160              		.loc 1 116 0
ARM GAS  /tmp/cczWh4GR.s 			page 6


 161 0080 83BB     		cbnz	r3, .L10
 117:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 118:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanSignalRate = sum_signalRate / total_count;
 162              		.loc 1 118 0
 163 0082 B8FBF7F8 		udiv	r8, r8, r7
 164              	.LVL23:
 119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 120:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			sum_ranging << 16) / total_count);
 165              		.loc 1 120 0
 166 0086 3604     		lsls	r6, r6, #16
 167              	.LVL24:
 119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 168              		.loc 1 119 0
 169 0088 B6FBF7F6 		udiv	r6, r6, r7
 170              	.LVL25:
 121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 122:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			sum_spads << 16) / total_count);
 171              		.loc 1 122 0
 172 008c 2D04     		lsls	r5, r5, #16
 173              	.LVL26:
 121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 174              		.loc 1 121 0
 175 008e B5FBF7F7 		udiv	r7, r5, r7
 176              	.LVL27:
 123:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 124:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Mean Spads to Whole Number.
 125:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Typically the calculated mean SPAD count is a whole number
 126:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * or very close to a whole
 127:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * number, therefore any truncation will not result in a
 128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * significant loss in accuracy.
 129:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Also, for a grey target at a typical distance of around
 130:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * 400mm, around 220 SPADs will
 131:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * be enabled, therefore, any truncation will result in a loss
 132:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * of accuracy of less than
 133:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * 0.5%.
 134:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 */
 135:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpadsAsInt = (xTalkStoredMeanRtnSpads +
 177              		.loc 1 135 0
 178 0092 07F50047 		add	r7, r7, #32768
 179              	.LVL28:
 136:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			0x8000) >> 16;
 137:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 138:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 139:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 140:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * is lost.*/
 141:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 xTalkCalDistanceAsInt = (XTalkCalDistance + 0x8000) >> 16;
 180              		.loc 1 141 0
 181 0096 0AF50042 		add	r2, r10, #32768
 182 009a 120C     		lsrs	r2, r2, #16
 183              	.LVL29:
 142:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 143:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (xTalkStoredMeanRtnSpadsAsInt == 0 ||
 184              		.loc 1 143 0
 185 009c 3F0C     		lsrs	r7, r7, #16
 186              	.LVL30:
 187 009e 0ED0     		beq	.L16
 188              		.loc 1 143 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cczWh4GR.s 			page 7


 189 00a0 7AB1     		cbz	r2, .L17
 144:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		   xTalkCalDistanceAsInt == 0 ||
 190              		.loc 1 144 0 is_stmt 1
 191 00a2 B245     		cmp	r10, r6
 192 00a4 0FD9     		bls	.L18
 145:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		   xTalkStoredMeanRange >= XTalkCalDistance) {
 146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = 0;
 147:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 148:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Round Cal Distance to Whole Number.
 149:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			   Note that the cal distance is in mm, therefore no
 150:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			   resolution is lost.*/
 151:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			xTalkCalDistanceAsInt = (XTalkCalDistance +
 152:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				0x8000) >> 16;
 153:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 154:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Apply division by mean spad count early in the
 155:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * calculation to keep the numbers small.
 156:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * This ensures we can maintain a 32bit calculation.
 157:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * Fixed1616 / int := Fixed1616 */
 158:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad = (xTalkStoredMeanSignalRate) /
 193              		.loc 1 158 0
 194 00a6 B8FBF7F4 		udiv	r4, r8, r7
 195              	.LVL31:
 159:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				xTalkStoredMeanRtnSpadsAsInt;
 160:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 161:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Complete the calculation for total Signal XTalk per
 162:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * SPAD
 163:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * Fixed1616 * (Fixed1616 - Fixed1616/int) :=
 164:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * (2^16 * Fixed1616)
 165:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad *= ((1 << 16) -
 167:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 196              		.loc 1 167 0
 197 00aa B6FBF2F6 		udiv	r6, r6, r2
 198              	.LVL32:
 166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 199              		.loc 1 166 0
 200 00ae C6F58032 		rsb	r2, r6, #65536
 201              	.LVL33:
 202 00b2 02FB04F4 		mul	r4, r2, r4
 203              	.LVL34:
 168:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 169:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Round from 2^16 * Fixed1616, to Fixed1616. */
 170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = (signalXTalkTotalPerSpad
 171:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 204              		.loc 1 171 0
 205 00b6 04F50044 		add	r4, r4, #32768
 206              	.LVL35:
 170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 207              		.loc 1 170 0
 208 00ba 240C     		lsrs	r4, r4, #16
 209              	.LVL36:
 210 00bc 04E0     		b	.L11
 211              	.LVL37:
 212              	.L16:
 146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 213              		.loc 1 146 0
 214 00be 0024     		movs	r4, #0
ARM GAS  /tmp/cczWh4GR.s 			page 8


 215 00c0 02E0     		b	.L11
 216              	.L17:
 217 00c2 0024     		movs	r4, #0
 218 00c4 00E0     		b	.L11
 219              	.L18:
 220 00c6 0024     		movs	r4, #0
 221              	.LVL38:
 222              	.L11:
 172:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 174:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pXTalkCompensationRateMegaCps = XTalkCompensationRateMegaCps;
 223              		.loc 1 174 0
 224 00c8 CBF80040 		str	r4, [fp]
 175:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 176:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 177:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 225              		.loc 1 177 0
 226 00cc 23B9     		cbnz	r3, .L12
 178:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationEnable(Dev, 1);
 227              		.loc 1 178 0
 228 00ce 0121     		movs	r1, #1
 229 00d0 4846     		mov	r0, r9
 230 00d2 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 231              	.LVL39:
 232 00d6 0346     		mov	r3, r0
 233              	.LVL40:
 234              	.L12:
 179:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 180:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 181:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 235              		.loc 1 181 0
 236 00d8 23B9     		cbnz	r3, .L10
 182:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 237              		.loc 1 182 0
 238 00da 2146     		mov	r1, r4
 239 00dc 4846     		mov	r0, r9
 240 00de FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationRateMegaCps
 241              	.LVL41:
 242 00e2 0346     		mov	r3, r0
 243              	.LVL42:
 244              	.L10:
 183:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					XTalkCompensationRateMegaCps);
 184:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 185:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 186:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 187:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 188:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 245              		.loc 1 188 0
 246 00e4 1846     		mov	r0, r3
 247 00e6 09B0     		add	sp, sp, #36
 248              	.LCFI2:
 249              		.cfi_def_cfa_offset 36
 250              		@ sp needed
 251 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 252              		.cfi_endproc
 253              	.LFE113:
 255              		.section	.text.VL53L0X_perform_offset_calibration,"ax",%progbits
ARM GAS  /tmp/cczWh4GR.s 			page 9


 256              		.align	2
 257              		.global	VL53L0X_perform_offset_calibration
 258              		.thumb
 259              		.thumb_func
 261              	VL53L0X_perform_offset_calibration:
 262              	.LFB114:
 189:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 190:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_offset_calibration(VL53L0X_DEV Dev,
 191:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t CalDistanceMilliMeter,
 192:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			int32_t *pOffsetMicroMeter)
 193:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 263              		.loc 1 193 0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 32
 266              		@ frame_needed = 0, uses_anonymous_args = 0
 267              	.LVL43:
 268 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 269              	.LCFI3:
 270              		.cfi_def_cfa_offset 28
 271              		.cfi_offset 4, -28
 272              		.cfi_offset 5, -24
 273              		.cfi_offset 6, -20
 274              		.cfi_offset 7, -16
 275              		.cfi_offset 8, -12
 276              		.cfi_offset 9, -8
 277              		.cfi_offset 14, -4
 278 0004 89B0     		sub	sp, sp, #36
 279              	.LCFI4:
 280              		.cfi_def_cfa_offset 64
 281 0006 0546     		mov	r5, r0
 282 0008 9046     		mov	r8, r2
 283              	.LVL44:
 194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
 196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 197:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 198:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t StoredMeanRange;
 199:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t StoredMeanRangeAsInt;
 200:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t CalDistanceAsInt_mm;
 201:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceStepEnabled;
 202:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int meas = 0;
 203:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 204:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (CalDistanceMilliMeter <= 0)
 284              		.loc 1 204 0
 285 000a 0F46     		mov	r7, r1
 286 000c 09B1     		cbz	r1, .L33
 194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 287              		.loc 1 194 0
 288 000e 0023     		movs	r3, #0
 289 0010 01E0     		b	.L21
 290              	.L33:
 205:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
 291              		.loc 1 205 0
 292 0012 6FF00303 		mvn	r3, #3
 293              	.L21:
 294              	.LVL45:
 206:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cczWh4GR.s 			page 10


 207:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 295              		.loc 1 207 0
 296 0016 23B9     		cbnz	r3, .L22
 208:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 297              		.loc 1 208 0
 298 0018 0021     		movs	r1, #0
 299              	.LVL46:
 300 001a 2846     		mov	r0, r5
 301              	.LVL47:
 302 001c FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 303              	.LVL48:
 304 0020 0346     		mov	r3, r0
 305              	.LVL49:
 306              	.L22:
 209:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 210:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 211:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Get the value of the TCC */
 212:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 307              		.loc 1 212 0
 308 0022 33B9     		cbnz	r3, .L23
 213:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetSequenceStepEnable(Dev,
 309              		.loc 1 213 0
 310 0024 0DF10302 		add	r2, sp, #3
 311 0028 0021     		movs	r1, #0
 312 002a 2846     		mov	r0, r5
 313 002c FFF7FEFF 		bl	VL53L0X_GetSequenceStepEnable
 314              	.LVL50:
 315 0030 0346     		mov	r3, r0
 316              	.LVL51:
 317              	.L23:
 214:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 215:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 216:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 217:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the TCC */
 218:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 318              		.loc 1 218 0
 319 0032 2BB9     		cbnz	r3, .L24
 219:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetSequenceStepEnable(Dev,
 320              		.loc 1 219 0
 321 0034 0022     		movs	r2, #0
 322 0036 1146     		mov	r1, r2
 323 0038 2846     		mov	r0, r5
 324 003a FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 325              	.LVL52:
 326 003e 0346     		mov	r3, r0
 327              	.LVL53:
 328              	.L24:
 220:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 221:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 222:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 223:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
 224:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 329              		.loc 1 224 0
 330 0040 2BB9     		cbnz	r3, .L25
 225:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
 331              		.loc 1 225 0
 332 0042 0022     		movs	r2, #0
ARM GAS  /tmp/cczWh4GR.s 			page 11


 333 0044 0321     		movs	r1, #3
 334 0046 2846     		mov	r0, r5
 335 0048 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 336              	.LVL54:
 337 004c 0346     		mov	r3, r0
 338              	.LVL55:
 339              	.L25:
 226:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 227:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 228:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
 229:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 340              		.loc 1 229 0
 341 004e 9BB1     		cbz	r3, .L34
 196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 342              		.loc 1 196 0
 343 0050 0026     		movs	r6, #0
 195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 344              		.loc 1 195 0
 345 0052 B146     		mov	r9, r6
 346 0054 18E0     		b	.L27
 347              	.LVL56:
 348              	.L30:
 230:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 231:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		total_count = 0;
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 233:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 349              		.loc 1 233 0
 350 0056 01A9     		add	r1, sp, #4
 351 0058 2846     		mov	r0, r5
 352 005a FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 353              	.LVL57:
 234:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 235:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 236:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 354              		.loc 1 236 0
 355 005e 0346     		mov	r3, r0
 356 0060 78B9     		cbnz	r0, .L28
 237:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 238:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 239:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
 240:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 357              		.loc 1 240 0
 358 0062 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 359 0066 2AB9     		cbnz	r2, .L29
 241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 242:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 360              		.loc 1 242 0
 361 0068 BDF80C20 		ldrh	r2, [sp, #12]
 241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 362              		.loc 1 241 0
 363 006c 4A44     		add	r2, r2, r9
 364 006e 1FFA82F9 		uxth	r9, r2
 365              	.LVL58:
 243:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 366              		.loc 1 243 0
 367 0072 0136     		adds	r6, r6, #1
 368              	.LVL59:
ARM GAS  /tmp/cczWh4GR.s 			page 12


 369              	.L29:
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 370              		.loc 1 232 0 discriminator 2
 371 0074 0134     		adds	r4, r4, #1
 372              	.LVL60:
 373 0076 02E0     		b	.L26
 374              	.LVL61:
 375              	.L34:
 376 0078 0024     		movs	r4, #0
 377 007a 2646     		mov	r6, r4
 378 007c A146     		mov	r9, r4
 379              	.LVL62:
 380              	.L26:
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 381              		.loc 1 232 0 is_stmt 0 discriminator 1
 382 007e 312C     		cmp	r4, #49
 383 0080 E9DD     		ble	.L30
 384              	.LVL63:
 385              	.L28:
 244:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 245:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 246:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 247:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* no valid values found */
 248:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 386              		.loc 1 248 0 is_stmt 1
 387 0082 0EB9     		cbnz	r6, .L27
 249:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 388              		.loc 1 249 0
 389 0084 6FF00503 		mvn	r3, #5
 390              	.LVL64:
 391              	.L27:
 250:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 251:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 252:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 253:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 392              		.loc 1 253 0
 393 0088 C3B9     		cbnz	r3, .L31
 254:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 255:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		StoredMeanRange = (FixPoint1616_t)((uint32_t)(sum_ranging << 16)
 394              		.loc 1 255 0
 395 008a 4FEA0942 		lsl	r2, r9, #16
 396 008e B2FBF6F6 		udiv	r6, r2, r6
 397              	.LVL65:
 256:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/ total_count);
 257:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 258:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		StoredMeanRangeAsInt = (StoredMeanRange + 0x8000) >> 16;
 398              		.loc 1 258 0
 399 0092 06F50046 		add	r6, r6, #32768
 400              	.LVL66:
 259:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 260:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 261:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 262:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * is lost.*/
 263:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 CalDistanceAsInt_mm = (CalDistanceMilliMeter + 0x8000) >> 16;
 401              		.loc 1 263 0
 402 0096 07F50047 		add	r7, r7, #32768
 403              	.LVL67:
ARM GAS  /tmp/cczWh4GR.s 			page 13


 404 009a 3F0C     		lsrs	r7, r7, #16
 405              	.LVL68:
 264:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 *pOffsetMicroMeter = (CalDistanceAsInt_mm -
 406              		.loc 1 265 0
 407 009c A7EB1646 		sub	r6, r7, r6, lsr #16
 408              	.LVL69:
 266:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 409              		.loc 1 266 0
 410 00a0 4FF47A72 		mov	r2, #1000
 411 00a4 02FB06F6 		mul	r6, r2, r6
 265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 412              		.loc 1 265 0
 413 00a8 C8F80060 		str	r6, [r8]
 267:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 268:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Apply the calculated offset */
 269:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 414              		.loc 1 269 0
 415 00ac 33B9     		cbnz	r3, .L31
 270:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 416              		.loc 1 270 0
 417 00ae 6E62     		str	r6, [r5, #36]
 271:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 272:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 418              		.loc 1 272 0
 419 00b0 D8F80010 		ldr	r1, [r8]
 420 00b4 2846     		mov	r0, r5
 421 00b6 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 422              	.LVL70:
 423 00ba 0346     		mov	r3, r0
 424              	.LVL71:
 425              	.L31:
 273:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 274:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 275:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 276:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 277:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 278:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Restore the TCC */
 279:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 426              		.loc 1 279 0
 427 00bc 43B9     		cbnz	r3, .L32
 280:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (SequenceStepEnabled != 0)
 428              		.loc 1 280 0
 429 00be 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 430 00c2 2AB1     		cbz	r2, .L32
 281:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetSequenceStepEnable(Dev,
 431              		.loc 1 281 0
 432 00c4 0122     		movs	r2, #1
 433 00c6 0021     		movs	r1, #0
 434 00c8 2846     		mov	r0, r5
 435 00ca FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 436              	.LVL72:
 437 00ce 0346     		mov	r3, r0
 438              	.LVL73:
 439              	.L32:
 282:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 283:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
ARM GAS  /tmp/cczWh4GR.s 			page 14


 284:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 285:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 286:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 440              		.loc 1 286 0
 441 00d0 1846     		mov	r0, r3
 442 00d2 09B0     		add	sp, sp, #36
 443              	.LCFI5:
 444              		.cfi_def_cfa_offset 28
 445              		@ sp needed
 446 00d4 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 447              		.cfi_endproc
 448              	.LFE114:
 450              		.section	.text.VL53L0X_set_offset_calibration_data_micro_meter,"ax",%progbits
 451              		.align	2
 452              		.global	VL53L0X_set_offset_calibration_data_micro_meter
 453              		.thumb
 454              		.thumb_func
 456              	VL53L0X_set_offset_calibration_data_micro_meter:
 457              	.LFB115:
 287:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 288:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 289:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 290:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		int32_t OffsetCalibrationDataMicroMeter)
 291:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 458              		.loc 1 291 0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 0
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 462              	.LVL74:
 463 0000 08B5     		push	{r3, lr}
 464              	.LCFI6:
 465              		.cfi_def_cfa_offset 8
 466              		.cfi_offset 3, -8
 467              		.cfi_offset 14, -4
 468              	.LVL75:
 292:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 293:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t cMaxOffsetMicroMeter = 511000;
 294:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t cMinOffsetMicroMeter = -512000;
 295:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 296:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t encodedOffsetVal;
 297:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 298:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_START("");
 299:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 300:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter > cMaxOffsetMicroMeter)
 469              		.loc 1 300 0
 470 0002 104B     		ldr	r3, .L44
 471 0004 9942     		cmp	r1, r3
 472 0006 03DC     		bgt	.L41
 301:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 302:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	else if (OffsetCalibrationDataMicroMeter < cMinOffsetMicroMeter)
 473              		.loc 1 302 0
 474 0008 11F5FA2F 		cmn	r1, #512000
 475 000c 02DB     		blt	.L42
 476 000e 02E0     		b	.L38
 477              	.L41:
 301:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 478              		.loc 1 301 0
ARM GAS  /tmp/cczWh4GR.s 			page 15


 479 0010 0C49     		ldr	r1, .L44
 480              	.LVL76:
 481 0012 00E0     		b	.L38
 482              	.LVL77:
 483              	.L42:
 303:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMinOffsetMicroMeter;
 484              		.loc 1 303 0
 485 0014 0C49     		ldr	r1, .L44+4
 486              	.LVL78:
 487              	.L38:
 304:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 305:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* The offset register is 10.2 format and units are mm
 306:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * therefore conversion is applied by a division of
 307:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * 250.
 308:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 309:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter >= 0) {
 488              		.loc 1 309 0
 489 0016 0029     		cmp	r1, #0
 490 0018 06DB     		blt	.L39
 310:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 311:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 491              		.loc 1 311 0
 492 001a 0C4A     		ldr	r2, .L44+8
 493 001c 82FB0132 		smull	r3, r2, r2, r1
 494 0020 C917     		asrs	r1, r1, #31
 495              	.LVL79:
 496 0022 C1EB2212 		rsb	r2, r1, r2, asr #4
 497              	.LVL80:
 498 0026 07E0     		b	.L40
 499              	.LVL81:
 500              	.L39:
 312:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
 313:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 314:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			cOffsetRange +
 315:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 501              		.loc 1 315 0
 502 0028 084A     		ldr	r2, .L44+8
 503 002a 82FB0132 		smull	r3, r2, r2, r1
 504 002e C917     		asrs	r1, r1, #31
 505              	.LVL82:
 506 0030 C1EB2212 		rsb	r2, r1, r2, asr #4
 314:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 507              		.loc 1 314 0
 508 0034 02F58052 		add	r2, r2, #4096
 509              	.LVL83:
 510              	.L40:
 316:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 317:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 318:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrWord(Dev,
 511              		.loc 1 318 0
 512 0038 92B2     		uxth	r2, r2
 513              	.LVL84:
 514 003a 2821     		movs	r1, #40
 515 003c FFF7FEFF 		bl	VL53L0X_WrWord
 516              	.LVL85:
 319:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 320:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal);
ARM GAS  /tmp/cczWh4GR.s 			page 16


 321:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 322:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_END(Status);
 323:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 324:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 517              		.loc 1 324 0
 518 0040 08BD     		pop	{r3, pc}
 519              	.L45:
 520 0042 00BF     		.align	2
 521              	.L44:
 522 0044 18CC0700 		.word	511000
 523 0048 0030F8FF 		.word	-512000
 524 004c D34D6210 		.word	274877907
 525              		.cfi_endproc
 526              	.LFE115:
 528              		.section	.text.VL53L0X_get_offset_calibration_data_micro_meter,"ax",%progbits
 529              		.align	2
 530              		.global	VL53L0X_get_offset_calibration_data_micro_meter
 531              		.thumb
 532              		.thumb_func
 534              	VL53L0X_get_offset_calibration_data_micro_meter:
 535              	.LFB116:
 325:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 326:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 327:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		int32_t *pOffsetCalibrationDataMicroMeter)
 328:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 536              		.loc 1 328 0
 537              		.cfi_startproc
 538              		@ args = 0, pretend = 0, frame = 8
 539              		@ frame_needed = 0, uses_anonymous_args = 0
 540              	.LVL86:
 541 0000 10B5     		push	{r4, lr}
 542              	.LCFI7:
 543              		.cfi_def_cfa_offset 8
 544              		.cfi_offset 4, -8
 545              		.cfi_offset 14, -4
 546 0002 82B0     		sub	sp, sp, #8
 547              	.LCFI8:
 548              		.cfi_def_cfa_offset 16
 549 0004 0C46     		mov	r4, r1
 550              	.LVL87:
 329:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 330:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t RangeOffsetRegister;
 331:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cMaxOffset = 2047;
 332:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 333:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 334:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Note that offset has 10.2 format */
 335:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 336:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_RdWord(Dev,
 551              		.loc 1 336 0
 552 0006 0DF10602 		add	r2, sp, #6
 553 000a 2821     		movs	r1, #40
 554              	.LVL88:
 555 000c FFF7FEFF 		bl	VL53L0X_RdWord
 556              	.LVL89:
 337:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 338:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&RangeOffsetRegister);
 339:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cczWh4GR.s 			page 17


 340:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 557              		.loc 1 340 0
 558 0010 0246     		mov	r2, r0
 559 0012 88B9     		cbnz	r0, .L47
 341:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		RangeOffsetRegister = (RangeOffsetRegister & 0x0fff);
 560              		.loc 1 341 0
 561 0014 BDF80630 		ldrh	r3, [sp, #6]
 562 0018 C3F30B03 		ubfx	r3, r3, #0, #12
 563              	.LVL90:
 342:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 343:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Apply 12 bit 2's compliment conversion */
 344:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (RangeOffsetRegister > cMaxOffset)
 564              		.loc 1 344 0
 565 001c B3F5006F 		cmp	r3, #2048
 566 0020 06DB     		blt	.L48
 345:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 346:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 567              		.loc 1 346 0
 568 0022 A3F58053 		sub	r3, r3, #4096
 569              	.LVL91:
 347:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					* 250;
 570              		.loc 1 347 0
 571 0026 FA21     		movs	r1, #250
 572 0028 03FB01F3 		mul	r3, r3, r1
 573              	.LVL92:
 345:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 574              		.loc 1 345 0
 575 002c 2360     		str	r3, [r4]
 576              	.LVL93:
 577 002e 03E0     		b	.L47
 578              	.LVL94:
 579              	.L48:
 348:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		else
 349:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 350:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 580              		.loc 1 350 0
 581 0030 FA21     		movs	r1, #250
 582 0032 03FB01F3 		mul	r3, r3, r1
 583              	.LVL95:
 349:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 584              		.loc 1 349 0
 585 0036 2360     		str	r3, [r4]
 586              	.LVL96:
 587              	.L47:
 351:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 352:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 353:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 354:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 355:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 588              		.loc 1 355 0
 589 0038 1046     		mov	r0, r2
 590              	.LVL97:
 591 003a 02B0     		add	sp, sp, #8
 592              	.LCFI9:
 593              		.cfi_def_cfa_offset 8
 594              		@ sp needed
 595 003c 10BD     		pop	{r4, pc}
ARM GAS  /tmp/cczWh4GR.s 			page 18


 596              		.cfi_endproc
 597              	.LFE116:
 599 003e 00BF     		.section	.text.VL53L0X_apply_offset_adjustment,"ax",%progbits
 600              		.align	2
 601              		.global	VL53L0X_apply_offset_adjustment
 602              		.thumb
 603              		.thumb_func
 605              	VL53L0X_apply_offset_adjustment:
 606              	.LFB117:
 356:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 357:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 358:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_apply_offset_adjustment(VL53L0X_DEV Dev)
 359:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 607              		.loc 1 359 0
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 8
 610              		@ frame_needed = 0, uses_anonymous_args = 0
 611              	.LVL98:
 612 0000 30B5     		push	{r4, r5, lr}
 613              	.LCFI10:
 614              		.cfi_def_cfa_offset 12
 615              		.cfi_offset 4, -12
 616              		.cfi_offset 5, -8
 617              		.cfi_offset 14, -4
 618 0002 83B0     		sub	sp, sp, #12
 619              	.LCFI11:
 620              		.cfi_def_cfa_offset 24
 621 0004 0446     		mov	r4, r0
 622              	.LVL99:
 360:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 361:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t CorrectedOffsetMicroMeters;
 362:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t CurrentOffsetMicroMeters;
 363:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 364:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* if we run on this function we can read all the NVM info
 365:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * used by the API */
 366:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_get_info_from_device(Dev, 7);
 623              		.loc 1 366 0
 624 0006 0721     		movs	r1, #7
 625 0008 FFF7FEFF 		bl	VL53L0X_get_info_from_device
 626              	.LVL100:
 367:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 368:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read back current device offset */
 369:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 627              		.loc 1 369 0
 628 000c 0346     		mov	r3, r0
 629 000e 20B9     		cbnz	r0, .L51
 370:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 630              		.loc 1 370 0
 631 0010 01A9     		add	r1, sp, #4
 632 0012 2046     		mov	r0, r4
 633              	.LVL101:
 634 0014 FFF7FEFF 		bl	VL53L0X_GetOffsetCalibrationDataMicroMeter
 635              	.LVL102:
 636 0018 0346     		mov	r3, r0
 637              	.LVL103:
 638              	.L51:
 371:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&CurrentOffsetMicroMeters);
ARM GAS  /tmp/cczWh4GR.s 			page 19


 372:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 373:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 374:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Apply Offset Adjustment derived from 400mm measurements */
 375:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 639              		.loc 1 375 0
 640 001a 53B9     		cbnz	r3, .L52
 376:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 377:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Store initial device offset */
 378:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		PALDevDataSet(Dev, Part2PartOffsetNVMMicroMeter,
 641              		.loc 1 378 0
 642 001c 019D     		ldr	r5, [sp, #4]
 643 001e A560     		str	r5, [r4, #8]
 379:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 380:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 381:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		CorrectedOffsetMicroMeters = CurrentOffsetMicroMeters +
 382:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 644              		.loc 1 382 0
 645 0020 E368     		ldr	r3, [r4, #12]
 646              	.LVL104:
 381:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 647              		.loc 1 381 0
 648 0022 1D44     		add	r5, r5, r3
 649              	.LVL105:
 383:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 384:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 385:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 650              		.loc 1 385 0
 651 0024 2946     		mov	r1, r5
 652 0026 2046     		mov	r0, r4
 653 0028 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 654              	.LVL106:
 386:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 387:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 388:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* store current, adjusted offset */
 389:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 655              		.loc 1 389 0
 656 002c 0346     		mov	r3, r0
 657 002e 00B9     		cbnz	r0, .L52
 390:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 658              		.loc 1 390 0
 659 0030 6562     		str	r5, [r4, #36]
 660              	.LVL107:
 661              	.L52:
 391:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 392:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 393:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 394:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 395:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 396:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 662              		.loc 1 396 0
 663 0032 1846     		mov	r0, r3
 664 0034 03B0     		add	sp, sp, #12
 665              	.LCFI12:
 666              		.cfi_def_cfa_offset 12
 667              		@ sp needed
 668 0036 30BD     		pop	{r4, r5, pc}
 669              		.cfi_endproc
ARM GAS  /tmp/cczWh4GR.s 			page 20


 670              	.LFE117:
 672              		.section	.text.get_next_good_spad,"ax",%progbits
 673              		.align	2
 674              		.global	get_next_good_spad
 675              		.thumb
 676              		.thumb_func
 678              	get_next_good_spad:
 679              	.LFB118:
 397:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 398:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** void get_next_good_spad(uint8_t goodSpadArray[], uint32_t size,
 399:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			uint32_t curr, int32_t *next)
 400:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 680              		.loc 1 400 0
 681              		.cfi_startproc
 682              		@ args = 0, pretend = 0, frame = 0
 683              		@ frame_needed = 0, uses_anonymous_args = 0
 684              	.LVL108:
 685 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 686              	.LCFI13:
 687              		.cfi_def_cfa_offset 20
 688              		.cfi_offset 4, -20
 689              		.cfi_offset 5, -16
 690              		.cfi_offset 6, -12
 691              		.cfi_offset 7, -8
 692              		.cfi_offset 14, -4
 693              	.LVL109:
 401:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t startIndex;
 402:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineOffset;
 403:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 404:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 405:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 406:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t dataByte;
 407:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t success = 0;
 408:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 409:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 410:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Starting with the current good spad, loop through the array to find
 411:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * the next. i.e. the next bit set in the sequence.
 412:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 413:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The coarse index is the byte index of the array and the fine index is
 414:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * the index of the bit within each byte.
 415:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 416:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 417:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*next = -1;
 694              		.loc 1 417 0
 695 0002 4FF0FF34 		mov	r4, #-1
 696 0006 1C60     		str	r4, [r3]
 418:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 419:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	startIndex = curr / cSpadsPerByte;
 697              		.loc 1 419 0
 698 0008 D708     		lsrs	r7, r2, #3
 699              	.LVL110:
 420:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	fineOffset = curr % cSpadsPerByte;
 700              		.loc 1 420 0
 701 000a 02F0070E 		and	lr, r2, #7
 702              	.LVL111:
 421:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (coarseIndex = startIndex; ((coarseIndex < size) && !success);
ARM GAS  /tmp/cczWh4GR.s 			page 21


 703              		.loc 1 422 0
 704 000e 3D46     		mov	r5, r7
 407:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 705              		.loc 1 407 0
 706 0010 0026     		movs	r6, #0
 707              		.loc 1 422 0
 708 0012 16E0     		b	.L55
 709              	.LVL112:
 710              	.L62:
 423:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 424:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 425:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 711              		.loc 1 425 0
 712 0014 445D     		ldrb	r4, [r0, r5]	@ zero_extendqisi2
 713              	.LVL113:
 426:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 427:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (coarseIndex == startIndex) {
 714              		.loc 1 427 0
 715 0016 BD42     		cmp	r5, r7
 716 0018 04D1     		bne	.L63
 428:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 429:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * spad bit before iterating */
 430:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			dataByte >>= fineOffset;
 717              		.loc 1 430 0
 718 001a 44FA0EF4 		asr	r4, r4, lr
 719              	.LVL114:
 720 001e E4B2     		uxtb	r4, r4
 721              	.LVL115:
 431:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			fineIndex = fineOffset;
 722              		.loc 1 431 0
 723 0020 7246     		mov	r2, lr
 724 0022 0BE0     		b	.L57
 725              	.LVL116:
 726              	.L63:
 424:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 727              		.loc 1 424 0
 728 0024 0022     		movs	r2, #0
 729 0026 09E0     		b	.L57
 730              	.LVL117:
 731              	.L60:
 432:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 433:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 434:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (fineIndex < cSpadsPerByte) {
 435:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 732              		.loc 1 435 0
 733 0028 14F0010F 		tst	r4, #1
 734 002c 04D0     		beq	.L58
 735              	.LVL118:
 436:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				success = 1;
 437:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 736              		.loc 1 437 0
 737 002e 02EBC502 		add	r2, r2, r5, lsl #3
 738              	.LVL119:
 739 0032 1A60     		str	r2, [r3]
 436:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				success = 1;
 740              		.loc 1 436 0
 741 0034 0126     		movs	r6, #1
ARM GAS  /tmp/cczWh4GR.s 			page 22


 438:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 742              		.loc 1 438 0
 743 0036 03E0     		b	.L59
 744              	.LVL120:
 745              	.L58:
 439:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 440:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			dataByte >>= 1;
 746              		.loc 1 440 0
 747 0038 6408     		lsrs	r4, r4, #1
 748              	.LVL121:
 441:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			fineIndex++;
 749              		.loc 1 441 0
 750 003a 0132     		adds	r2, r2, #1
 751              	.LVL122:
 752              	.L57:
 434:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 753              		.loc 1 434 0
 754 003c 072A     		cmp	r2, #7
 755 003e F3D9     		bls	.L60
 756              	.LVL123:
 757              	.L59:
 423:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 758              		.loc 1 423 0
 759 0040 0135     		adds	r5, r5, #1
 760              	.LVL124:
 761              	.L55:
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 762              		.loc 1 422 0 discriminator 1
 763 0042 8D42     		cmp	r5, r1
 764 0044 01D2     		bcs	.L54
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 765              		.loc 1 422 0 is_stmt 0 discriminator 2
 766 0046 002E     		cmp	r6, #0
 767 0048 E4D0     		beq	.L62
 768              	.L54:
 769 004a F0BD     		pop	{r4, r5, r6, r7, pc}
 770              		.cfi_endproc
 771              	.LFE118:
 773              		.section	.text.is_aperture,"ax",%progbits
 774              		.align	2
 775              		.global	is_aperture
 776              		.thumb
 777              		.thumb_func
 779              	is_aperture:
 780              	.LFB119:
 442:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 443:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 444:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 445:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 446:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 447:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** uint8_t is_aperture(uint32_t spadIndex)
 448:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 781              		.loc 1 448 0 is_stmt 1
 782              		.cfi_startproc
 783              		@ args = 0, pretend = 0, frame = 0
 784              		@ frame_needed = 0, uses_anonymous_args = 0
 785              		@ link register save eliminated.
ARM GAS  /tmp/cczWh4GR.s 			page 23


 786              	.LVL125:
 449:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 450:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function reports if a given spad index is an aperture SPAD by
 451:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * deriving the quadrant.
 452:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 453:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t quadrant;
 454:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 455:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 787              		.loc 1 455 0
 788 0000 8009     		lsrs	r0, r0, #6
 789              	.LVL126:
 456:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (refArrayQuadrants[quadrant] == REF_ARRAY_SPAD_0)
 790              		.loc 1 456 0
 791 0002 044B     		ldr	r3, .L68
 792 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
 793 0008 0BB1     		cbz	r3, .L67
 454:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 794              		.loc 1 454 0
 795 000a 0120     		movs	r0, #1
 796              	.LVL127:
 797 000c 7047     		bx	lr
 798              	.LVL128:
 799              	.L67:
 457:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		isAperture = 0;
 800              		.loc 1 457 0
 801 000e 0020     		movs	r0, #0
 802              	.LVL129:
 458:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 459:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return isAperture;
 460:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 803              		.loc 1 460 0
 804 0010 7047     		bx	lr
 805              	.L69:
 806 0012 00BF     		.align	2
 807              	.L68:
 808 0014 00000000 		.word	.LANCHOR0
 809              		.cfi_endproc
 810              	.LFE119:
 812              		.section	.text.enable_spad_bit,"ax",%progbits
 813              		.align	2
 814              		.global	enable_spad_bit
 815              		.thumb
 816              		.thumb_func
 818              	enable_spad_bit:
 819              	.LFB120:
 461:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 462:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 463:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error enable_spad_bit(uint8_t spadArray[], uint32_t size,
 464:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadIndex)
 465:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 820              		.loc 1 465 0
 821              		.cfi_startproc
 822              		@ args = 0, pretend = 0, frame = 0
 823              		@ frame_needed = 0, uses_anonymous_args = 0
 824              		@ link register save eliminated.
 825              	.LVL130:
 826 0000 10B4     		push	{r4}
ARM GAS  /tmp/cczWh4GR.s 			page 24


 827              	.LCFI14:
 828              		.cfi_def_cfa_offset 4
 829              		.cfi_offset 4, -4
 830              	.LVL131:
 466:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 467:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 468:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 469:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 470:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 471:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	coarseIndex = spadIndex / cSpadsPerByte;
 831              		.loc 1 471 0
 832 0002 D408     		lsrs	r4, r2, #3
 833              	.LVL132:
 472:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	fineIndex = spadIndex % cSpadsPerByte;
 473:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (coarseIndex >= size)
 834              		.loc 1 473 0
 835 0004 8C42     		cmp	r4, r1
 836 0006 09D2     		bcs	.L72
 837 0008 02F00702 		and	r2, r2, #7
 838              	.LVL133:
 474:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 475:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	else
 476:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		spadArray[coarseIndex] |= (1 << fineIndex);
 839              		.loc 1 476 0
 840 000c 0123     		movs	r3, #1
 841 000e 03FA02F2 		lsl	r2, r3, r2
 842              	.LVL134:
 843 0012 035D     		ldrb	r3, [r0, r4]	@ zero_extendqisi2
 844 0014 1A43     		orrs	r2, r2, r3
 845 0016 0255     		strb	r2, [r0, r4]
 466:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 846              		.loc 1 466 0
 847 0018 0020     		movs	r0, #0
 848              	.LVL135:
 849 001a 01E0     		b	.L71
 850              	.LVL136:
 851              	.L72:
 474:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 852              		.loc 1 474 0
 853 001c 6FF03100 		mvn	r0, #49
 854              	.LVL137:
 855              	.L71:
 477:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 478:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 479:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 856              		.loc 1 479 0
 857 0020 5DF8044B 		ldr	r4, [sp], #4
 858              	.LCFI15:
 859              		.cfi_restore 4
 860              		.cfi_def_cfa_offset 0
 861              	.LVL138:
 862 0024 7047     		bx	lr
 863              		.cfi_endproc
 864              	.LFE120:
 866 0026 00BF     		.section	.text.count_enabled_spads,"ax",%progbits
 867              		.align	2
 868              		.global	count_enabled_spads
ARM GAS  /tmp/cczWh4GR.s 			page 25


 869              		.thumb
 870              		.thumb_func
 872              	count_enabled_spads:
 873              	.LFB121:
 480:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 481:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error count_enabled_spads(uint8_t spadArray[],
 482:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint32_t byteCount, uint32_t maxSpads,
 483:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint32_t *pTotalSpadsEnabled, uint8_t *pIsAperture)
 484:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 874              		.loc 1 484 0
 875              		.cfi_startproc
 876              		@ args = 4, pretend = 0, frame = 0
 877              		@ frame_needed = 0, uses_anonymous_args = 0
 878              	.LVL139:
 879 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 880              	.LCFI16:
 881              		.cfi_def_cfa_offset 24
 882              		.cfi_offset 4, -24
 883              		.cfi_offset 5, -20
 884              		.cfi_offset 6, -16
 885              		.cfi_offset 7, -12
 886              		.cfi_offset 8, -8
 887              		.cfi_offset 14, -4
 888 0004 069F     		ldr	r7, [sp, #24]
 889              	.LVL140:
 485:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 486:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 487:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastByte;
 488:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastBit;
 489:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t byteIndex = 0;
 490:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t bitIndex = 0;
 491:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t tempByte;
 492:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t spadTypeIdentified = 0;
 493:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 494:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* The entire array will not be used for spads, therefore the last
 495:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * byte and last bit is determined from the max spads value.
 496:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 497:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 498:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	lastByte = maxSpads / cSpadsPerByte;
 890              		.loc 1 498 0
 891 0006 4FEAD20C 		lsr	ip, r2, #3
 892              	.LVL141:
 499:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	lastBit = maxSpads % cSpadsPerByte;
 893              		.loc 1 499 0
 894 000a 02F0070E 		and	lr, r2, #7
 895              	.LVL142:
 500:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 501:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Check that the max spads value does not exceed the array bounds. */
 502:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (lastByte >= byteCount)
 896              		.loc 1 502 0
 897 000e 8C45     		cmp	ip, r1
 898 0010 02D2     		bcs	.L84
 485:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 899              		.loc 1 485 0
 900 0012 4FF00008 		mov	r8, #0
 901 0016 01E0     		b	.L75
 902              	.L84:
ARM GAS  /tmp/cczWh4GR.s 			page 26


 503:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 903              		.loc 1 503 0
 904 0018 6FF03108 		mvn	r8, #49
 905              	.L75:
 906              	.LVL143:
 504:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 505:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*pTotalSpadsEnabled = 0;
 907              		.loc 1 505 0
 908 001c 0026     		movs	r6, #0
 909 001e 1E60     		str	r6, [r3]
 492:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 910              		.loc 1 492 0
 911 0020 3546     		mov	r5, r6
 506:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 507:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Count the bits enabled in the whole bytes */
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (byteIndex = 0; byteIndex <= (lastByte - 1); byteIndex++) {
 912              		.loc 1 508 0
 913 0022 1BE0     		b	.L76
 914              	.LVL144:
 915              	.L80:
 509:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 916              		.loc 1 509 0
 917 0024 815D     		ldrb	r1, [r0, r6]	@ zero_extendqisi2
 918              	.LVL145:
 510:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (bitIndex = 0; bitIndex <= cSpadsPerByte; bitIndex++) {
 919              		.loc 1 511 0
 920 0026 0022     		movs	r2, #0
 921 0028 15E0     		b	.L77
 922              	.LVL146:
 923              	.L79:
 512:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 924              		.loc 1 512 0
 925 002a 11F0010F 		tst	r1, #1
 926 002e 10D0     		beq	.L78
 513:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 927              		.loc 1 513 0
 928 0030 1C68     		ldr	r4, [r3]
 929 0032 0134     		adds	r4, r4, #1
 930 0034 1C60     		str	r4, [r3]
 514:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 515:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if (!spadTypeIdentified) {
 931              		.loc 1 515 0
 932 0036 65B9     		cbnz	r5, .L78
 516:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 933              		.loc 1 516 0
 934 0038 0124     		movs	r4, #1
 935 003a 3C70     		strb	r4, [r7]
 517:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 936              		.loc 1 517 0
 937 003c A642     		cmp	r6, r4
 938 003e 05D8     		bhi	.L85
 939              		.loc 1 517 0 is_stmt 0 discriminator 1
 940 0040 032A     		cmp	r2, #3
 941 0042 05D8     		bhi	.L86
 518:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 942              		.loc 1 518 0 is_stmt 1
ARM GAS  /tmp/cczWh4GR.s 			page 27


 943 0044 0024     		movs	r4, #0
 944 0046 3C70     		strb	r4, [r7]
 519:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 945              		.loc 1 519 0
 946 0048 0125     		movs	r5, #1
 947              	.LVL147:
 948 004a 02E0     		b	.L78
 949              	.LVL148:
 950              	.L85:
 951 004c 0125     		movs	r5, #1
 952              	.LVL149:
 953 004e 00E0     		b	.L78
 954              	.LVL150:
 955              	.L86:
 956 0050 0125     		movs	r5, #1
 957              	.LVL151:
 958              	.L78:
 520:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 521:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 522:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			tempByte >>= 1;
 959              		.loc 1 522 0 discriminator 2
 960 0052 4908     		lsrs	r1, r1, #1
 961              	.LVL152:
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 962              		.loc 1 511 0 discriminator 2
 963 0054 0132     		adds	r2, r2, #1
 964              	.LVL153:
 965              	.L77:
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 966              		.loc 1 511 0 is_stmt 0 discriminator 1
 967 0056 082A     		cmp	r2, #8
 968 0058 E7D9     		bls	.L79
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 969              		.loc 1 508 0 is_stmt 1 discriminator 2
 970 005a 0136     		adds	r6, r6, #1
 971              	.LVL154:
 972              	.L76:
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 973              		.loc 1 508 0 is_stmt 0 discriminator 1
 974 005c 0CF1FF32 		add	r2, ip, #-1
 975 0060 9642     		cmp	r6, r2
 976 0062 DFD9     		bls	.L80
 523:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 524:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 525:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 526:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Count the number of bits enabled in the last byte accounting
 527:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * for the fact that not all bits in the byte may be used.
 528:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 529:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	tempByte = spadArray[lastByte];
 977              		.loc 1 529 0 is_stmt 1
 978 0064 10F80C00 		ldrb	r0, [r0, ip]	@ zero_extendqisi2
 979              	.LVL155:
 530:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (bitIndex = 0; bitIndex <= lastBit; bitIndex++) {
 980              		.loc 1 531 0
 981 0068 0022     		movs	r2, #0
 982 006a 06E0     		b	.L81
ARM GAS  /tmp/cczWh4GR.s 			page 28


 983              	.LVL156:
 984              	.L83:
 532:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 985              		.loc 1 532 0
 986 006c 10F0010F 		tst	r0, #1
 987 0070 02D0     		beq	.L82
 533:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(*pTotalSpadsEnabled)++;
 988              		.loc 1 533 0
 989 0072 1968     		ldr	r1, [r3]
 990 0074 0131     		adds	r1, r1, #1
 991 0076 1960     		str	r1, [r3]
 992              	.L82:
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 993              		.loc 1 531 0 discriminator 2
 994 0078 0132     		adds	r2, r2, #1
 995              	.LVL157:
 996              	.L81:
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 997              		.loc 1 531 0 is_stmt 0 discriminator 1
 998 007a 7245     		cmp	r2, lr
 999 007c F6D9     		bls	.L83
 534:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 535:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 536:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 537:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1000              		.loc 1 537 0 is_stmt 1
 1001 007e 4046     		mov	r0, r8
 1002              	.LVL158:
 1003 0080 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1004              		.cfi_endproc
 1005              	.LFE121:
 1007              		.section	.text.set_ref_spad_map,"ax",%progbits
 1008              		.align	2
 1009              		.global	set_ref_spad_map
 1010              		.thumb
 1011              		.thumb_func
 1013              	set_ref_spad_map:
 1014              	.LFB122:
 538:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 539:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error set_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 540:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1015              		.loc 1 540 0
 1016              		.cfi_startproc
 1017              		@ args = 0, pretend = 0, frame = 0
 1018              		@ frame_needed = 0, uses_anonymous_args = 0
 1019              	.LVL159:
 1020 0000 08B5     		push	{r3, lr}
 1021              	.LCFI17:
 1022              		.cfi_def_cfa_offset 8
 1023              		.cfi_offset 3, -8
 1024              		.cfi_offset 14, -4
 541:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_WriteMulti(Dev,
 1025              		.loc 1 541 0
 1026 0002 0623     		movs	r3, #6
 1027 0004 0A46     		mov	r2, r1
 1028 0006 B021     		movs	r1, #176
 1029              	.LVL160:
ARM GAS  /tmp/cczWh4GR.s 			page 29


 1030 0008 FFF7FEFF 		bl	VL53L0X_WriteMulti
 1031              	.LVL161:
 542:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 543:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				refSpadArray, 6);
 544:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 545:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1032              		.loc 1 545 0
 1033 000c 08BD     		pop	{r3, pc}
 1034              		.cfi_endproc
 1035              	.LFE122:
 1037 000e 00BF     		.section	.text.get_ref_spad_map,"ax",%progbits
 1038              		.align	2
 1039              		.global	get_ref_spad_map
 1040              		.thumb
 1041              		.thumb_func
 1043              	get_ref_spad_map:
 1044              	.LFB123:
 546:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 547:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error get_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 548:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1045              		.loc 1 548 0
 1046              		.cfi_startproc
 1047              		@ args = 0, pretend = 0, frame = 0
 1048              		@ frame_needed = 0, uses_anonymous_args = 0
 1049              	.LVL162:
 1050 0000 08B5     		push	{r3, lr}
 1051              	.LCFI18:
 1052              		.cfi_def_cfa_offset 8
 1053              		.cfi_offset 3, -8
 1054              		.cfi_offset 14, -4
 549:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ReadMulti(Dev,
 1055              		.loc 1 549 0
 1056 0002 0623     		movs	r3, #6
 1057 0004 0A46     		mov	r2, r1
 1058 0006 B021     		movs	r1, #176
 1059              	.LVL163:
 1060 0008 FFF7FEFF 		bl	VL53L0X_ReadMulti
 1061              	.LVL164:
 550:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 551:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				refSpadArray,
 552:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				6);
 553:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 554:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1062              		.loc 1 554 0
 1063 000c 08BD     		pop	{r3, pc}
 1064              		.cfi_endproc
 1065              	.LFE123:
 1067 000e 00BF     		.section	.text.enable_ref_spads,"ax",%progbits
 1068              		.align	2
 1069              		.global	enable_ref_spads
 1070              		.thumb
 1071              		.thumb_func
 1073              	enable_ref_spads:
 1074              	.LFB124:
 555:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 556:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error enable_ref_spads(VL53L0X_DEV Dev,
 557:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t apertureSpads,
ARM GAS  /tmp/cczWh4GR.s 			page 30


 558:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t goodSpadArray[],
 559:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t spadArray[],
 560:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t size,
 561:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t start,
 562:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t offset,
 563:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t spadCount,
 564:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t *lastSpad)
 565:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1075              		.loc 1 565 0
 1076              		.cfi_startproc
 1077              		@ args = 20, pretend = 0, frame = 24
 1078              		@ frame_needed = 0, uses_anonymous_args = 0
 1079              	.LVL165:
 1080 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1081              	.LCFI19:
 1082              		.cfi_def_cfa_offset 36
 1083              		.cfi_offset 4, -36
 1084              		.cfi_offset 5, -32
 1085              		.cfi_offset 6, -28
 1086              		.cfi_offset 7, -24
 1087              		.cfi_offset 8, -20
 1088              		.cfi_offset 9, -16
 1089              		.cfi_offset 10, -12
 1090              		.cfi_offset 11, -8
 1091              		.cfi_offset 14, -4
 1092 0004 87B0     		sub	sp, sp, #28
 1093              	.LCFI20:
 1094              		.cfi_def_cfa_offset 64
 1095 0006 0190     		str	r0, [sp, #4]
 1096 0008 8B46     		mov	fp, r1
 1097 000a 0092     		str	r2, [sp]
 1098 000c 9846     		mov	r8, r3
 1099 000e 109E     		ldr	r6, [sp, #64]
 1100 0010 DDF844A0 		ldr	r10, [sp, #68]
 1101 0014 129F     		ldr	r7, [sp, #72]
 1102 0016 DDF84C90 		ldr	r9, [sp, #76]
 1103              	.LVL166:
 566:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 567:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 568:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t i;
 569:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = offset;
 1104              		.loc 1 569 0
 1105 001a 0597     		str	r7, [sp, #20]
 1106              	.LVL167:
 570:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpad;
 571:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t checkSpadArray[6];
 572:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 573:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 574:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function takes in a spad array which may or may not have SPADS
 575:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * already enabled and appends from a given offset a requested number
 576:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * of new SPAD enables. The 'good spad map' is applied to
 577:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * determine the next SPADs to enable.
 578:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 579:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function applies to only aperture or only non-aperture spads.
 580:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Checks are performed to ensure this.
 581:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 582:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cczWh4GR.s 			page 31


 583:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	currentSpad = offset;
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadCount; index++) {
 1107              		.loc 1 584 0
 1108 001c 0025     		movs	r5, #0
 1109 001e 16E0     		b	.L93
 1110              	.LVL168:
 1111              	.L95:
 585:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1112              		.loc 1 585 0
 1113 0020 05AB     		add	r3, sp, #20
 1114 0022 3A46     		mov	r2, r7
 1115 0024 3146     		mov	r1, r6
 1116 0026 0098     		ldr	r0, [sp]
 1117 0028 FFF7FEFF 		bl	get_next_good_spad
 1118              	.LVL169:
 586:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 587:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 588:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (nextGoodSpad == -1) {
 1119              		.loc 1 588 0
 1120 002c 059C     		ldr	r4, [sp, #20]
 1121 002e B4F1FF3F 		cmp	r4, #-1
 1122 0032 10D0     		beq	.L100
 589:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 590:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 591:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 592:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 593:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Confirm that the next good SPAD is non-aperture */
 594:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (is_aperture(start + nextGoodSpad) != apertureSpads) {
 1123              		.loc 1 594 0
 1124 0034 04EB0A00 		add	r0, r4, r10
 1125 0038 FFF7FEFF 		bl	is_aperture
 1126              	.LVL170:
 1127 003c 5845     		cmp	r0, fp
 1128 003e 0DD1     		bne	.L101
 1129              	.LVL171:
 595:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 596:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * spads from the current quadrant then this is an error
 597:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 598:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 599:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 600:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 601:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpad = (uint32_t)nextGoodSpad;
 602:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		enable_spad_bit(spadArray, size, currentSpad);
 1130              		.loc 1 602 0 discriminator 2
 1131 0040 2246     		mov	r2, r4
 1132 0042 3146     		mov	r1, r6
 1133 0044 4046     		mov	r0, r8
 1134 0046 FFF7FEFF 		bl	enable_spad_bit
 1135              	.LVL172:
 603:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpad++;
 1136              		.loc 1 603 0 discriminator 2
 1137 004a 671C     		adds	r7, r4, #1
 1138              	.LVL173:
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1139              		.loc 1 584 0 discriminator 2
 1140 004c 0135     		adds	r5, r5, #1
 1141              	.LVL174:
ARM GAS  /tmp/cczWh4GR.s 			page 32


 1142              	.L93:
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1143              		.loc 1 584 0 is_stmt 0 discriminator 1
 1144 004e 4D45     		cmp	r5, r9
 1145 0050 E6D3     		bcc	.L95
 566:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 1146              		.loc 1 566 0 is_stmt 1
 1147 0052 0020     		movs	r0, #0
 1148 0054 04E0     		b	.L94
 1149              	.L100:
 589:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 1150              		.loc 1 589 0
 1151 0056 6FF03100 		mvn	r0, #49
 1152 005a 01E0     		b	.L94
 1153              	.L101:
 598:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 1154              		.loc 1 598 0
 1155 005c 6FF03100 		mvn	r0, #49
 1156              	.L94:
 1157              	.LVL175:
 604:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 605:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*lastSpad = currentSpad;
 1158              		.loc 1 605 0
 1159 0060 149B     		ldr	r3, [sp, #80]
 1160 0062 1F60     		str	r7, [r3]
 606:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 607:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1161              		.loc 1 607 0
 1162 0064 18B9     		cbnz	r0, .L96
 608:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = set_ref_spad_map(Dev, spadArray);
 1163              		.loc 1 608 0
 1164 0066 4146     		mov	r1, r8
 1165 0068 0198     		ldr	r0, [sp, #4]
 1166              	.LVL176:
 1167 006a FFF7FEFF 		bl	set_ref_spad_map
 1168              	.LVL177:
 1169              	.L96:
 609:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 610:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 611:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1170              		.loc 1 611 0
 1171 006e 98B9     		cbnz	r0, .L97
 612:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = get_ref_spad_map(Dev, checkSpadArray);
 1172              		.loc 1 612 0
 1173 0070 03A9     		add	r1, sp, #12
 1174 0072 0198     		ldr	r0, [sp, #4]
 1175              	.LVL178:
 1176 0074 FFF7FEFF 		bl	get_ref_spad_map
 1177              	.LVL179:
 613:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 614:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		i = 0;
 1178              		.loc 1 614 0
 1179 0078 0023     		movs	r3, #0
 615:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 616:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Compare spad maps. If not equal report error. */
 617:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (i < size) {
 1180              		.loc 1 617 0
ARM GAS  /tmp/cczWh4GR.s 			page 33


 1181 007a 08E0     		b	.L98
 1182              	.LVL180:
 1183              	.L99:
 618:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1184              		.loc 1 618 0
 1185 007c 18F80310 		ldrb	r1, [r8, r3]	@ zero_extendqisi2
 1186 0080 06AA     		add	r2, sp, #24
 1187 0082 1A44     		add	r2, r2, r3
 1188 0084 12F80C2C 		ldrb	r2, [r2, #-12]	@ zero_extendqisi2
 1189 0088 9142     		cmp	r1, r2
 1190 008a 03D1     		bne	.L102
 619:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 620:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 621:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 622:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			i++;
 1191              		.loc 1 622 0
 1192 008c 0133     		adds	r3, r3, #1
 1193              	.LVL181:
 1194              	.L98:
 617:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1195              		.loc 1 617 0
 1196 008e B342     		cmp	r3, r6
 1197 0090 F4D3     		bcc	.L99
 1198 0092 01E0     		b	.L97
 1199              	.L102:
 619:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1200              		.loc 1 619 0
 1201 0094 6FF03100 		mvn	r0, #49
 1202              	.LVL182:
 1203              	.L97:
 623:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 624:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 625:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 626:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1204              		.loc 1 626 0
 1205 0098 07B0     		add	sp, sp, #28
 1206              	.LCFI21:
 1207              		.cfi_def_cfa_offset 36
 1208              	.LVL183:
 1209              		@ sp needed
 1210 009a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1211              		.cfi_endproc
 1212              	.LFE124:
 1214 009e 00BF     		.section	.text.perform_ref_signal_measurement,"ax",%progbits
 1215              		.align	2
 1216              		.global	perform_ref_signal_measurement
 1217              		.thumb
 1218              		.thumb_func
 1220              	perform_ref_signal_measurement:
 1221              	.LFB125:
 627:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 628:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 629:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error perform_ref_signal_measurement(VL53L0X_DEV Dev,
 630:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint16_t *refSignalRate)
 631:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1222              		.loc 1 631 0
 1223              		.cfi_startproc
ARM GAS  /tmp/cczWh4GR.s 			page 34


 1224              		@ args = 0, pretend = 0, frame = 32
 1225              		@ frame_needed = 0, uses_anonymous_args = 0
 1226              	.LVL184:
 1227 0000 70B5     		push	{r4, r5, r6, lr}
 1228              	.LCFI22:
 1229              		.cfi_def_cfa_offset 16
 1230              		.cfi_offset 4, -16
 1231              		.cfi_offset 5, -12
 1232              		.cfi_offset 6, -8
 1233              		.cfi_offset 14, -4
 1234 0002 88B0     		sub	sp, sp, #32
 1235              	.LCFI23:
 1236              		.cfi_def_cfa_offset 48
 1237 0004 0446     		mov	r4, r0
 1238 0006 0E46     		mov	r6, r1
 1239              	.LVL185:
 632:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 633:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t rangingMeasurementData;
 634:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 635:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 636:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 637:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
 638:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
 639:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 640:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 641:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1240              		.loc 1 641 0
 1241 0008 90F83051 		ldrb	r5, [r0, #304]	@ zero_extendqisi2
 1242              	.LVL186:
 642:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 643:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 644:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function performs a reference signal rate measurement.
 645:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 646:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 647:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev,
 1243              		.loc 1 647 0
 1244 000c C022     		movs	r2, #192
 1245 000e 0121     		movs	r1, #1
 1246              	.LVL187:
 1247 0010 FFF7FEFF 		bl	VL53L0X_WrByte
 1248              	.LVL188:
 648:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0xC0);
 649:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 650:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1249              		.loc 1 650 0
 1250 0014 0346     		mov	r3, r0
 1251 0016 20B9     		cbnz	r0, .L105
 651:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 1252              		.loc 1 651 0
 1253 0018 01A9     		add	r1, sp, #4
 1254 001a 2046     		mov	r0, r4
 1255              	.LVL189:
 1256 001c FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 1257              	.LVL190:
 1258 0020 0346     		mov	r3, r0
 1259              	.LVL191:
 1260              	.L105:
ARM GAS  /tmp/cczWh4GR.s 			page 35


 652:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 653:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 654:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1261              		.loc 1 654 0
 1262 0022 2BB9     		cbnz	r3, .L106
 655:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1263              		.loc 1 655 0
 1264 0024 0122     		movs	r2, #1
 1265 0026 FF21     		movs	r1, #255
 1266 0028 2046     		mov	r0, r4
 1267 002a FFF7FEFF 		bl	VL53L0X_WrByte
 1268              	.LVL192:
 1269 002e 0346     		mov	r3, r0
 1270              	.LVL193:
 1271              	.L106:
 656:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 657:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1272              		.loc 1 657 0
 1273 0030 2BB9     		cbnz	r3, .L107
 658:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_RdWord(Dev,
 1274              		.loc 1 658 0
 1275 0032 3246     		mov	r2, r6
 1276 0034 B621     		movs	r1, #182
 1277 0036 2046     		mov	r0, r4
 1278 0038 FFF7FEFF 		bl	VL53L0X_RdWord
 1279              	.LVL194:
 1280 003c 0346     		mov	r3, r0
 1281              	.LVL195:
 1282              	.L107:
 659:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 660:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			refSignalRate);
 661:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 662:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1283              		.loc 1 662 0
 1284 003e 2BB9     		cbnz	r3, .L108
 663:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1285              		.loc 1 663 0
 1286 0040 0022     		movs	r2, #0
 1287 0042 FF21     		movs	r1, #255
 1288 0044 2046     		mov	r0, r4
 1289 0046 FFF7FEFF 		bl	VL53L0X_WrByte
 1290              	.LVL196:
 1291 004a 0346     		mov	r3, r0
 1292              	.LVL197:
 1293              	.L108:
 664:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 665:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1294              		.loc 1 665 0
 1295 004c 43B9     		cbnz	r3, .L109
 666:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
 667:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 1296              		.loc 1 667 0
 1297 004e 2A46     		mov	r2, r5
 1298 0050 0121     		movs	r1, #1
 1299 0052 2046     		mov	r0, r4
 1300 0054 FFF7FEFF 		bl	VL53L0X_WrByte
 1301              	.LVL198:
ARM GAS  /tmp/cczWh4GR.s 			page 36


 668:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
 669:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (status == VL53L0X_ERROR_NONE)
 1302              		.loc 1 669 0
 1303 0058 0346     		mov	r3, r0
 1304 005a 08B9     		cbnz	r0, .L109
 670:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1305              		.loc 1 670 0
 1306 005c 84F83051 		strb	r5, [r4, #304]
 1307              	.LVL199:
 1308              	.L109:
 671:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 672:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 673:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 674:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1309              		.loc 1 674 0
 1310 0060 1846     		mov	r0, r3
 1311 0062 08B0     		add	sp, sp, #32
 1312              	.LCFI24:
 1313              		.cfi_def_cfa_offset 16
 1314              		@ sp needed
 1315 0064 70BD     		pop	{r4, r5, r6, pc}
 1316              		.cfi_endproc
 1317              	.LFE125:
 1319 0066 00BF     		.section	.text.VL53L0X_set_reference_spads,"ax",%progbits
 1320              		.align	2
 1321              		.global	VL53L0X_set_reference_spads
 1322              		.thumb
 1323              		.thumb_func
 1325              	VL53L0X_set_reference_spads:
 1326              	.LFB127:
 675:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 676:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_spad_management(VL53L0X_DEV Dev,
 677:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t *refSpadCount,
 678:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t *isApertureSpads)
 679:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 680:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 681:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 682:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 683:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 684:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 685:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 686:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 687:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 688:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 689:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 690:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 691:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 692:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 693:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 694:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 695:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
 696:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 697:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 700:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 701:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
ARM GAS  /tmp/cczWh4GR.s 			page 37


 702:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The reference SPAD initialization procedure determines the minimum
 703:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * amount of reference spads to be enables to achieve a target reference
 704:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * signal rate and should be performed once during initialization.
 705:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 706:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Either aperture or non-aperture spads are applied but never both.
 707:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Firstly non-aperture spads are set, begining with 5 spads, and
 708:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * increased one spad at a time until the closest measurement to the
 709:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * target rate is achieved.
 710:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 711:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * If the target rate is exceeded when 5 non-aperture spads are enabled,
 712:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * initialization is performed instead with aperture spads.
 713:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 714:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * When setting spads, a 'Good Spad Map' is applied.
 715:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 716:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This procedure operates within a SPAD window of interest of a maximum
 717:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * 44 spads.
 718:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The start point is currently fixed to 180, which lies towards the end
 719:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * of the non-aperture quadrant and runs in to the adjacent aperture
 720:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * quadrant.
 721:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 722:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 723:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 724:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	targetRefRate = PALDevDataGet(Dev, targetRefRate);
 725:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 726:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 727:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Initialize Spad arrays.
 728:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Currently the good spad map is initialised to 'All good'.
 729:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This is a short term implementation. The good spad map will be
 730:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * provided as an input.
 731:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Note that there are 6 bytes. Only the first 44 bits will be used to
 732:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * represent spads.
 733:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 735:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 736:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 737:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 738:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 739:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 740:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 741:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 742:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 743:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 744:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 745:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 746:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 747:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 748:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 749:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 750:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 751:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 752:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 753:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 754:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			startSelect);
 755:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 756:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 757:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 758:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
ARM GAS  /tmp/cczWh4GR.s 			page 38


 759:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 760:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 761:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform ref calibration */
 762:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 763:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 764:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 765:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 766:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 767:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 768:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = 0;
 769:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 770:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 771:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 772:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 773:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 774:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 775:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize,
 776:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					startSelect,
 777:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 778:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 779:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 780:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 781:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 782:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 783:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 784:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 785:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = perform_ref_signal_measurement(Dev,
 786:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((Status == VL53L0X_ERROR_NONE) &&
 788:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 789:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 790:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * switch to APERTURE SPADs */
 791:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			for (index = 0; index < spadArraySize; index++)
 793:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 794:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 795:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 796:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Increment to the first APERTURE spad */
 797:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			while ((is_aperture(startSelect + currentSpadIndex)
 798:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 799:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 800:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 801:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			needAptSpads = 1;
 803:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 804:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = enable_ref_spads(Dev,
 805:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 806:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 807:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 808:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize,
 809:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					startSelect,
 810:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 811:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 812:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 813:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 814:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 815:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
ARM GAS  /tmp/cczWh4GR.s 			page 39


 816:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 817:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 818:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if ((Status == VL53L0X_ERROR_NONE) &&
 820:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 821:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 822:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * setting the minimum number of
 823:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * APERTURE spads. Can do no more
 824:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * therefore set the min number of
 825:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * aperture spads as the result.
 826:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 */
 827:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					isApertureSpads_int = 1;
 828:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 829:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 830:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 831:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			needAptSpads = 0;
 833:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 834:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 835:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) &&
 837:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 838:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 839:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * or non-aperture spads have been set. Proceed to add
 840:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * spads and perform measurements until the target
 841:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * reference is reached.
 842:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 */
 843:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		isApertureSpads_int = needAptSpads;
 844:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 845:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 846:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		memcpy(lastSpadArray, Dev->Data.SpadData.RefSpadEnables,
 847:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize);
 848:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		lastSignalRateDiff = abs(peakSignalRateRef -
 849:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			targetRefRate);
 850:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		complete = 0;
 851:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (!complete) {
 853:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 854:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 855:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize, currentSpadIndex,
 856:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&nextGoodSpad);
 857:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 858:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (nextGoodSpad == -1) {
 859:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 860:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 861:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 862:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 863:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Cannot combine Aperture and Non-Aperture spads, so
 864:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * ensure the current spad is of the correct type.
 865:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 866:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (is_aperture((uint32_t)startSelect + nextGoodSpad) !=
 867:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads) {
 868:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* At this point we have enabled the maximum
 869:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * number of Aperture spads.
 870:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 */
 871:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				complete = 1;
 872:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
ARM GAS  /tmp/cczWh4GR.s 			page 40


 873:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 874:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 875:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(refSpadCount_int)++;
 876:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 877:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			currentSpadIndex = nextGoodSpad;
 878:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 879:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 880:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 881:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 882:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 883:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 884:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 885:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * perform measurement. */
 886:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = set_ref_spad_map(Dev,
 887:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 888:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 889:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 890:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 891:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 892:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 893:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = perform_ref_signal_measurement(Dev,
 894:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 895:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 896:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 897:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 898:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 899:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalRateDiff = abs(peakSignalRateRef - targetRefRate);
 900:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 901:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (peakSignalRateRef > targetRefRate) {
 902:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 903:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * measurement closest to the target rate,
 904:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * either above or below it.
 905:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 */
 906:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if (signalRateDiff > lastSignalRateDiff) {
 907:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 908:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * measurement, so choose this. */
 909:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Status = set_ref_spad_map(Dev,
 910:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							lastSpadArray);
 911:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					memcpy(
 912:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 913:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					lastSpadArray, spadArraySize);
 914:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 915:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(refSpadCount_int)--;
 916:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				complete = 1;
 918:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 919:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Continue to add spads */
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				lastSignalRateDiff = signalRateDiff;
 921:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 922:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 923:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize);
 924:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 925:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 926:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} /* while */
 927:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 928:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 929:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
ARM GAS  /tmp/cczWh4GR.s 			page 41


 930:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 931:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 932:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 933:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 934:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 935:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 936:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 937:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 938:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 939:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 940:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 941:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 942:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 943:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_reference_spads(VL53L0X_DEV Dev,
 944:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 uint32_t count, uint8_t isApertureSpads)
 945:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1327              		.loc 1 945 0
 1328              		.cfi_startproc
 1329              		@ args = 0, pretend = 0, frame = 8
 1330              		@ frame_needed = 0, uses_anonymous_args = 0
 1331              	.LVL200:
 1332 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1333              	.LCFI25:
 1334              		.cfi_def_cfa_offset 20
 1335              		.cfi_offset 4, -20
 1336              		.cfi_offset 5, -16
 1337              		.cfi_offset 6, -12
 1338              		.cfi_offset 7, -8
 1339              		.cfi_offset 14, -4
 1340 0002 89B0     		sub	sp, sp, #36
 1341              	.LCFI26:
 1342              		.cfi_def_cfa_offset 56
 1343 0004 0546     		mov	r5, r0
 1344 0006 0F46     		mov	r7, r1
 1345 0008 1646     		mov	r6, r2
 1346              	.LVL201:
 946:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 947:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 948:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 949:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 950:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 951:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex;
 952:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 953:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 954:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 955:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function applies a requested number of reference spads, either
 956:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * aperture or
 957:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * non-aperture, as requested.
 958:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The good spad map will be applied.
 959:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 960:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 961:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1347              		.loc 1 961 0
 1348 000a 0122     		movs	r2, #1
 1349              	.LVL202:
 1350 000c FF21     		movs	r1, #255
 1351              	.LVL203:
ARM GAS  /tmp/cczWh4GR.s 			page 42


 1352 000e FFF7FEFF 		bl	VL53L0X_WrByte
 1353              	.LVL204:
 962:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 963:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1354              		.loc 1 963 0
 1355 0012 0346     		mov	r3, r0
 1356 0014 28B9     		cbnz	r0, .L112
 964:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1357              		.loc 1 964 0
 1358 0016 0022     		movs	r2, #0
 1359 0018 4F21     		movs	r1, #79
 1360 001a 2846     		mov	r0, r5
 1361              	.LVL205:
 1362 001c FFF7FEFF 		bl	VL53L0X_WrByte
 1363              	.LVL206:
 1364 0020 0346     		mov	r3, r0
 1365              	.LVL207:
 1366              	.L112:
 965:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 966:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 967:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1367              		.loc 1 967 0
 1368 0022 2BB9     		cbnz	r3, .L113
 968:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1369              		.loc 1 968 0
 1370 0024 2C22     		movs	r2, #44
 1371 0026 4E21     		movs	r1, #78
 1372 0028 2846     		mov	r0, r5
 1373 002a FFF7FEFF 		bl	VL53L0X_WrByte
 1374              	.LVL208:
 1375 002e 0346     		mov	r3, r0
 1376              	.LVL209:
 1377              	.L113:
 969:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 970:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 971:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1378              		.loc 1 971 0
 1379 0030 2BB9     		cbnz	r3, .L114
 972:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1380              		.loc 1 972 0
 1381 0032 0022     		movs	r2, #0
 1382 0034 FF21     		movs	r1, #255
 1383 0036 2846     		mov	r0, r5
 1384 0038 FFF7FEFF 		bl	VL53L0X_WrByte
 1385              	.LVL210:
 1386 003c 0346     		mov	r3, r0
 1387              	.LVL211:
 1388              	.L114:
 973:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 974:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1389              		.loc 1 974 0
 1390 003e 23B9     		cbnz	r3, .L115
 975:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1391              		.loc 1 975 0
 1392 0040 B422     		movs	r2, #180
 1393 0042 B621     		movs	r1, #182
 1394 0044 2846     		mov	r0, r5
ARM GAS  /tmp/cczWh4GR.s 			page 43


 1395 0046 FFF7FEFF 		bl	VL53L0X_WrByte
 1396              	.LVL212:
 1397              	.L115:
 945:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1398              		.loc 1 945 0 discriminator 1
 1399 004a 0023     		movs	r3, #0
 1400 004c 04E0     		b	.L116
 1401              	.LVL213:
 1402              	.L117:
 976:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 977:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			startSelect);
 978:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 980:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1403              		.loc 1 980 0 discriminator 3
 1404 004e EA18     		adds	r2, r5, r3
 1405 0050 0021     		movs	r1, #0
 1406 0052 82F82411 		strb	r1, [r2, #292]
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1407              		.loc 1 979 0 discriminator 3
 1408 0056 0133     		adds	r3, r3, #1
 1409              	.LVL214:
 1410              	.L116:
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1411              		.loc 1 979 0 is_stmt 0 discriminator 1
 1412 0058 052B     		cmp	r3, #5
 1413 005a F8D9     		bls	.L117
 981:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 982:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (isApertureSpads) {
 1414              		.loc 1 982 0 is_stmt 1
 1415 005c 1EB9     		cbnz	r6, .L122
 947:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1416              		.loc 1 947 0
 1417 005e 0024     		movs	r4, #0
 1418 0060 09E0     		b	.L119
 1419              	.LVL215:
 1420              	.L120:
 983:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Increment to the first APERTURE spad */
 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while ((is_aperture(startSelect + currentSpadIndex) == 0) &&
 985:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 986:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			currentSpadIndex++;
 1421              		.loc 1 986 0
 1422 0062 0134     		adds	r4, r4, #1
 1423              	.LVL216:
 1424 0064 00E0     		b	.L118
 1425              	.LVL217:
 1426              	.L122:
 1427 0066 0024     		movs	r4, #0
 1428              	.LVL218:
 1429              	.L118:
 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1430              		.loc 1 984 0
 1431 0068 04F1B400 		add	r0, r4, #180
 1432 006c FFF7FEFF 		bl	is_aperture
 1433              	.LVL219:
 1434 0070 08B9     		cbnz	r0, .L119
 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
ARM GAS  /tmp/cczWh4GR.s 			page 44


 1435              		.loc 1 984 0 is_stmt 0 discriminator 1
 1436 0072 2B2C     		cmp	r4, #43
 1437 0074 F5D9     		bls	.L120
 1438              	.LVL220:
 1439              	.L119:
 987:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 988:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 989:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = enable_ref_spads(Dev,
 1440              		.loc 1 989 0 is_stmt 1
 1441 0076 07AB     		add	r3, sp, #28
 1442 0078 0493     		str	r3, [sp, #16]
 1443 007a 0397     		str	r7, [sp, #12]
 1444 007c 0294     		str	r4, [sp, #8]
 1445 007e B423     		movs	r3, #180
 1446 0080 0193     		str	r3, [sp, #4]
 1447 0082 0623     		movs	r3, #6
 1448 0084 0093     		str	r3, [sp]
 1449 0086 05F59273 		add	r3, r5, #292
 1450 008a 05F59572 		add	r2, r5, #298
 1451 008e 3146     		mov	r1, r6
 1452 0090 2846     		mov	r0, r5
 1453 0092 FFF7FEFF 		bl	enable_ref_spads
 1454              	.LVL221:
 990:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				isApertureSpads,
 991:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 992:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables,
 993:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize,
 994:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				startSelect,
 995:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex,
 996:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				count,
 997:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&lastSpadIndex);
 998:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 999:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1455              		.loc 1 999 0
 1456 0096 0346     		mov	r3, r0
 1457 0098 30B9     		cbnz	r0, .L121
1000:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 1458              		.loc 1 1000 0
 1459 009a 0122     		movs	r2, #1
 1460 009c 85F81521 		strb	r2, [r5, #277]
1001:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1461              		.loc 1 1001 0
 1462 00a0 85F81371 		strb	r7, [r5, #275]
1002:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(count));
1003:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1463              		.loc 1 1003 0
 1464 00a4 85F81461 		strb	r6, [r5, #276]
 1465              	.L121:
1004:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, isApertureSpads);
1005:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1006:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1007:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1008:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1466              		.loc 1 1008 0
 1467 00a8 1846     		mov	r0, r3
 1468              	.LVL222:
 1469 00aa 09B0     		add	sp, sp, #36
ARM GAS  /tmp/cczWh4GR.s 			page 45


 1470              	.LCFI27:
 1471              		.cfi_def_cfa_offset 20
 1472              		@ sp needed
 1473 00ac F0BD     		pop	{r4, r5, r6, r7, pc}
 1474              		.cfi_endproc
 1475              	.LFE127:
 1477 00ae 00BF     		.section	.text.VL53L0X_get_reference_spads,"ax",%progbits
 1478              		.align	2
 1479              		.global	VL53L0X_get_reference_spads
 1480              		.thumb
 1481              		.thumb_func
 1483              	VL53L0X_get_reference_spads:
 1484              	.LFB128:
1009:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1010:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_reference_spads(VL53L0X_DEV Dev,
1011:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			uint32_t *pSpadCount, uint8_t *pIsApertureSpads)
1012:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1485              		.loc 1 1012 0
 1486              		.cfi_startproc
 1487              		@ args = 0, pretend = 0, frame = 16
 1488              		@ frame_needed = 0, uses_anonymous_args = 0
 1489              	.LVL223:
 1490 0000 70B5     		push	{r4, r5, r6, lr}
 1491              	.LCFI28:
 1492              		.cfi_def_cfa_offset 16
 1493              		.cfi_offset 4, -16
 1494              		.cfi_offset 5, -12
 1495              		.cfi_offset 6, -8
 1496              		.cfi_offset 14, -4
 1497 0002 86B0     		sub	sp, sp, #24
 1498              	.LCFI29:
 1499              		.cfi_def_cfa_offset 40
 1500              	.LVL224:
1013:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1014:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
1015:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadArray[6];
1016:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cMaxSpadCount = 44;
1017:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadArraySize = 6;
1018:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadsEnabled;
1019:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t isApertureSpads = 0;
 1501              		.loc 1 1019 0
 1502 0004 0023     		movs	r3, #0
 1503 0006 8DF80B30 		strb	r3, [sp, #11]
1020:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1021:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	refSpadsInitialised = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1504              		.loc 1 1021 0
 1505 000a 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 1506              	.LVL225:
1022:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RefSpadsInitialised);
1023:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1024:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (refSpadsInitialised == 1) {
 1507              		.loc 1 1024 0
 1508 000e 012B     		cmp	r3, #1
 1509 0010 07D1     		bne	.L125
1025:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1026:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pSpadCount = (uint32_t)VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1510              		.loc 1 1026 0
ARM GAS  /tmp/cczWh4GR.s 			page 46


 1511 0012 90F81331 		ldrb	r3, [r0, #275]	@ zero_extendqisi2
 1512              	.LVL226:
 1513 0016 0B60     		str	r3, [r1]
 1514              	.LVL227:
1027:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
1028:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pIsApertureSpads = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1515              		.loc 1 1028 0
 1516 0018 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1517 001c 1370     		strb	r3, [r2]
1013:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
 1518              		.loc 1 1013 0
 1519 001e 0023     		movs	r3, #0
 1520 0020 1EE0     		b	.L126
 1521              	.LVL228:
 1522              	.L125:
 1523 0022 1646     		mov	r6, r2
 1524 0024 0D46     		mov	r5, r1
 1525 0026 0446     		mov	r4, r0
1029:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
1030:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
1031:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1032:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* obtain spad info from device.*/
1033:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = get_ref_spad_map(Dev, refSpadArray);
 1526              		.loc 1 1033 0
 1527 0028 04A9     		add	r1, sp, #16
 1528              	.LVL229:
 1529 002a FFF7FEFF 		bl	get_ref_spad_map
 1530              	.LVL230:
1034:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1035:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 1531              		.loc 1 1035 0
 1532 002e 0346     		mov	r3, r0
 1533 0030 B0B9     		cbnz	r0, .L126
1036:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
1037:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * determine if Aperture or Non-Aperture.
1038:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
1039:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = count_enabled_spads(refSpadArray,
 1534              		.loc 1 1039 0
 1535 0032 0DF10B03 		add	r3, sp, #11
 1536 0036 0093     		str	r3, [sp]
 1537 0038 03AB     		add	r3, sp, #12
 1538 003a 2C22     		movs	r2, #44
 1539 003c 0621     		movs	r1, #6
 1540 003e 04A8     		add	r0, sp, #16
 1541              	.LVL231:
 1542 0040 FFF7FEFF 		bl	count_enabled_spads
 1543              	.LVL232:
1040:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							cSpadArraySize,
1041:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							cMaxSpadCount,
1042:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							&spadsEnabled,
1043:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							&isApertureSpads);
1044:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1045:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 1544              		.loc 1 1045 0
 1545 0044 0346     		mov	r3, r0
 1546 0046 58B9     		cbnz	r0, .L126
1046:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cczWh4GR.s 			page 47


1047:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*pSpadCount = spadsEnabled;
 1547              		.loc 1 1047 0
 1548 0048 0399     		ldr	r1, [sp, #12]
 1549 004a 2960     		str	r1, [r5]
1048:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 1550              		.loc 1 1048 0
 1551 004c 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 1552 0050 3270     		strb	r2, [r6]
1049:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1050:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1553              		.loc 1 1050 0
 1554 0052 0120     		movs	r0, #1
 1555              	.LVL233:
 1556 0054 84F81501 		strb	r0, [r4, #277]
1051:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
1052:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1557              		.loc 1 1052 0
 1558 0058 84F81311 		strb	r1, [r4, #275]
1053:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
1054:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(uint8_t)spadsEnabled);
1055:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1559              		.loc 1 1055 0
 1560 005c 84F81421 		strb	r2, [r4, #276]
 1561              	.LVL234:
 1562              	.L126:
1056:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
1057:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
1058:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
1059:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1060:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1061:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1062:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1563              		.loc 1 1062 0
 1564 0060 1846     		mov	r0, r3
 1565 0062 06B0     		add	sp, sp, #24
 1566              	.LCFI30:
 1567              		.cfi_def_cfa_offset 16
 1568              		@ sp needed
 1569 0064 70BD     		pop	{r4, r5, r6, pc}
 1570              		.cfi_endproc
 1571              	.LFE128:
 1573 0066 00BF     		.section	.text.VL53L0X_perform_single_ref_calibration,"ax",%progbits
 1574              		.align	2
 1575              		.global	VL53L0X_perform_single_ref_calibration
 1576              		.thumb
 1577              		.thumb_func
 1579              	VL53L0X_perform_single_ref_calibration:
 1580              	.LFB129:
1063:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1064:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1065:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_single_ref_calibration(VL53L0X_DEV Dev,
1066:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t vhv_init_byte)
1067:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1581              		.loc 1 1067 0
 1582              		.cfi_startproc
 1583              		@ args = 0, pretend = 0, frame = 0
 1584              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/cczWh4GR.s 			page 48


 1585              	.LVL235:
 1586 0000 10B5     		push	{r4, lr}
 1587              	.LCFI31:
 1588              		.cfi_def_cfa_offset 8
 1589              		.cfi_offset 4, -8
 1590              		.cfi_offset 14, -4
 1591 0002 0446     		mov	r4, r0
 1592              	.LVL236:
1068:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1069:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1070:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
1071:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START,
 1593              		.loc 1 1071 0
 1594 0004 41F00102 		orr	r2, r1, #1
 1595 0008 0021     		movs	r1, #0
 1596              	.LVL237:
 1597 000a FFF7FEFF 		bl	VL53L0X_WrByte
 1598              	.LVL238:
1072:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_SYSRANGE_MODE_START_STOP |
1073:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				vhv_init_byte);
1074:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1075:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1599              		.loc 1 1075 0
 1600 000e 0346     		mov	r3, r0
 1601 0010 18B9     		cbnz	r0, .L129
1076:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_measurement_poll_for_completion(Dev);
 1602              		.loc 1 1076 0
 1603 0012 2046     		mov	r0, r4
 1604              	.LVL239:
 1605 0014 FFF7FEFF 		bl	VL53L0X_measurement_poll_for_completion
 1606              	.LVL240:
 1607 0018 0346     		mov	r3, r0
 1608              	.LVL241:
 1609              	.L129:
1077:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1078:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1610              		.loc 1 1078 0
 1611 001a 23B9     		cbnz	r3, .L130
1079:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
 1612              		.loc 1 1079 0
 1613 001c 0021     		movs	r1, #0
 1614 001e 2046     		mov	r0, r4
 1615 0020 FFF7FEFF 		bl	VL53L0X_ClearInterruptMask
 1616              	.LVL242:
 1617 0024 0346     		mov	r3, r0
 1618              	.LVL243:
 1619              	.L130:
1080:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1081:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1620              		.loc 1 1081 0
 1621 0026 2BB9     		cbnz	r3, .L131
1082:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
 1622              		.loc 1 1082 0
 1623 0028 0022     		movs	r2, #0
 1624 002a 1146     		mov	r1, r2
 1625 002c 2046     		mov	r0, r4
 1626 002e FFF7FEFF 		bl	VL53L0X_WrByte
ARM GAS  /tmp/cczWh4GR.s 			page 49


 1627              	.LVL244:
 1628 0032 0346     		mov	r3, r0
 1629              	.LVL245:
 1630              	.L131:
1083:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1084:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1085:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1631              		.loc 1 1085 0
 1632 0034 1846     		mov	r0, r3
 1633 0036 10BD     		pop	{r4, pc}
 1634              		.cfi_endproc
 1635              	.LFE129:
 1637              		.section	.text.VL53L0X_ref_calibration_io,"ax",%progbits
 1638              		.align	2
 1639              		.global	VL53L0X_ref_calibration_io
 1640              		.thumb
 1641              		.thumb_func
 1643              	VL53L0X_ref_calibration_io:
 1644              	.LFB130:
1086:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1087:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1088:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_ref_calibration_io(VL53L0X_DEV Dev, uint8_t read_not_write,
1089:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings, uint8_t PhaseCal,
1090:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal,
1091:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t vhv_enable, const uint8_t phase_enable)
1092:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1645              		.loc 1 1092 0
 1646              		.cfi_startproc
 1647              		@ args = 16, pretend = 0, frame = 8
 1648              		@ frame_needed = 0, uses_anonymous_args = 0
 1649              	.LVL246:
 1650 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1651              	.LCFI32:
 1652              		.cfi_def_cfa_offset 36
 1653              		.cfi_offset 4, -36
 1654              		.cfi_offset 5, -32
 1655              		.cfi_offset 6, -28
 1656              		.cfi_offset 7, -24
 1657              		.cfi_offset 8, -20
 1658              		.cfi_offset 9, -16
 1659              		.cfi_offset 10, -12
 1660              		.cfi_offset 11, -8
 1661              		.cfi_offset 14, -4
 1662 0004 83B0     		sub	sp, sp, #12
 1663              	.LCFI33:
 1664              		.cfi_def_cfa_offset 48
 1665 0006 0546     		mov	r5, r0
 1666 0008 8846     		mov	r8, r1
 1667 000a 9246     		mov	r10, r2
 1668 000c 9946     		mov	r9, r3
 1669 000e 9DF83870 		ldrb	r7, [sp, #56]	@ zero_extendqisi2
 1670 0012 9DF83C60 		ldrb	r6, [sp, #60]	@ zero_extendqisi2
 1671              	.LVL247:
1093:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1094:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalint = 0;
 1672              		.loc 1 1094 0
 1673 0016 4FF0000B 		mov	fp, #0
ARM GAS  /tmp/cczWh4GR.s 			page 50


 1674 001a 8DF807B0 		strb	fp, [sp, #7]
1095:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1096:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1097:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1675              		.loc 1 1097 0
 1676 001e 0122     		movs	r2, #1
 1677              	.LVL248:
 1678 0020 FF21     		movs	r1, #255
 1679              	.LVL249:
 1680 0022 FFF7FEFF 		bl	VL53L0X_WrByte
 1681              	.LVL250:
 1682 0026 0446     		mov	r4, r0
 1683              	.LVL251:
1098:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x00);
 1684              		.loc 1 1098 0
 1685 0028 5A46     		mov	r2, fp
 1686 002a 5946     		mov	r1, fp
 1687 002c 2846     		mov	r0, r5
 1688 002e FFF7FEFF 		bl	VL53L0X_WrByte
 1689              	.LVL252:
 1690 0032 2043     		orrs	r0, r0, r4
 1691 0034 44B2     		sxtb	r4, r0
 1692              	.LVL253:
1099:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1693              		.loc 1 1099 0
 1694 0036 5A46     		mov	r2, fp
 1695 0038 FF21     		movs	r1, #255
 1696 003a 2846     		mov	r0, r5
 1697 003c FFF7FEFF 		bl	VL53L0X_WrByte
 1698              	.LVL254:
 1699 0040 2043     		orrs	r0, r0, r4
 1700 0042 44B2     		sxtb	r4, r0
 1701              	.LVL255:
1100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1101:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (read_not_write) {
 1702              		.loc 1 1101 0
 1703 0044 B8F1000F 		cmp	r8, #0
 1704 0048 11D0     		beq	.L134
1102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 1705              		.loc 1 1102 0
 1706 004a 37B1     		cbz	r7, .L135
1103:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xCB, pVhvSettings);
 1707              		.loc 1 1103 0
 1708 004c 0C9A     		ldr	r2, [sp, #48]
 1709 004e CB21     		movs	r1, #203
 1710 0050 2846     		mov	r0, r5
 1711 0052 FFF7FEFF 		bl	VL53L0X_RdByte
 1712              	.LVL256:
 1713 0056 2043     		orrs	r0, r0, r4
 1714 0058 44B2     		sxtb	r4, r0
 1715              	.LVL257:
 1716              	.L135:
1104:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1717              		.loc 1 1104 0
 1718 005a CEB1     		cbz	r6, .L136
1105:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xEE, &PhaseCalint);
 1719              		.loc 1 1105 0
ARM GAS  /tmp/cczWh4GR.s 			page 51


 1720 005c 0DF10702 		add	r2, sp, #7
 1721 0060 EE21     		movs	r1, #238
 1722 0062 2846     		mov	r0, r5
 1723 0064 FFF7FEFF 		bl	VL53L0X_RdByte
 1724              	.LVL258:
 1725 0068 2043     		orrs	r0, r0, r4
 1726 006a 44B2     		sxtb	r4, r0
 1727              	.LVL259:
 1728 006c 10E0     		b	.L136
 1729              	.L134:
1106:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
1107:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 1730              		.loc 1 1107 0
 1731 006e 37B1     		cbz	r7, .L137
1108:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 1732              		.loc 1 1108 0
 1733 0070 5246     		mov	r2, r10
 1734 0072 CB21     		movs	r1, #203
 1735 0074 2846     		mov	r0, r5
 1736 0076 FFF7FEFF 		bl	VL53L0X_WrByte
 1737              	.LVL260:
 1738 007a 2043     		orrs	r0, r0, r4
 1739 007c 44B2     		sxtb	r4, r0
 1740              	.LVL261:
 1741              	.L137:
1109:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1742              		.loc 1 1109 0
 1743 007e 3EB1     		cbz	r6, .L136
1110:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 1744              		.loc 1 1110 0
 1745 0080 4B46     		mov	r3, r9
 1746 0082 8022     		movs	r2, #128
 1747 0084 EE21     		movs	r1, #238
 1748 0086 2846     		mov	r0, r5
 1749 0088 FFF7FEFF 		bl	VL53L0X_UpdateByte
 1750              	.LVL262:
 1751 008c 2043     		orrs	r0, r0, r4
 1752 008e 44B2     		sxtb	r4, r0
 1753              	.LVL263:
 1754              	.L136:
1111:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1112:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1113:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1755              		.loc 1 1113 0
 1756 0090 0122     		movs	r2, #1
 1757 0092 FF21     		movs	r1, #255
 1758 0094 2846     		mov	r0, r5
 1759 0096 FFF7FEFF 		bl	VL53L0X_WrByte
 1760              	.LVL264:
 1761 009a 2043     		orrs	r0, r0, r4
 1762 009c 44B2     		sxtb	r4, r0
 1763              	.LVL265:
1114:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x01);
 1764              		.loc 1 1114 0
 1765 009e 0122     		movs	r2, #1
 1766 00a0 0021     		movs	r1, #0
 1767 00a2 2846     		mov	r0, r5
ARM GAS  /tmp/cczWh4GR.s 			page 52


 1768 00a4 FFF7FEFF 		bl	VL53L0X_WrByte
 1769              	.LVL266:
 1770 00a8 2043     		orrs	r0, r0, r4
 1771 00aa 44B2     		sxtb	r4, r0
 1772              	.LVL267:
1115:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1773              		.loc 1 1115 0
 1774 00ac 0022     		movs	r2, #0
 1775 00ae FF21     		movs	r1, #255
 1776 00b0 2846     		mov	r0, r5
 1777 00b2 FFF7FEFF 		bl	VL53L0X_WrByte
 1778              	.LVL268:
 1779 00b6 2043     		orrs	r0, r0, r4
 1780              	.LVL269:
1116:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1117:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*pPhaseCal = (uint8_t)(PhaseCalint&0xEF);
 1781              		.loc 1 1117 0
 1782 00b8 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1783 00bc 03F0EF03 		and	r3, r3, #239
 1784 00c0 0D9A     		ldr	r2, [sp, #52]
 1785 00c2 1370     		strb	r3, [r2]
1118:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1120:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1786              		.loc 1 1120 0
 1787 00c4 40B2     		sxtb	r0, r0
 1788 00c6 03B0     		add	sp, sp, #12
 1789              	.LCFI34:
 1790              		.cfi_def_cfa_offset 36
 1791              		@ sp needed
 1792 00c8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1793              		.cfi_endproc
 1794              	.LFE130:
 1796              		.section	.text.VL53L0X_perform_vhv_calibration,"ax",%progbits
 1797              		.align	2
 1798              		.global	VL53L0X_perform_vhv_calibration
 1799              		.thumb
 1800              		.thumb_func
 1802              	VL53L0X_perform_vhv_calibration:
 1803              	.LFB131:
1121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1122:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1123:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_vhv_calibration(VL53L0X_DEV Dev,
1124:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, const uint8_t get_data_enable,
1125:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1126:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1804              		.loc 1 1126 0
 1805              		.cfi_startproc
 1806              		@ args = 0, pretend = 0, frame = 8
 1807              		@ frame_needed = 0, uses_anonymous_args = 0
 1808              	.LVL270:
 1809 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1810              	.LCFI35:
 1811              		.cfi_def_cfa_offset 24
 1812              		.cfi_offset 4, -24
 1813              		.cfi_offset 5, -20
 1814              		.cfi_offset 6, -16
ARM GAS  /tmp/cczWh4GR.s 			page 53


 1815              		.cfi_offset 7, -12
 1816              		.cfi_offset 8, -8
 1817              		.cfi_offset 14, -4
 1818 0004 86B0     		sub	sp, sp, #24
 1819              	.LCFI36:
 1820              		.cfi_def_cfa_offset 48
 1821 0006 0446     		mov	r4, r0
 1822 0008 0D46     		mov	r5, r1
 1823 000a 1746     		mov	r7, r2
 1824              	.LVL271:
1127:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1129:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1130:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1131:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalInt = 0;
 1825              		.loc 1 1131 0
 1826 000c 0022     		movs	r2, #0
 1827              	.LVL272:
 1828 000e 8DF81720 		strb	r2, [sp, #23]
1132:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1133:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1134:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1135:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1136:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1137:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (restore_config)
 1829              		.loc 1 1137 0
 1830 0012 1E46     		mov	r6, r3
 1831 0014 13B1     		cbz	r3, .L145
1138:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1832              		.loc 1 1138 0
 1833 0016 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 1834              	.LVL273:
 1835 001a 01E0     		b	.L140
 1836              	.LVL274:
 1837              	.L145:
1128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 1838              		.loc 1 1128 0
 1839 001c 4FF00008 		mov	r8, #0
 1840              	.LVL275:
 1841              	.L140:
1139:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1140:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Run VHV */
1141:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x01);
 1842              		.loc 1 1141 0
 1843 0020 0122     		movs	r2, #1
 1844 0022 1146     		mov	r1, r2
 1845              	.LVL276:
 1846 0024 2046     		mov	r0, r4
 1847              	.LVL277:
 1848 0026 FFF7FEFF 		bl	VL53L0X_WrByte
 1849              	.LVL278:
1142:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1143:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1850              		.loc 1 1143 0
 1851 002a 0346     		mov	r3, r0
 1852 002c 20B9     		cbnz	r0, .L141
1144:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x40);
ARM GAS  /tmp/cczWh4GR.s 			page 54


 1853              		.loc 1 1144 0
 1854 002e 4021     		movs	r1, #64
 1855 0030 2046     		mov	r0, r4
 1856              	.LVL279:
 1857 0032 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 1858              	.LVL280:
 1859 0036 0346     		mov	r3, r0
 1860              	.LVL281:
 1861              	.L141:
1145:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1147:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 1862              		.loc 1 1147 0
 1863 0038 7BB9     		cbnz	r3, .L142
 1864              		.loc 1 1147 0 is_stmt 0 discriminator 1
 1865 003a 012F     		cmp	r7, #1
 1866 003c 0DD1     		bne	.L142
1148:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 1867              		.loc 1 1148 0 is_stmt 1
 1868 003e 0022     		movs	r2, #0
 1869 0040 0392     		str	r2, [sp, #12]
 1870 0042 0121     		movs	r1, #1
 1871 0044 0291     		str	r1, [sp, #8]
 1872 0046 0DF11703 		add	r3, sp, #23
 1873              	.LVL282:
 1874 004a 0193     		str	r3, [sp, #4]
 1875 004c 0095     		str	r5, [sp]
 1876 004e 1346     		mov	r3, r2
 1877 0050 2046     		mov	r0, r4
 1878 0052 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 1879              	.LVL283:
 1880 0056 0346     		mov	r3, r0
 1881              	.LVL284:
 1882 0058 01E0     		b	.L143
 1883              	.L142:
1149:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1150:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			pVhvSettings, &PhaseCalInt,
1151:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			1, 0);
1152:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else
1153:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pVhvSettings = 0;
 1884              		.loc 1 1153 0
 1885 005a 0022     		movs	r2, #0
 1886 005c 2A70     		strb	r2, [r5]
 1887              	.L143:
1154:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1155:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1156:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 1888              		.loc 1 1156 0
 1889 005e 4BB9     		cbnz	r3, .L144
 1890              		.loc 1 1156 0 is_stmt 0 discriminator 1
 1891 0060 46B1     		cbz	r6, .L144
1157:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1158:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 1892              		.loc 1 1158 0 is_stmt 1
 1893 0062 4246     		mov	r2, r8
 1894 0064 0121     		movs	r1, #1
 1895 0066 2046     		mov	r0, r4
ARM GAS  /tmp/cczWh4GR.s 			page 55


 1896 0068 FFF7FEFF 		bl	VL53L0X_WrByte
 1897              	.LVL285:
1159:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1160:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 1898              		.loc 1 1160 0
 1899 006c 0346     		mov	r3, r0
 1900 006e 08B9     		cbnz	r0, .L144
1161:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1901              		.loc 1 1161 0
 1902 0070 84F83081 		strb	r8, [r4, #304]
 1903              	.LVL286:
 1904              	.L144:
1162:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1163:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1164:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1165:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1905              		.loc 1 1166 0
 1906 0074 1846     		mov	r0, r3
 1907 0076 06B0     		add	sp, sp, #24
 1908              	.LCFI37:
 1909              		.cfi_def_cfa_offset 24
 1910              		@ sp needed
 1911 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1912              		.cfi_endproc
 1913              	.LFE131:
 1915              		.section	.text.VL53L0X_perform_phase_calibration,"ax",%progbits
 1916              		.align	2
 1917              		.global	VL53L0X_perform_phase_calibration
 1918              		.thumb
 1919              		.thumb_func
 1921              	VL53L0X_perform_phase_calibration:
 1922              	.LFB132:
1167:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1168:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_phase_calibration(VL53L0X_DEV Dev,
1169:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pPhaseCal, const uint8_t get_data_enable,
1170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1171:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1923              		.loc 1 1171 0
 1924              		.cfi_startproc
 1925              		@ args = 0, pretend = 0, frame = 8
 1926              		@ frame_needed = 0, uses_anonymous_args = 0
 1927              	.LVL287:
 1928 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1929              	.LCFI38:
 1930              		.cfi_def_cfa_offset 24
 1931              		.cfi_offset 4, -24
 1932              		.cfi_offset 5, -20
 1933              		.cfi_offset 6, -16
 1934              		.cfi_offset 7, -12
 1935              		.cfi_offset 8, -8
 1936              		.cfi_offset 14, -4
 1937 0004 86B0     		sub	sp, sp, #24
 1938              	.LCFI39:
 1939              		.cfi_def_cfa_offset 48
 1940 0006 0446     		mov	r4, r0
 1941 0008 0D46     		mov	r5, r1
ARM GAS  /tmp/cczWh4GR.s 			page 56


 1942 000a 1746     		mov	r7, r2
 1943              	.LVL288:
1172:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1174:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1175:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1176:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettingsint;
1177:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1178:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1179:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1180:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1181:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1182:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (restore_config)
 1944              		.loc 1 1182 0
 1945 000c 1E46     		mov	r6, r3
 1946 000e 13B1     		cbz	r3, .L153
1183:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1947              		.loc 1 1183 0
 1948 0010 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 1949              	.LVL289:
 1950 0014 01E0     		b	.L148
 1951              	.LVL290:
 1952              	.L153:
1173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 1953              		.loc 1 1173 0
 1954 0016 4FF00008 		mov	r8, #0
 1955              	.LVL291:
 1956              	.L148:
1184:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1185:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Run PhaseCal */
1186:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x02);
 1957              		.loc 1 1186 0
 1958 001a 0222     		movs	r2, #2
 1959              	.LVL292:
 1960 001c 0121     		movs	r1, #1
 1961              	.LVL293:
 1962 001e 2046     		mov	r0, r4
 1963              	.LVL294:
 1964 0020 FFF7FEFF 		bl	VL53L0X_WrByte
 1965              	.LVL295:
1187:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1188:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1966              		.loc 1 1188 0
 1967 0024 0346     		mov	r3, r0
 1968 0026 20B9     		cbnz	r0, .L149
1189:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x0);
 1969              		.loc 1 1189 0
 1970 0028 0021     		movs	r1, #0
 1971 002a 2046     		mov	r0, r4
 1972              	.LVL296:
 1973 002c FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 1974              	.LVL297:
 1975 0030 0346     		mov	r3, r0
 1976              	.LVL298:
 1977              	.L149:
1190:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1191:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read PhaseCal from device */
ARM GAS  /tmp/cczWh4GR.s 			page 57


1192:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 1978              		.loc 1 1192 0
 1979 0032 7BB9     		cbnz	r3, .L150
 1980              		.loc 1 1192 0 is_stmt 0 discriminator 1
 1981 0034 012F     		cmp	r7, #1
 1982 0036 0DD1     		bne	.L150
1193:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 1983              		.loc 1 1193 0 is_stmt 1
 1984 0038 0121     		movs	r1, #1
 1985 003a 0391     		str	r1, [sp, #12]
 1986 003c 0022     		movs	r2, #0
 1987 003e 0292     		str	r2, [sp, #8]
 1988 0040 0195     		str	r5, [sp, #4]
 1989 0042 0DF11703 		add	r3, sp, #23
 1990              	.LVL299:
 1991 0046 0093     		str	r3, [sp]
 1992 0048 1346     		mov	r3, r2
 1993 004a 2046     		mov	r0, r4
 1994 004c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 1995              	.LVL300:
 1996 0050 0346     		mov	r3, r0
 1997              	.LVL301:
 1998 0052 01E0     		b	.L151
 1999              	.L150:
1194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&VhvSettingsint, pPhaseCal,
1196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			0, 1);
1197:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else
1198:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pPhaseCal = 0;
 2000              		.loc 1 1198 0
 2001 0054 0022     		movs	r2, #0
 2002 0056 2A70     		strb	r2, [r5]
 2003              	.L151:
1199:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1200:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1201:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 2004              		.loc 1 1201 0
 2005 0058 4BB9     		cbnz	r3, .L152
 2006              		.loc 1 1201 0 is_stmt 0 discriminator 1
 2007 005a 46B1     		cbz	r6, .L152
1202:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1203:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 2008              		.loc 1 1203 0 is_stmt 1
 2009 005c 4246     		mov	r2, r8
 2010 005e 0121     		movs	r1, #1
 2011 0060 2046     		mov	r0, r4
 2012 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 2013              	.LVL302:
1204:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1205:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 2014              		.loc 1 1205 0
 2015 0066 0346     		mov	r3, r0
 2016 0068 08B9     		cbnz	r0, .L152
1206:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2017              		.loc 1 1206 0
 2018 006a 84F83081 		strb	r8, [r4, #304]
 2019              	.LVL303:
ARM GAS  /tmp/cczWh4GR.s 			page 58


 2020              	.L152:
1207:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1208:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1209:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1210:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1211:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2021              		.loc 1 1211 0
 2022 006e 1846     		mov	r0, r3
 2023 0070 06B0     		add	sp, sp, #24
 2024              	.LCFI40:
 2025              		.cfi_def_cfa_offset 24
 2026              		@ sp needed
 2027 0072 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2028              		.cfi_endproc
 2029              	.LFE132:
 2031 0076 00BF     		.section	.text.VL53L0X_perform_ref_calibration,"ax",%progbits
 2032              		.align	2
 2033              		.global	VL53L0X_perform_ref_calibration
 2034              		.thumb
 2035              		.thumb_func
 2037              	VL53L0X_perform_ref_calibration:
 2038              	.LFB133:
1212:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1213:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_calibration(VL53L0X_DEV Dev,
1214:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal, uint8_t get_data_enable)
1215:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2039              		.loc 1 1215 0
 2040              		.cfi_startproc
 2041              		@ args = 0, pretend = 0, frame = 0
 2042              		@ frame_needed = 0, uses_anonymous_args = 0
 2043              	.LVL304:
 2044 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2045              	.LCFI41:
 2046              		.cfi_def_cfa_offset 24
 2047              		.cfi_offset 3, -24
 2048              		.cfi_offset 4, -20
 2049              		.cfi_offset 5, -16
 2050              		.cfi_offset 6, -12
 2051              		.cfi_offset 7, -8
 2052              		.cfi_offset 14, -4
 2053 0002 0446     		mov	r4, r0
 2054 0004 1746     		mov	r7, r2
 2055 0006 1D46     		mov	r5, r3
 2056              	.LVL305:
1216:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1217:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1218:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1219:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1220:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1221:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1222:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1223:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2057              		.loc 1 1223 0
 2058 0008 90F83061 		ldrb	r6, [r0, #304]	@ zero_extendqisi2
 2059              	.LVL306:
1224:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1225:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* In the following function we don't save the config to optimize
ARM GAS  /tmp/cczWh4GR.s 			page 59


1226:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * writes on device. Config is saved and restored only once. */
1227:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_perform_vhv_calibration(
 2060              		.loc 1 1227 0
 2061 000c 0023     		movs	r3, #0
 2062              	.LVL307:
 2063 000e 2A46     		mov	r2, r5
 2064              	.LVL308:
 2065 0010 FFF7FEFF 		bl	VL53L0X_perform_vhv_calibration
 2066              	.LVL309:
1228:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Dev, pVhvSettings, get_data_enable, 0);
1229:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1230:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1231:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2067              		.loc 1 1231 0
 2068 0014 0346     		mov	r3, r0
 2069 0016 30B9     		cbnz	r0, .L156
1232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2070              		.loc 1 1232 0
 2071 0018 0023     		movs	r3, #0
 2072 001a 2A46     		mov	r2, r5
 2073 001c 3946     		mov	r1, r7
 2074 001e 2046     		mov	r0, r4
 2075              	.LVL310:
 2076 0020 FFF7FEFF 		bl	VL53L0X_perform_phase_calibration
 2077              	.LVL311:
 2078 0024 0346     		mov	r3, r0
 2079              	.LVL312:
 2080              	.L156:
1233:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Dev, pPhaseCal, get_data_enable, 0);
1234:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1235:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1236:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2081              		.loc 1 1236 0
 2082 0026 43B9     		cbnz	r3, .L157
1237:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1238:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 2083              		.loc 1 1238 0
 2084 0028 3246     		mov	r2, r6
 2085 002a 0121     		movs	r1, #1
 2086 002c 2046     		mov	r0, r4
 2087 002e FFF7FEFF 		bl	VL53L0X_WrByte
 2088              	.LVL313:
1239:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1240:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 2089              		.loc 1 1240 0
 2090 0032 0346     		mov	r3, r0
 2091 0034 08B9     		cbnz	r0, .L157
1241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2092              		.loc 1 1241 0
 2093 0036 84F83061 		strb	r6, [r4, #304]
 2094              	.LVL314:
 2095              	.L157:
1242:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1243:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1244:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1245:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1246:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
ARM GAS  /tmp/cczWh4GR.s 			page 60


 2096              		.loc 1 1246 0
 2097 003a 1846     		mov	r0, r3
 2098 003c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2099              		.cfi_endproc
 2100              	.LFE133:
 2102 003e 00BF     		.section	.text.VL53L0X_perform_ref_spad_management,"ax",%progbits
 2103              		.align	2
 2104              		.global	VL53L0X_perform_ref_spad_management
 2105              		.thumb
 2106              		.thumb_func
 2108              	VL53L0X_perform_ref_spad_management:
 2109              	.LFB126:
 679:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2110              		.loc 1 679 0
 2111              		.cfi_startproc
 2112              		@ args = 0, pretend = 0, frame = 56
 2113              		@ frame_needed = 0, uses_anonymous_args = 0
 2114              	.LVL315:
 2115 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2116              	.LCFI42:
 2117              		.cfi_def_cfa_offset 36
 2118              		.cfi_offset 4, -36
 2119              		.cfi_offset 5, -32
 2120              		.cfi_offset 6, -28
 2121              		.cfi_offset 7, -24
 2122              		.cfi_offset 8, -20
 2123              		.cfi_offset 9, -16
 2124              		.cfi_offset 10, -12
 2125              		.cfi_offset 11, -8
 2126              		.cfi_offset 14, -4
 2127 0004 95B0     		sub	sp, sp, #84
 2128              	.LCFI43:
 2129              		.cfi_def_cfa_offset 120
 2130 0006 0446     		mov	r4, r0
 2131 0008 0C91     		str	r1, [sp, #48]
 2132 000a 0D92     		str	r2, [sp, #52]
 2133              	.LVL316:
 686:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 2134              		.loc 1 686 0
 2135 000c 0023     		movs	r3, #0
 2136 000e 1193     		str	r3, [sp, #68]
 687:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 2137              		.loc 1 687 0
 2138 0010 1093     		str	r3, [sp, #64]
 2139              	.LVL317:
 696:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2140              		.loc 1 696 0
 2141 0012 8DF83D30 		strb	r3, [sp, #61]
 697:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 2142              		.loc 1 697 0
 2143 0016 8DF83C30 		strb	r3, [sp, #60]
 2144              	.LVL318:
 724:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2145              		.loc 1 724 0
 2146 001a B0F83CA1 		ldrh	r10, [r0, #316]
 2147              	.LVL319:
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
ARM GAS  /tmp/cczWh4GR.s 			page 61


 2148              		.loc 1 734 0
 2149 001e 04E0     		b	.L160
 2150              	.LVL320:
 2151              	.L161:
 735:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2152              		.loc 1 735 0 discriminator 3
 2153 0020 E218     		adds	r2, r4, r3
 2154 0022 0021     		movs	r1, #0
 2155 0024 82F82411 		strb	r1, [r2, #292]
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2156              		.loc 1 734 0 discriminator 3
 2157 0028 0133     		adds	r3, r3, #1
 2158              	.LVL321:
 2159              	.L160:
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2160              		.loc 1 734 0 is_stmt 0 discriminator 1
 2161 002a 052B     		cmp	r3, #5
 2162 002c F8D9     		bls	.L161
 738:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2163              		.loc 1 738 0 is_stmt 1
 2164 002e 0122     		movs	r2, #1
 2165 0030 FF21     		movs	r1, #255
 2166 0032 2046     		mov	r0, r4
 2167              	.LVL322:
 2168 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2169              	.LVL323:
 740:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2170              		.loc 1 740 0
 2171 0038 0546     		mov	r5, r0
 2172 003a 28B9     		cbnz	r0, .L162
 741:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2173              		.loc 1 741 0
 2174 003c 0022     		movs	r2, #0
 2175 003e 4F21     		movs	r1, #79
 2176 0040 2046     		mov	r0, r4
 2177              	.LVL324:
 2178 0042 FFF7FEFF 		bl	VL53L0X_WrByte
 2179              	.LVL325:
 2180 0046 0546     		mov	r5, r0
 2181              	.LVL326:
 2182              	.L162:
 744:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2183              		.loc 1 744 0
 2184 0048 2DB9     		cbnz	r5, .L163
 745:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2185              		.loc 1 745 0
 2186 004a 2C22     		movs	r2, #44
 2187 004c 4E21     		movs	r1, #78
 2188 004e 2046     		mov	r0, r4
 2189 0050 FFF7FEFF 		bl	VL53L0X_WrByte
 2190              	.LVL327:
 2191 0054 0546     		mov	r5, r0
 2192              	.LVL328:
 2193              	.L163:
 748:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2194              		.loc 1 748 0
 2195 0056 2DB9     		cbnz	r5, .L164
ARM GAS  /tmp/cczWh4GR.s 			page 62


 749:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2196              		.loc 1 749 0
 2197 0058 0022     		movs	r2, #0
 2198 005a FF21     		movs	r1, #255
 2199 005c 2046     		mov	r0, r4
 2200 005e FFF7FEFF 		bl	VL53L0X_WrByte
 2201              	.LVL329:
 2202 0062 0546     		mov	r5, r0
 2203              	.LVL330:
 2204              	.L164:
 751:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2205              		.loc 1 751 0
 2206 0064 2DB9     		cbnz	r5, .L165
 752:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2207              		.loc 1 752 0
 2208 0066 B422     		movs	r2, #180
 2209 0068 B621     		movs	r1, #182
 2210 006a 2046     		mov	r0, r4
 2211 006c FFF7FEFF 		bl	VL53L0X_WrByte
 2212              	.LVL331:
 2213 0070 0546     		mov	r5, r0
 2214              	.LVL332:
 2215              	.L165:
 757:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2216              		.loc 1 757 0
 2217 0072 2DB9     		cbnz	r5, .L166
 758:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2218              		.loc 1 758 0
 2219 0074 0022     		movs	r2, #0
 2220 0076 8021     		movs	r1, #128
 2221 0078 2046     		mov	r0, r4
 2222 007a FFF7FEFF 		bl	VL53L0X_WrByte
 2223              	.LVL333:
 2224 007e 0546     		mov	r5, r0
 2225              	.LVL334:
 2226              	.L166:
 762:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 2227              		.loc 1 762 0
 2228 0080 3DB9     		cbnz	r5, .L167
 763:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2229              		.loc 1 763 0
 2230 0082 0023     		movs	r3, #0
 2231 0084 0FAA     		add	r2, sp, #60
 2232 0086 0DF13D01 		add	r1, sp, #61
 2233 008a 2046     		mov	r0, r4
 2234 008c FFF7FEFF 		bl	VL53L0X_perform_ref_calibration
 2235              	.LVL335:
 2236 0090 0546     		mov	r5, r0
 2237              	.LVL336:
 2238              	.L167:
 766:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 2239              		.loc 1 766 0
 2240 0092 9DB9     		cbnz	r5, .L168
 769:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 2241              		.loc 1 769 0
 2242 0094 0021     		movs	r1, #0
 2243 0096 14AB     		add	r3, sp, #80
ARM GAS  /tmp/cczWh4GR.s 			page 63


 2244 0098 43F80C1D 		str	r1, [r3, #-12]!
 771:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 2245              		.loc 1 771 0
 2246 009c 0493     		str	r3, [sp, #16]
 2247 009e 0323     		movs	r3, #3
 2248 00a0 0393     		str	r3, [sp, #12]
 2249 00a2 0291     		str	r1, [sp, #8]
 2250 00a4 B423     		movs	r3, #180
 2251 00a6 0193     		str	r3, [sp, #4]
 2252 00a8 0623     		movs	r3, #6
 2253 00aa 0093     		str	r3, [sp]
 2254 00ac 04F59273 		add	r3, r4, #292
 2255 00b0 04F59572 		add	r2, r4, #298
 2256 00b4 2046     		mov	r0, r4
 2257 00b6 FFF7FEFF 		bl	enable_ref_spads
 2258              	.LVL337:
 2259 00ba 0546     		mov	r5, r0
 2260              	.LVL338:
 2261              	.L168:
 782:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 2262              		.loc 1 782 0
 2263 00bc 002D     		cmp	r5, #0
 2264 00be 48D1     		bne	.L182
 783:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2265              		.loc 1 783 0
 2266 00c0 119F     		ldr	r7, [sp, #68]
 2267              	.LVL339:
 785:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 2268              		.loc 1 785 0
 2269 00c2 0DF13E01 		add	r1, sp, #62
 2270 00c6 2046     		mov	r0, r4
 2271 00c8 FFF7FEFF 		bl	perform_ref_signal_measurement
 2272              	.LVL340:
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2273              		.loc 1 787 0
 2274 00cc 0546     		mov	r5, r0
 2275 00ce 0028     		cmp	r0, #0
 2276 00d0 45D1     		bne	.L183
 788:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 2277              		.loc 1 788 0 discriminator 1
 2278 00d2 BDF83E30 		ldrh	r3, [sp, #62]
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2279              		.loc 1 787 0 discriminator 1
 2280 00d6 9A45     		cmp	r10, r3
 2281 00d8 0AD3     		bcc	.L184
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2282              		.loc 1 699 0
 2283 00da 0023     		movs	r3, #0
 2284 00dc 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2285              		.loc 1 698 0
 2286 00de 9846     		mov	r8, r3
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 2287              		.loc 1 832 0
 2288 00e0 0893     		str	r3, [sp, #32]
 2289 00e2 52E0     		b	.L169
 2290              	.LVL341:
ARM GAS  /tmp/cczWh4GR.s 			page 64


 2291              	.L171:
 793:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2292              		.loc 1 793 0 discriminator 3
 2293 00e4 E218     		adds	r2, r4, r3
 2294 00e6 0021     		movs	r1, #0
 2295 00e8 82F82411 		strb	r1, [r2, #292]
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2296              		.loc 1 792 0 discriminator 3
 2297 00ec 0133     		adds	r3, r3, #1
 2298              	.LVL342:
 2299 00ee 00E0     		b	.L170
 2300              	.LVL343:
 2301              	.L184:
 2302 00f0 0023     		movs	r3, #0
 2303              	.L170:
 2304              	.LVL344:
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2305              		.loc 1 792 0 is_stmt 0 discriminator 1
 2306 00f2 052B     		cmp	r3, #5
 2307 00f4 F6D9     		bls	.L171
 2308 00f6 00E0     		b	.L172
 2309              	.LVL345:
 2310              	.L174:
 799:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 2311              		.loc 1 799 0 is_stmt 1
 2312 00f8 0137     		adds	r7, r7, #1
 2313              	.LVL346:
 2314              	.L172:
 797:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2315              		.loc 1 797 0
 2316 00fa 07F1B400 		add	r0, r7, #180
 2317 00fe FFF7FEFF 		bl	is_aperture
 2318              	.LVL347:
 2319 0102 08B9     		cbnz	r0, .L173
 798:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2320              		.loc 1 798 0
 2321 0104 2B2F     		cmp	r7, #43
 2322 0106 F7D9     		bls	.L174
 2323              	.L173:
 2324              	.LVL348:
 804:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 2325              		.loc 1 804 0
 2326 0108 11AB     		add	r3, sp, #68
 2327 010a 0493     		str	r3, [sp, #16]
 2328 010c 0323     		movs	r3, #3
 2329 010e 0393     		str	r3, [sp, #12]
 2330 0110 0297     		str	r7, [sp, #8]
 2331 0112 B423     		movs	r3, #180
 2332 0114 0193     		str	r3, [sp, #4]
 2333 0116 0623     		movs	r3, #6
 2334 0118 0093     		str	r3, [sp]
 2335 011a 04F59273 		add	r3, r4, #292
 2336 011e 04F59572 		add	r2, r4, #298
 2337 0122 0121     		movs	r1, #1
 2338 0124 2046     		mov	r0, r4
 2339 0126 FFF7FEFF 		bl	enable_ref_spads
 2340              	.LVL349:
ARM GAS  /tmp/cczWh4GR.s 			page 65


 814:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2341              		.loc 1 814 0
 2342 012a 0546     		mov	r5, r0
 2343 012c E0B9     		cbnz	r0, .L185
 815:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 2344              		.loc 1 815 0
 2345 012e 119F     		ldr	r7, [sp, #68]
 2346              	.LVL350:
 816:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 2347              		.loc 1 816 0
 2348 0130 0DF13E01 		add	r1, sp, #62
 2349 0134 2046     		mov	r0, r4
 2350              	.LVL351:
 2351 0136 FFF7FEFF 		bl	perform_ref_signal_measurement
 2352              	.LVL352:
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2353              		.loc 1 819 0
 2354 013a 0546     		mov	r5, r0
 2355 013c D0B9     		cbnz	r0, .L186
 820:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 2356              		.loc 1 820 0 discriminator 1
 2357 013e BDF83E30 		ldrh	r3, [sp, #62]
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2358              		.loc 1 819 0 discriminator 1
 2359 0142 9A45     		cmp	r10, r3
 2360 0144 1CD3     		bcc	.L187
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2361              		.loc 1 699 0
 2362 0146 0023     		movs	r3, #0
 2363 0148 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2364              		.loc 1 698 0
 2365 014a 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2366              		.loc 1 802 0
 2367 014c 0123     		movs	r3, #1
 2368 014e 0893     		str	r3, [sp, #32]
 2369 0150 1BE0     		b	.L169
 2370              	.LVL353:
 2371              	.L182:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2372              		.loc 1 699 0
 2373 0152 0023     		movs	r3, #0
 2374 0154 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2375              		.loc 1 698 0
 2376 0156 9846     		mov	r8, r3
 2377 0158 0893     		str	r3, [sp, #32]
 2378 015a 1F46     		mov	r7, r3
 2379 015c 15E0     		b	.L169
 2380              	.LVL354:
 2381              	.L183:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2382              		.loc 1 699 0
 2383 015e 0023     		movs	r3, #0
 2384 0160 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
ARM GAS  /tmp/cczWh4GR.s 			page 66


 2385              		.loc 1 698 0
 2386 0162 9846     		mov	r8, r3
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 2387              		.loc 1 832 0
 2388 0164 0893     		str	r3, [sp, #32]
 2389 0166 10E0     		b	.L169
 2390              	.LVL355:
 2391              	.L185:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2392              		.loc 1 699 0
 2393 0168 0023     		movs	r3, #0
 2394 016a 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2395              		.loc 1 698 0
 2396 016c 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2397              		.loc 1 802 0
 2398 016e 0123     		movs	r3, #1
 2399 0170 0893     		str	r3, [sp, #32]
 2400 0172 0AE0     		b	.L169
 2401              	.L186:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2402              		.loc 1 699 0
 2403 0174 0023     		movs	r3, #0
 2404 0176 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2405              		.loc 1 698 0
 2406 0178 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2407              		.loc 1 802 0
 2408 017a 0123     		movs	r3, #1
 2409 017c 0893     		str	r3, [sp, #32]
 2410 017e 04E0     		b	.L169
 2411              	.L187:
 827:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 2412              		.loc 1 827 0
 2413 0180 0123     		movs	r3, #1
 2414 0182 0B93     		str	r3, [sp, #44]
 828:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 2415              		.loc 1 828 0
 2416 0184 4FF00308 		mov	r8, #3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2417              		.loc 1 802 0
 2418 0188 0893     		str	r3, [sp, #32]
 2419              	.LVL356:
 2420              	.L169:
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2421              		.loc 1 836 0
 2422 018a 002D     		cmp	r5, #0
 2423 018c 7BD1     		bne	.L175
 837:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 2424              		.loc 1 837 0 discriminator 1
 2425 018e BDF83E30 		ldrh	r3, [sp, #62]
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2426              		.loc 1 836 0 discriminator 1
 2427 0192 9A45     		cmp	r10, r3
 2428 0194 77D9     		bls	.L175
ARM GAS  /tmp/cczWh4GR.s 			page 67


 843:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2429              		.loc 1 843 0
 2430 0196 9DF82020 		ldrb	r2, [sp, #32]	@ zero_extendqisi2
 2431 019a 0B92     		str	r2, [sp, #44]
 2432              	.LVL357:
 846:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize);
 2433              		.loc 1 846 0
 2434 019c D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2435 01a0 1290     		str	r0, [sp, #72]	@ unaligned
 2436 01a2 B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2437 01a6 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 848:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			targetRefRate);
 2438              		.loc 1 848 0
 2439 01aa CDF828A0 		str	r10, [sp, #40]
 2440 01ae CAEB0303 		rsb	r3, r10, r3
 2441 01b2 002B     		cmp	r3, #0
 2442 01b4 B8BF     		it	lt
 2443 01b6 5B42     		rsblt	r3, r3, #0
 2444 01b8 0993     		str	r3, [sp, #36]
 2445              	.LVL358:
 844:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2446              		.loc 1 844 0
 2447 01ba 4FF00308 		mov	r8, #3
 850:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2448              		.loc 1 850 0
 2449 01be 4FF0000B 		mov	fp, #0
 2450 01c2 0797     		str	r7, [sp, #28]
 2451 01c4 5746     		mov	r7, r10
 2452              	.LVL359:
 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2453              		.loc 1 852 0
 2454 01c6 54E0     		b	.L176
 2455              	.LVL360:
 2456              	.L180:
 853:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 2457              		.loc 1 853 0
 2458 01c8 10AB     		add	r3, sp, #64
 2459 01ca 079A     		ldr	r2, [sp, #28]
 2460 01cc 0621     		movs	r1, #6
 2461 01ce 04F59570 		add	r0, r4, #298
 2462 01d2 FFF7FEFF 		bl	get_next_good_spad
 2463              	.LVL361:
 858:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 2464              		.loc 1 858 0
 2465 01d6 109E     		ldr	r6, [sp, #64]
 2466 01d8 B6F1FF3F 		cmp	r6, #-1
 2467 01dc 4DD0     		beq	.L188
 866:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads) {
 2468              		.loc 1 866 0
 2469 01de 0796     		str	r6, [sp, #28]
 2470              	.LVL362:
 2471 01e0 06F1B400 		add	r0, r6, #180
 2472 01e4 FFF7FEFF 		bl	is_aperture
 2473              	.LVL363:
 2474 01e8 089B     		ldr	r3, [sp, #32]
 2475 01ea 8342     		cmp	r3, r0
 2476 01ec 4BD1     		bne	.L175
ARM GAS  /tmp/cczWh4GR.s 			page 68


 875:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2477              		.loc 1 875 0
 2478 01ee 08F1010A 		add	r10, r8, #1
 2479              	.LVL364:
 879:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 2480              		.loc 1 879 0
 2481 01f2 04F59279 		add	r9, r4, #292
 878:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2482              		.loc 1 878 0
 2483 01f6 3246     		mov	r2, r6
 2484 01f8 0621     		movs	r1, #6
 2485 01fa 4846     		mov	r0, r9
 2486 01fc FFF7FEFF 		bl	enable_spad_bit
 2487              	.LVL365:
 882:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2488              		.loc 1 882 0
 2489 0200 0546     		mov	r5, r0
 2490 0202 30B9     		cbnz	r0, .L177
 883:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 2491              		.loc 1 883 0
 2492 0204 731C     		adds	r3, r6, #1
 2493 0206 0793     		str	r3, [sp, #28]
 2494              	.LVL366:
 886:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 2495              		.loc 1 886 0
 2496 0208 4946     		mov	r1, r9
 2497 020a 2046     		mov	r0, r4
 2498              	.LVL367:
 2499 020c FFF7FEFF 		bl	set_ref_spad_map
 2500              	.LVL368:
 2501 0210 0546     		mov	r5, r0
 2502              	.LVL369:
 2503              	.L177:
 890:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2504              		.loc 1 890 0
 2505 0212 ADBB     		cbnz	r5, .L189
 893:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 2506              		.loc 1 893 0
 2507 0214 0DF13E01 		add	r1, sp, #62
 2508 0218 2046     		mov	r0, r4
 2509 021a FFF7FEFF 		bl	perform_ref_signal_measurement
 2510              	.LVL370:
 896:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2511              		.loc 1 896 0
 2512 021e 0546     		mov	r5, r0
 2513 0220 80BB     		cbnz	r0, .L190
 899:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2514              		.loc 1 899 0
 2515 0222 BDF83E20 		ldrh	r2, [sp, #62]
 2516 0226 0A9B     		ldr	r3, [sp, #40]
 2517 0228 D31A     		subs	r3, r2, r3
 2518 022a 002B     		cmp	r3, #0
 2519 022c B8BF     		it	lt
 2520 022e 5B42     		rsblt	r3, r3, #0
 2521              	.LVL371:
 901:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 2522              		.loc 1 901 0
ARM GAS  /tmp/cczWh4GR.s 			page 69


 2523 0230 9742     		cmp	r7, r2
 2524 0232 12D2     		bcs	.L178
 906:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 2525              		.loc 1 906 0
 2526 0234 099A     		ldr	r2, [sp, #36]
 2527 0236 9A42     		cmp	r2, r3
 2528 0238 18D2     		bcs	.L191
 909:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							lastSpadArray);
 2529              		.loc 1 909 0
 2530 023a 12A9     		add	r1, sp, #72
 2531 023c 2046     		mov	r0, r4
 2532              	.LVL372:
 2533 023e FFF7FEFF 		bl	set_ref_spad_map
 2534              	.LVL373:
 2535 0242 0546     		mov	r5, r0
 2536              	.LVL374:
 911:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2537              		.loc 1 911 0
 2538 0244 1298     		ldr	r0, [sp, #72]	@ unaligned
 2539 0246 C4F82401 		str	r0, [r4, #292]	@ unaligned
 2540 024a BDF84C30 		ldrh	r3, [sp, #76]	@ unaligned
 2541 024e A4F82831 		strh	r3, [r4, #296]	@ unaligned
 2542              	.LVL375:
 915:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 2543              		.loc 1 915 0
 2544 0252 C246     		mov	r10, r8
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 2545              		.loc 1 917 0
 2546 0254 4FF0010B 		mov	fp, #1
 2547              	.LVL376:
 2548 0258 0AE0     		b	.L179
 2549              	.LVL377:
 2550              	.L178:
 921:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2551              		.loc 1 921 0
 2552 025a D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2553              	.LVL378:
 2554 025e 1290     		str	r0, [sp, #72]	@ unaligned
 2555 0260 B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2556 0264 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2557              		.loc 1 920 0
 2558 0268 0993     		str	r3, [sp, #36]
 2559 026a 01E0     		b	.L179
 2560              	.LVL379:
 2561              	.L191:
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 2562              		.loc 1 917 0
 2563 026c 4FF0010B 		mov	fp, #1
 2564              	.LVL380:
 2565              	.L179:
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2566              		.loc 1 920 0
 2567 0270 D046     		mov	r8, r10
 2568              	.LVL381:
 2569              	.L176:
 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
ARM GAS  /tmp/cczWh4GR.s 			page 70


 2570              		.loc 1 852 0
 2571 0272 BBF1000F 		cmp	fp, #0
 2572 0276 A7D0     		beq	.L180
 2573 0278 05E0     		b	.L175
 2574              	.L188:
 859:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2575              		.loc 1 859 0
 2576 027a 6FF03105 		mvn	r5, #49
 2577              	.LVL382:
 2578 027e 02E0     		b	.L175
 2579              	.LVL383:
 2580              	.L189:
 2581 0280 D046     		mov	r8, r10
 2582 0282 00E0     		b	.L175
 2583              	.LVL384:
 2584              	.L190:
 2585 0284 D046     		mov	r8, r10
 2586              	.LVL385:
 2587              	.L175:
 929:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 2588              		.loc 1 929 0
 2589 0286 7DB9     		cbnz	r5, .L181
 930:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 2590              		.loc 1 930 0
 2591 0288 0C9A     		ldr	r2, [sp, #48]
 2592 028a C2F80080 		str	r8, [r2]
 931:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2593              		.loc 1 931 0
 2594 028e 0D99     		ldr	r1, [sp, #52]
 2595 0290 9DF82C00 		ldrb	r0, [sp, #44]	@ zero_extendqisi2
 2596 0294 0870     		strb	r0, [r1]
 933:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2597              		.loc 1 933 0
 2598 0296 0123     		movs	r3, #1
 2599 0298 84F81531 		strb	r3, [r4, #277]
 934:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 2600              		.loc 1 934 0
 2601 029c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2602 029e 84F81331 		strb	r3, [r4, #275]
 936:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 2603              		.loc 1 936 0
 2604 02a2 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 2605 02a4 84F81431 		strb	r3, [r4, #276]
 2606              	.L181:
 941:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2607              		.loc 1 941 0
 2608 02a8 2846     		mov	r0, r5
 2609 02aa 15B0     		add	sp, sp, #84
 2610              	.LCFI44:
 2611              		.cfi_def_cfa_offset 36
 2612              		@ sp needed
 2613 02ac BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2614              		.cfi_endproc
 2615              	.LFE126:
 2617              		.section	.text.VL53L0X_set_ref_calibration,"ax",%progbits
 2618              		.align	2
 2619              		.global	VL53L0X_set_ref_calibration
ARM GAS  /tmp/cczWh4GR.s 			page 71


 2620              		.thumb
 2621              		.thumb_func
 2623              	VL53L0X_set_ref_calibration:
 2624              	.LFB134:
1247:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1248:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_ref_calibration(VL53L0X_DEV Dev,
1249:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t VhvSettings, uint8_t PhaseCal)
1250:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2625              		.loc 1 1250 0
 2626              		.cfi_startproc
 2627              		@ args = 0, pretend = 0, frame = 8
 2628              		@ frame_needed = 0, uses_anonymous_args = 0
 2629              	.LVL386:
 2630 0000 00B5     		push	{lr}
 2631              	.LCFI45:
 2632              		.cfi_def_cfa_offset 4
 2633              		.cfi_offset 14, -4
 2634 0002 87B0     		sub	sp, sp, #28
 2635              	.LCFI46:
 2636              		.cfi_def_cfa_offset 32
 2637              	.LVL387:
1251:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1252:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t pVhvSettings;
1253:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t pPhaseCal;
1254:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1255:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 0,
 2638              		.loc 1 1255 0
 2639 0004 0123     		movs	r3, #1
 2640 0006 0393     		str	r3, [sp, #12]
 2641 0008 0293     		str	r3, [sp, #8]
 2642 000a 0DF11603 		add	r3, sp, #22
 2643 000e 0193     		str	r3, [sp, #4]
 2644 0010 0DF11703 		add	r3, sp, #23
 2645 0014 0093     		str	r3, [sp]
 2646 0016 1346     		mov	r3, r2
 2647 0018 0A46     		mov	r2, r1
 2648              	.LVL388:
 2649 001a 0021     		movs	r1, #0
 2650              	.LVL389:
 2651 001c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2652              	.LVL390:
1256:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1257:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		&pVhvSettings, &pPhaseCal,
1258:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		1, 1);
1259:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1260:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1261:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2653              		.loc 1 1261 0
 2654 0020 07B0     		add	sp, sp, #28
 2655              	.LCFI47:
 2656              		.cfi_def_cfa_offset 4
 2657              		@ sp needed
 2658 0022 5DF804FB 		ldr	pc, [sp], #4
 2659              		.cfi_endproc
 2660              	.LFE134:
 2662 0026 00BF     		.section	.text.VL53L0X_get_ref_calibration,"ax",%progbits
 2663              		.align	2
ARM GAS  /tmp/cczWh4GR.s 			page 72


 2664              		.global	VL53L0X_get_ref_calibration
 2665              		.thumb
 2666              		.thumb_func
 2668              	VL53L0X_get_ref_calibration:
 2669              	.LFB135:
1262:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1263:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_ref_calibration(VL53L0X_DEV Dev,
1264:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t *pVhvSettings, uint8_t *pPhaseCal)
1265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2670              		.loc 1 1265 0
 2671              		.cfi_startproc
 2672              		@ args = 0, pretend = 0, frame = 0
 2673              		@ frame_needed = 0, uses_anonymous_args = 0
 2674              	.LVL391:
 2675 0000 10B5     		push	{r4, lr}
 2676              	.LCFI48:
 2677              		.cfi_def_cfa_offset 8
 2678              		.cfi_offset 4, -8
 2679              		.cfi_offset 14, -4
 2680 0002 84B0     		sub	sp, sp, #16
 2681              	.LCFI49:
 2682              		.cfi_def_cfa_offset 24
 2683              	.LVL392:
1266:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1267:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1268:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1269:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1270:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 1,
 2684              		.loc 1 1270 0
 2685 0004 0124     		movs	r4, #1
 2686 0006 0394     		str	r4, [sp, #12]
 2687 0008 0294     		str	r4, [sp, #8]
 2688 000a 0192     		str	r2, [sp, #4]
 2689 000c 0091     		str	r1, [sp]
 2690 000e 0023     		movs	r3, #0
 2691 0010 1A46     		mov	r2, r3
 2692              	.LVL393:
 2693 0012 2146     		mov	r1, r4
 2694              	.LVL394:
 2695 0014 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2696              	.LVL395:
1271:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1272:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		pVhvSettings, pPhaseCal,
1273:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		1, 1);
1274:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1275:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1276:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2697              		.loc 1 1276 0
 2698 0018 04B0     		add	sp, sp, #16
 2699              	.LCFI50:
 2700              		.cfi_def_cfa_offset 8
 2701              		@ sp needed
 2702 001a 10BD     		pop	{r4, pc}
 2703              		.cfi_endproc
 2704              	.LFE135:
 2706              		.global	refArrayQuadrants
 2707              		.section	.data.refArrayQuadrants,"aw",%progbits
ARM GAS  /tmp/cczWh4GR.s 			page 73


 2708              		.align	2
 2709              		.set	.LANCHOR0,. + 0
 2712              	refArrayQuadrants:
 2713 0000 0A000000 		.word	10
 2714 0004 05000000 		.word	5
 2715 0008 00000000 		.word	0
 2716 000c 05000000 		.word	5
 2717              		.text
 2718              	.Letext0:
 2719              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 2720              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 2721              		.file 4 "../Drivers/BSP/Components/vl53l0x/vl53l0x_types.h"
 2722              		.file 5 "../Drivers/BSP/Components/vl53l0x/vl53l0x_device.h"
 2723              		.file 6 "../Drivers/BSP/Components/vl53l0x/vl53l0x_def.h"
 2724              		.file 7 "../Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 2725              		.file 8 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2726              		.file 9 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2727              		.file 10 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 2728              		.file 11 "../Drivers/BSP/X-NUCLEO-53L0A1/vl53l0x_platform.h"
 2729              		.file 12 "../Drivers/CMSIS/Include/core_cm4.h"
 2730              		.file 13 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api.h"
 2731              		.file 14 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api_core.h"
ARM GAS  /tmp/cczWh4GR.s 			page 74


DEFINED SYMBOLS
                            *ABS*:00000000 vl53l0x_api_calibration.c
     /tmp/cczWh4GR.s:22     .text.VL53L0X_perform_xtalk_calibration:00000000 $t
     /tmp/cczWh4GR.s:27     .text.VL53L0X_perform_xtalk_calibration:00000000 VL53L0X_perform_xtalk_calibration
     /tmp/cczWh4GR.s:256    .text.VL53L0X_perform_offset_calibration:00000000 $t
     /tmp/cczWh4GR.s:261    .text.VL53L0X_perform_offset_calibration:00000000 VL53L0X_perform_offset_calibration
     /tmp/cczWh4GR.s:451    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000000 $t
     /tmp/cczWh4GR.s:456    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000000 VL53L0X_set_offset_calibration_data_micro_meter
     /tmp/cczWh4GR.s:522    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000044 $d
     /tmp/cczWh4GR.s:529    .text.VL53L0X_get_offset_calibration_data_micro_meter:00000000 $t
     /tmp/cczWh4GR.s:534    .text.VL53L0X_get_offset_calibration_data_micro_meter:00000000 VL53L0X_get_offset_calibration_data_micro_meter
     /tmp/cczWh4GR.s:600    .text.VL53L0X_apply_offset_adjustment:00000000 $t
     /tmp/cczWh4GR.s:605    .text.VL53L0X_apply_offset_adjustment:00000000 VL53L0X_apply_offset_adjustment
     /tmp/cczWh4GR.s:673    .text.get_next_good_spad:00000000 $t
     /tmp/cczWh4GR.s:678    .text.get_next_good_spad:00000000 get_next_good_spad
     /tmp/cczWh4GR.s:774    .text.is_aperture:00000000 $t
     /tmp/cczWh4GR.s:779    .text.is_aperture:00000000 is_aperture
     /tmp/cczWh4GR.s:808    .text.is_aperture:00000014 $d
     /tmp/cczWh4GR.s:813    .text.enable_spad_bit:00000000 $t
     /tmp/cczWh4GR.s:818    .text.enable_spad_bit:00000000 enable_spad_bit
     /tmp/cczWh4GR.s:867    .text.count_enabled_spads:00000000 $t
     /tmp/cczWh4GR.s:872    .text.count_enabled_spads:00000000 count_enabled_spads
     /tmp/cczWh4GR.s:1008   .text.set_ref_spad_map:00000000 $t
     /tmp/cczWh4GR.s:1013   .text.set_ref_spad_map:00000000 set_ref_spad_map
     /tmp/cczWh4GR.s:1038   .text.get_ref_spad_map:00000000 $t
     /tmp/cczWh4GR.s:1043   .text.get_ref_spad_map:00000000 get_ref_spad_map
     /tmp/cczWh4GR.s:1068   .text.enable_ref_spads:00000000 $t
     /tmp/cczWh4GR.s:1073   .text.enable_ref_spads:00000000 enable_ref_spads
     /tmp/cczWh4GR.s:1215   .text.perform_ref_signal_measurement:00000000 $t
     /tmp/cczWh4GR.s:1220   .text.perform_ref_signal_measurement:00000000 perform_ref_signal_measurement
     /tmp/cczWh4GR.s:1320   .text.VL53L0X_set_reference_spads:00000000 $t
     /tmp/cczWh4GR.s:1325   .text.VL53L0X_set_reference_spads:00000000 VL53L0X_set_reference_spads
     /tmp/cczWh4GR.s:1478   .text.VL53L0X_get_reference_spads:00000000 $t
     /tmp/cczWh4GR.s:1483   .text.VL53L0X_get_reference_spads:00000000 VL53L0X_get_reference_spads
     /tmp/cczWh4GR.s:1574   .text.VL53L0X_perform_single_ref_calibration:00000000 $t
     /tmp/cczWh4GR.s:1579   .text.VL53L0X_perform_single_ref_calibration:00000000 VL53L0X_perform_single_ref_calibration
     /tmp/cczWh4GR.s:1638   .text.VL53L0X_ref_calibration_io:00000000 $t
     /tmp/cczWh4GR.s:1643   .text.VL53L0X_ref_calibration_io:00000000 VL53L0X_ref_calibration_io
     /tmp/cczWh4GR.s:1797   .text.VL53L0X_perform_vhv_calibration:00000000 $t
     /tmp/cczWh4GR.s:1802   .text.VL53L0X_perform_vhv_calibration:00000000 VL53L0X_perform_vhv_calibration
     /tmp/cczWh4GR.s:1916   .text.VL53L0X_perform_phase_calibration:00000000 $t
     /tmp/cczWh4GR.s:1921   .text.VL53L0X_perform_phase_calibration:00000000 VL53L0X_perform_phase_calibration
     /tmp/cczWh4GR.s:2032   .text.VL53L0X_perform_ref_calibration:00000000 $t
     /tmp/cczWh4GR.s:2037   .text.VL53L0X_perform_ref_calibration:00000000 VL53L0X_perform_ref_calibration
     /tmp/cczWh4GR.s:2103   .text.VL53L0X_perform_ref_spad_management:00000000 $t
     /tmp/cczWh4GR.s:2108   .text.VL53L0X_perform_ref_spad_management:00000000 VL53L0X_perform_ref_spad_management
     /tmp/cczWh4GR.s:2618   .text.VL53L0X_set_ref_calibration:00000000 $t
     /tmp/cczWh4GR.s:2623   .text.VL53L0X_set_ref_calibration:00000000 VL53L0X_set_ref_calibration
     /tmp/cczWh4GR.s:2663   .text.VL53L0X_get_ref_calibration:00000000 $t
     /tmp/cczWh4GR.s:2668   .text.VL53L0X_get_ref_calibration:00000000 VL53L0X_get_ref_calibration
     /tmp/cczWh4GR.s:2712   .data.refArrayQuadrants:00000000 refArrayQuadrants
     /tmp/cczWh4GR.s:2708   .data.refArrayQuadrants:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
VL53L0X_SetXTalkCompensationEnable
VL53L0X_SetLimitCheckEnable
ARM GAS  /tmp/cczWh4GR.s 			page 75


VL53L0X_PerformSingleRangingMeasurement
VL53L0X_SetXTalkCompensationRateMegaCps
VL53L0X_SetOffsetCalibrationDataMicroMeter
VL53L0X_GetSequenceStepEnable
VL53L0X_SetSequenceStepEnable
VL53L0X_WrWord
VL53L0X_RdWord
VL53L0X_get_info_from_device
VL53L0X_GetOffsetCalibrationDataMicroMeter
VL53L0X_WriteMulti
VL53L0X_ReadMulti
VL53L0X_WrByte
VL53L0X_measurement_poll_for_completion
VL53L0X_ClearInterruptMask
VL53L0X_RdByte
VL53L0X_UpdateByte
