ARM GAS  /tmp/ccEduhkC.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.file	"vl53l0x_api_calibration.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.section	.text.VL53L0X_perform_xtalk_calibration,"ax",%progbits
  21              		.align	2
  22              		.global	VL53L0X_perform_xtalk_calibration
  23              		.thumb
  24              		.thumb_func
  26              	VL53L0X_perform_xtalk_calibration:
  27              	.LFB112:
  28              		.file 1 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c"
   1:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** /*******************************************************************************
   2:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  Copyright © 2016, STMicroelectronics International N.V.
   3:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  All rights reserved.
   4:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
   5:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  Redistribution and use in source and binary forms, with or without
   6:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  modification, are permitted provided that the following conditions are met:
   7:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Redistributions of source code must retain the above copyright
   8:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer.
   9:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Redistributions in binary form must reproduce the above copyright
  10:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer in the
  11:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  documentation and/or other materials provided with the distribution.
  12:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  * Neither the name of STMicroelectronics nor the
  13:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  names of its contributors may be used to endorse or promote products
  14:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  derived from this software without specific prior written permission.
  15:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  16:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  17:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  18:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
  19:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  NON-INFRINGEMENT OF INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED.
  20:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  IN NO EVENT SHALL STMICROELECTRONICS INTERNATIONAL N.V. BE LIABLE FOR ANY
  21:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  23:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  24:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  25:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  26:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c ****  ******************************************************************************/
  28:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  29:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api.h"
  30:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api_core.h"
ARM GAS  /tmp/ccEduhkC.s 			page 2


  31:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include "vl53l0x_api_calibration.h"
  32:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  33:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #ifndef __KERNEL__
  34:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #include <stdlib.h>
  35:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #endif
  36:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  37:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_START(fmt, ...) \
  38:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_START(TRACE_MODULE_API, fmt, ##__VA_ARGS__)
  39:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END(status, ...) \
  40:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END(TRACE_MODULE_API, status, ##__VA_ARGS__)
  41:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END_FMT(status, fmt, ...) \
  42:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END_FMT(TRACE_MODULE_API, status, fmt, ##__VA_ARGS__)
  43:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  44:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_0  0
  45:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_5  5
  46:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_10 10
  47:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  48:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** uint32_t refArrayQuadrants[4] = {REF_ARRAY_SPAD_10, REF_ARRAY_SPAD_5,
  49:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		REF_ARRAY_SPAD_0, REF_ARRAY_SPAD_5 };
  50:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  51:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_xtalk_calibration(VL53L0X_DEV Dev,
  52:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t XTalkCalDistance,
  53:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t *pXTalkCompensationRateMegaCps)
  54:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
  29              		.loc 1 54 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 32
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  34 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 36
  37              		.cfi_offset 4, -36
  38              		.cfi_offset 5, -32
  39              		.cfi_offset 6, -28
  40              		.cfi_offset 7, -24
  41              		.cfi_offset 8, -20
  42              		.cfi_offset 9, -16
  43              		.cfi_offset 10, -12
  44              		.cfi_offset 11, -8
  45              		.cfi_offset 14, -4
  46 0004 89B0     		sub	sp, sp, #36
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 72
  49 0006 8146     		mov	r9, r0
  50 0008 9346     		mov	fp, r2
  51              	.LVL1:
  55:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  56:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
  57:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  58:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  59:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  60:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  61:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
  62:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanSignalRate;
  63:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRange;
  64:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRtnSpads;
ARM GAS  /tmp/ccEduhkC.s 			page 3


  65:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t signalXTalkTotalPerSpad;
  66:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t xTalkStoredMeanRtnSpadsAsInt;
  67:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t xTalkCalDistanceAsInt;
  68:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t XTalkCompensationRateMegaCps;
  69:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  70:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (XTalkCalDistance <= 0)
  52              		.loc 1 70 0
  53 000a 8A46     		mov	r10, r1
  54 000c 09B1     		cbz	r1, .L13
  55:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  55              		.loc 1 55 0
  56 000e 0023     		movs	r3, #0
  57 0010 00E0     		b	.L2
  58              	.L13:
  71:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
  59              		.loc 1 71 0
  60 0012 FC23     		movs	r3, #252
  61              	.L2:
  62              	.LVL2:
  72:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  73:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the XTalk compensation */
  74:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
  63              		.loc 1 74 0
  64 0014 23B9     		cbnz	r3, .L3
  75:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
  65              		.loc 1 75 0
  66 0016 4846     		mov	r0, r9
  67              	.LVL3:
  68 0018 0021     		movs	r1, #0
  69              	.LVL4:
  70 001a FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
  71              	.LVL5:
  72 001e 0346     		mov	r3, r0
  73              	.LVL6:
  74              	.L3:
  76:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  77:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
  78:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  75              		.loc 1 78 0
  76 0020 2BB9     		cbnz	r3, .L4
  79:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
  77              		.loc 1 79 0
  78 0022 4846     		mov	r0, r9
  79 0024 0321     		movs	r1, #3
  80 0026 0022     		movs	r2, #0
  81 0028 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
  82              	.LVL7:
  83 002c 0346     		mov	r3, r0
  84              	.LVL8:
  85              	.L4:
  80:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
  81:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
  82:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  83:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
  84:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  86              		.loc 1 84 0
  87 002e EBB1     		cbz	r3, .L14
ARM GAS  /tmp/ccEduhkC.s 			page 4


  59:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  88              		.loc 1 59 0
  89 0030 0026     		movs	r6, #0
  58:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  90              		.loc 1 58 0
  91 0032 3746     		mov	r7, r6
  57:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  92              		.loc 1 57 0
  93 0034 3546     		mov	r5, r6
  56:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  94              		.loc 1 56 0
  95 0036 B046     		mov	r8, r6
  96 0038 21E0     		b	.L6
  97              	.LVL9:
  98              	.L9:
  85:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
  86:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_spads = 0;
  87:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
  88:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		total_count = 0;
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
  90:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
  99              		.loc 1 90 0
 100 003a 4846     		mov	r0, r9
 101 003c 01A9     		add	r1, sp, #4
 102 003e FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 103              	.LVL10:
  91:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
  92:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  93:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 104              		.loc 1 93 0
 105 0042 0346     		mov	r3, r0
 106 0044 C8B9     		cbnz	r0, .L7
  94:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
  95:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
  96:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
  97:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 107              		.loc 1 97 0
 108 0046 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 109 004a 62B9     		cbnz	r2, .L8
  98:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
  99:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 110              		.loc 1 99 0
 111 004c BDF80C20 		ldrh	r2, [sp, #12]
  98:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 112              		.loc 1 98 0
 113 0050 9044     		add	r8, r8, r2
 114              	.LVL11:
 115 0052 1FFA88F8 		uxth	r8, r8
 116              	.LVL12:
 100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 101:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 117              		.loc 1 101 0
 118 0056 049A     		ldr	r2, [sp, #16]
 100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 119              		.loc 1 100 0
 120 0058 1744     		add	r7, r7, r2
 121              	.LVL13:
ARM GAS  /tmp/ccEduhkC.s 			page 5


 102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 103:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 122              		.loc 1 103 0
 123 005a BDF81820 		ldrh	r2, [sp, #24]
 102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 124              		.loc 1 102 0
 125 005e 05EB1225 		add	r5, r5, r2, lsr #8
 126              	.LVL14:
 127 0062 ADB2     		uxth	r5, r5
 128              	.LVL15:
 104:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/ 256;
 105:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 129              		.loc 1 105 0
 130 0064 0136     		adds	r6, r6, #1
 131              	.LVL16:
 132              	.L8:
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 133              		.loc 1 89 0 discriminator 2
 134 0066 0134     		adds	r4, r4, #1
 135              	.LVL17:
 136 0068 E4B2     		uxtb	r4, r4
 137              	.LVL18:
 138 006a 04E0     		b	.L5
 139              	.LVL19:
 140              	.L14:
 141 006c 0024     		movs	r4, #0
 142 006e 2646     		mov	r6, r4
 143 0070 2746     		mov	r7, r4
 144 0072 2546     		mov	r5, r4
 145 0074 A046     		mov	r8, r4
 146              	.LVL20:
 147              	.L5:
  89:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 148              		.loc 1 89 0 is_stmt 0 discriminator 1
 149 0076 312C     		cmp	r4, #49
 150 0078 DFD9     		bls	.L9
 151              	.LVL21:
 152              	.L7:
 106:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 107:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 108:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 109:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* no valid values found */
 110:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 153              		.loc 1 110 0 is_stmt 1
 154 007a 06B9     		cbnz	r6, .L6
 111:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 155              		.loc 1 111 0
 156 007c FA23     		movs	r3, #250
 157              	.LVL22:
 158              	.L6:
 112:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 113:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 114:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 115:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 116:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 159              		.loc 1 116 0
 160 007e 8BBB     		cbnz	r3, .L10
ARM GAS  /tmp/ccEduhkC.s 			page 6


 117:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 118:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanSignalRate = sum_signalRate / total_count;
 161              		.loc 1 118 0
 162 0080 B7FBF6F7 		udiv	r7, r7, r6
 163              	.LVL23:
 119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 120:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			sum_ranging << 16) / total_count);
 164              		.loc 1 120 0
 165 0084 4FEA0848 		lsl	r8, r8, #16
 166              	.LVL24:
 119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 167              		.loc 1 119 0
 168 0088 B8FBF6F8 		udiv	r8, r8, r6
 169              	.LVL25:
 121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 122:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			sum_spads << 16) / total_count);
 170              		.loc 1 122 0
 171 008c 2D04     		lsls	r5, r5, #16
 172              	.LVL26:
 121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 173              		.loc 1 121 0
 174 008e B5FBF6F6 		udiv	r6, r5, r6
 175              	.LVL27:
 123:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 124:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Mean Spads to Whole Number.
 125:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Typically the calculated mean SPAD count is a whole number
 126:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * or very close to a whole
 127:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * number, therefore any truncation will not result in a
 128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * significant loss in accuracy.
 129:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Also, for a grey target at a typical distance of around
 130:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * 400mm, around 220 SPADs will
 131:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * be enabled, therefore, any truncation will result in a loss
 132:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * of accuracy of less than
 133:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * 0.5%.
 134:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 */
 135:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpadsAsInt = (xTalkStoredMeanRtnSpads +
 176              		.loc 1 135 0
 177 0092 06F50046 		add	r6, r6, #32768
 178              	.LVL28:
 136:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			0x8000) >> 16;
 137:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 138:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 139:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 140:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * is lost.*/
 141:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 xTalkCalDistanceAsInt = (XTalkCalDistance + 0x8000) >> 16;
 179              		.loc 1 141 0
 180 0096 0AF50042 		add	r2, r10, #32768
 181 009a 120C     		lsrs	r2, r2, #16
 182              	.LVL29:
 142:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 143:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (xTalkStoredMeanRtnSpadsAsInt == 0 ||
 183              		.loc 1 143 0
 184 009c 360C     		lsrs	r6, r6, #16
 185              	.LVL30:
 186 009e 0ED0     		beq	.L16
 187              		.loc 1 143 0 is_stmt 0 discriminator 1
 188 00a0 7AB1     		cbz	r2, .L17
ARM GAS  /tmp/ccEduhkC.s 			page 7


 144:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		   xTalkCalDistanceAsInt == 0 ||
 189              		.loc 1 144 0 is_stmt 1
 190 00a2 D045     		cmp	r8, r10
 191 00a4 0FD2     		bcs	.L18
 145:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		   xTalkStoredMeanRange >= XTalkCalDistance) {
 146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = 0;
 147:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 148:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Round Cal Distance to Whole Number.
 149:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			   Note that the cal distance is in mm, therefore no
 150:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			   resolution is lost.*/
 151:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			xTalkCalDistanceAsInt = (XTalkCalDistance +
 152:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				0x8000) >> 16;
 153:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 154:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Apply division by mean spad count early in the
 155:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * calculation to keep the numbers small.
 156:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * This ensures we can maintain a 32bit calculation.
 157:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * Fixed1616 / int := Fixed1616 */
 158:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad = (xTalkStoredMeanSignalRate) /
 192              		.loc 1 158 0
 193 00a6 B7FBF6F6 		udiv	r6, r7, r6
 194              	.LVL31:
 159:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				xTalkStoredMeanRtnSpadsAsInt;
 160:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 161:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Complete the calculation for total Signal XTalk per
 162:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * SPAD
 163:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * Fixed1616 * (Fixed1616 - Fixed1616/int) :=
 164:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * (2^16 * Fixed1616)
 165:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad *= ((1 << 16) -
 167:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 195              		.loc 1 167 0
 196 00aa B8FBF2F2 		udiv	r2, r8, r2
 197              	.LVL32:
 166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 198              		.loc 1 166 0
 199 00ae C2F58034 		rsb	r4, r2, #65536
 200 00b2 06FB04F4 		mul	r4, r6, r4
 201              	.LVL33:
 168:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 169:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Round from 2^16 * Fixed1616, to Fixed1616. */
 170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = (signalXTalkTotalPerSpad
 171:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 202              		.loc 1 171 0
 203 00b6 04F50044 		add	r4, r4, #32768
 204              	.LVL34:
 170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 205              		.loc 1 170 0
 206 00ba 240C     		lsrs	r4, r4, #16
 207              	.LVL35:
 208 00bc 04E0     		b	.L11
 209              	.LVL36:
 210              	.L16:
 146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 211              		.loc 1 146 0
 212 00be 0024     		movs	r4, #0
 213 00c0 02E0     		b	.L11
 214              	.L17:
ARM GAS  /tmp/ccEduhkC.s 			page 8


 215 00c2 0024     		movs	r4, #0
 216 00c4 00E0     		b	.L11
 217              	.L18:
 218 00c6 0024     		movs	r4, #0
 219              	.LVL37:
 220              	.L11:
 172:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 174:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pXTalkCompensationRateMegaCps = XTalkCompensationRateMegaCps;
 221              		.loc 1 174 0
 222 00c8 CBF80040 		str	r4, [fp]
 175:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 176:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 177:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 223              		.loc 1 177 0
 224 00cc 23B9     		cbnz	r3, .L12
 178:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationEnable(Dev, 1);
 225              		.loc 1 178 0
 226 00ce 4846     		mov	r0, r9
 227 00d0 0121     		movs	r1, #1
 228 00d2 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 229              	.LVL38:
 230 00d6 0346     		mov	r3, r0
 231              	.LVL39:
 232              	.L12:
 179:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 180:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 181:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 233              		.loc 1 181 0
 234 00d8 23B9     		cbnz	r3, .L10
 182:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 235              		.loc 1 182 0
 236 00da 4846     		mov	r0, r9
 237 00dc 2146     		mov	r1, r4
 238 00de FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationRateMegaCps
 239              	.LVL40:
 240 00e2 0346     		mov	r3, r0
 241              	.LVL41:
 242              	.L10:
 183:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					XTalkCompensationRateMegaCps);
 184:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 185:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 186:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 187:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 188:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 243              		.loc 1 188 0
 244 00e4 58B2     		sxtb	r0, r3
 245 00e6 09B0     		add	sp, sp, #36
 246              	.LCFI2:
 247              		.cfi_def_cfa_offset 36
 248              		@ sp needed
 249 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 250              		.cfi_endproc
 251              	.LFE112:
 253              		.section	.text.VL53L0X_perform_offset_calibration,"ax",%progbits
 254              		.align	2
 255              		.global	VL53L0X_perform_offset_calibration
ARM GAS  /tmp/ccEduhkC.s 			page 9


 256              		.thumb
 257              		.thumb_func
 259              	VL53L0X_perform_offset_calibration:
 260              	.LFB113:
 189:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 190:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_offset_calibration(VL53L0X_DEV Dev,
 191:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			FixPoint1616_t CalDistanceMilliMeter,
 192:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			int32_t *pOffsetMicroMeter)
 193:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 261              		.loc 1 193 0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 32
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265              	.LVL42:
 266 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 267              	.LCFI3:
 268              		.cfi_def_cfa_offset 28
 269              		.cfi_offset 4, -28
 270              		.cfi_offset 5, -24
 271              		.cfi_offset 6, -20
 272              		.cfi_offset 7, -16
 273              		.cfi_offset 8, -12
 274              		.cfi_offset 9, -8
 275              		.cfi_offset 14, -4
 276 0004 89B0     		sub	sp, sp, #36
 277              	.LCFI4:
 278              		.cfi_def_cfa_offset 64
 279 0006 0546     		mov	r5, r0
 280 0008 9046     		mov	r8, r2
 281              	.LVL43:
 194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
 196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 197:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 198:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t StoredMeanRange;
 199:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t StoredMeanRangeAsInt;
 200:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t CalDistanceAsInt_mm;
 201:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceStepEnabled;
 202:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int meas = 0;
 203:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 204:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (CalDistanceMilliMeter <= 0)
 282              		.loc 1 204 0
 283 000a 0F46     		mov	r7, r1
 284 000c 09B1     		cbz	r1, .L33
 194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 285              		.loc 1 194 0
 286 000e 0023     		movs	r3, #0
 287 0010 00E0     		b	.L21
 288              	.L33:
 205:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
 289              		.loc 1 205 0
 290 0012 FC23     		movs	r3, #252
 291              	.L21:
 292              	.LVL44:
 206:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 207:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 293              		.loc 1 207 0
ARM GAS  /tmp/ccEduhkC.s 			page 10


 294 0014 23B9     		cbnz	r3, .L22
 208:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 295              		.loc 1 208 0
 296 0016 2846     		mov	r0, r5
 297              	.LVL45:
 298 0018 0021     		movs	r1, #0
 299              	.LVL46:
 300 001a FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 301              	.LVL47:
 302 001e 0346     		mov	r3, r0
 303              	.LVL48:
 304              	.L22:
 209:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 210:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 211:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Get the value of the TCC */
 212:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 305              		.loc 1 212 0
 306 0020 33B9     		cbnz	r3, .L23
 213:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetSequenceStepEnable(Dev,
 307              		.loc 1 213 0
 308 0022 2846     		mov	r0, r5
 309 0024 0021     		movs	r1, #0
 310 0026 0DF10302 		add	r2, sp, #3
 311 002a FFF7FEFF 		bl	VL53L0X_GetSequenceStepEnable
 312              	.LVL49:
 313 002e 0346     		mov	r3, r0
 314              	.LVL50:
 315              	.L23:
 214:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 215:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 216:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 217:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the TCC */
 218:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 316              		.loc 1 218 0
 317 0030 2BB9     		cbnz	r3, .L24
 219:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetSequenceStepEnable(Dev,
 318              		.loc 1 219 0
 319 0032 2846     		mov	r0, r5
 320 0034 0021     		movs	r1, #0
 321 0036 0A46     		mov	r2, r1
 322 0038 FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 323              	.LVL51:
 324 003c 0346     		mov	r3, r0
 325              	.LVL52:
 326              	.L24:
 220:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 221:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 222:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 223:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
 224:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 327              		.loc 1 224 0
 328 003e 2BB9     		cbnz	r3, .L25
 225:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
 329              		.loc 1 225 0
 330 0040 2846     		mov	r0, r5
 331 0042 0321     		movs	r1, #3
 332 0044 0022     		movs	r2, #0
ARM GAS  /tmp/ccEduhkC.s 			page 11


 333 0046 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 334              	.LVL53:
 335 004a 0346     		mov	r3, r0
 336              	.LVL54:
 337              	.L25:
 226:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 227:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 228:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
 229:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 338              		.loc 1 229 0
 339 004c 9BB1     		cbz	r3, .L34
 196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 340              		.loc 1 196 0
 341 004e 0026     		movs	r6, #0
 195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 342              		.loc 1 195 0
 343 0050 B146     		mov	r9, r6
 344 0052 17E0     		b	.L27
 345              	.LVL55:
 346              	.L30:
 230:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 231:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		total_count = 0;
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 233:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 347              		.loc 1 233 0
 348 0054 2846     		mov	r0, r5
 349 0056 01A9     		add	r1, sp, #4
 350 0058 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 351              	.LVL56:
 234:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 235:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 236:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 352              		.loc 1 236 0
 353 005c 0346     		mov	r3, r0
 354 005e 78B9     		cbnz	r0, .L28
 237:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 238:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 239:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
 240:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 355              		.loc 1 240 0
 356 0060 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 357 0064 2AB9     		cbnz	r2, .L29
 241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 242:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 358              		.loc 1 242 0
 359 0066 BDF80C20 		ldrh	r2, [sp, #12]
 241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 360              		.loc 1 241 0
 361 006a 4A44     		add	r2, r2, r9
 362 006c 1FFA82F9 		uxth	r9, r2
 363              	.LVL57:
 243:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 364              		.loc 1 243 0
 365 0070 0136     		adds	r6, r6, #1
 366              	.LVL58:
 367              	.L29:
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
ARM GAS  /tmp/ccEduhkC.s 			page 12


 368              		.loc 1 232 0 discriminator 2
 369 0072 0134     		adds	r4, r4, #1
 370              	.LVL59:
 371 0074 02E0     		b	.L26
 372              	.LVL60:
 373              	.L34:
 374 0076 0024     		movs	r4, #0
 375 0078 2646     		mov	r6, r4
 376 007a A146     		mov	r9, r4
 377              	.LVL61:
 378              	.L26:
 232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 379              		.loc 1 232 0 is_stmt 0 discriminator 1
 380 007c 312C     		cmp	r4, #49
 381 007e E9DD     		ble	.L30
 382              	.LVL62:
 383              	.L28:
 244:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 245:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 246:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 247:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* no valid values found */
 248:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 384              		.loc 1 248 0 is_stmt 1
 385 0080 06B9     		cbnz	r6, .L27
 249:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 386              		.loc 1 249 0
 387 0082 FA23     		movs	r3, #250
 388              	.LVL63:
 389              	.L27:
 250:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 251:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 252:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 253:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 390              		.loc 1 253 0
 391 0084 C3B9     		cbnz	r3, .L31
 254:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 255:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		StoredMeanRange = (FixPoint1616_t)((uint32_t)(sum_ranging << 16)
 392              		.loc 1 255 0
 393 0086 4FEA0942 		lsl	r2, r9, #16
 394 008a B2FBF6F6 		udiv	r6, r2, r6
 395              	.LVL64:
 256:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/ total_count);
 257:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 258:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		StoredMeanRangeAsInt = (StoredMeanRange + 0x8000) >> 16;
 396              		.loc 1 258 0
 397 008e 06F50046 		add	r6, r6, #32768
 398              	.LVL65:
 259:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 260:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 261:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 262:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * is lost.*/
 263:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 CalDistanceAsInt_mm = (CalDistanceMilliMeter + 0x8000) >> 16;
 399              		.loc 1 263 0
 400 0092 07F50047 		add	r7, r7, #32768
 401              	.LVL66:
 402 0096 3F0C     		lsrs	r7, r7, #16
 403              	.LVL67:
ARM GAS  /tmp/ccEduhkC.s 			page 13


 264:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 *pOffsetMicroMeter = (CalDistanceAsInt_mm -
 404              		.loc 1 265 0
 405 0098 A7EB1646 		sub	r6, r7, r6, lsr #16
 406              	.LVL68:
 266:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 407              		.loc 1 266 0
 408 009c 4FF47A72 		mov	r2, #1000
 409 00a0 02FB06F6 		mul	r6, r2, r6
 265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 410              		.loc 1 265 0
 411 00a4 C8F80060 		str	r6, [r8]
 267:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 268:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Apply the calculated offset */
 269:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 412              		.loc 1 269 0
 413 00a8 33B9     		cbnz	r3, .L31
 270:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 414              		.loc 1 270 0
 415 00aa 6E62     		str	r6, [r5, #36]
 271:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 272:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 416              		.loc 1 272 0
 417 00ac 2846     		mov	r0, r5
 418 00ae D8F80010 		ldr	r1, [r8]
 419 00b2 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 420              	.LVL69:
 421 00b6 0346     		mov	r3, r0
 422              	.LVL70:
 423              	.L31:
 273:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 274:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 275:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 276:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 277:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 278:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Restore the TCC */
 279:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 424              		.loc 1 279 0
 425 00b8 43B9     		cbnz	r3, .L32
 280:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (SequenceStepEnabled != 0)
 426              		.loc 1 280 0
 427 00ba 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 428 00be 2AB1     		cbz	r2, .L32
 281:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetSequenceStepEnable(Dev,
 429              		.loc 1 281 0
 430 00c0 2846     		mov	r0, r5
 431 00c2 0021     		movs	r1, #0
 432 00c4 0122     		movs	r2, #1
 433 00c6 FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 434              	.LVL71:
 435 00ca 0346     		mov	r3, r0
 436              	.LVL72:
 437              	.L32:
 282:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 283:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 284:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 285:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
ARM GAS  /tmp/ccEduhkC.s 			page 14


 286:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 438              		.loc 1 286 0
 439 00cc 58B2     		sxtb	r0, r3
 440 00ce 09B0     		add	sp, sp, #36
 441              	.LCFI5:
 442              		.cfi_def_cfa_offset 28
 443              		@ sp needed
 444 00d0 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 445              		.cfi_endproc
 446              	.LFE113:
 448              		.section	.text.VL53L0X_set_offset_calibration_data_micro_meter,"ax",%progbits
 449              		.align	2
 450              		.global	VL53L0X_set_offset_calibration_data_micro_meter
 451              		.thumb
 452              		.thumb_func
 454              	VL53L0X_set_offset_calibration_data_micro_meter:
 455              	.LFB114:
 287:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 288:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 289:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 290:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		int32_t OffsetCalibrationDataMicroMeter)
 291:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 456              		.loc 1 291 0
 457              		.cfi_startproc
 458              		@ args = 0, pretend = 0, frame = 0
 459              		@ frame_needed = 0, uses_anonymous_args = 0
 460              	.LVL73:
 461 0000 08B5     		push	{r3, lr}
 462              	.LCFI6:
 463              		.cfi_def_cfa_offset 8
 464              		.cfi_offset 3, -8
 465              		.cfi_offset 14, -4
 466              	.LVL74:
 292:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 293:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t cMaxOffsetMicroMeter = 511000;
 294:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t cMinOffsetMicroMeter = -512000;
 295:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 296:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t encodedOffsetVal;
 297:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 298:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_START("");
 299:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 300:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter > cMaxOffsetMicroMeter)
 467              		.loc 1 300 0
 468 0002 104B     		ldr	r3, .L44
 469 0004 9942     		cmp	r1, r3
 470 0006 03DC     		bgt	.L41
 301:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 302:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	else if (OffsetCalibrationDataMicroMeter < cMinOffsetMicroMeter)
 471              		.loc 1 302 0
 472 0008 11F5FA2F 		cmn	r1, #512000
 473 000c 02DB     		blt	.L42
 474 000e 02E0     		b	.L38
 475              	.L41:
 301:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 476              		.loc 1 301 0
 477 0010 0C49     		ldr	r1, .L44
 478              	.LVL75:
ARM GAS  /tmp/ccEduhkC.s 			page 15


 479 0012 00E0     		b	.L38
 480              	.LVL76:
 481              	.L42:
 303:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMinOffsetMicroMeter;
 482              		.loc 1 303 0
 483 0014 0C49     		ldr	r1, .L44+4
 484              	.LVL77:
 485              	.L38:
 304:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 305:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* The offset register is 10.2 format and units are mm
 306:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * therefore conversion is applied by a division of
 307:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * 250.
 308:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 309:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter >= 0) {
 486              		.loc 1 309 0
 487 0016 0029     		cmp	r1, #0
 488 0018 06DB     		blt	.L39
 310:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 311:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 489              		.loc 1 311 0
 490 001a 0C4A     		ldr	r2, .L44+8
 491 001c 82FB0132 		smull	r3, r2, r2, r1
 492 0020 C917     		asrs	r1, r1, #31
 493              	.LVL78:
 494 0022 C1EB2212 		rsb	r2, r1, r2, asr #4
 495              	.LVL79:
 496 0026 07E0     		b	.L40
 497              	.LVL80:
 498              	.L39:
 312:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
 313:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 314:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			cOffsetRange +
 315:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 499              		.loc 1 315 0
 500 0028 084A     		ldr	r2, .L44+8
 501 002a 82FB0132 		smull	r3, r2, r2, r1
 502 002e C917     		asrs	r1, r1, #31
 503              	.LVL81:
 504 0030 C1EB2212 		rsb	r2, r1, r2, asr #4
 314:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 505              		.loc 1 314 0
 506 0034 02F58052 		add	r2, r2, #4096
 507              	.LVL82:
 508              	.L40:
 316:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 317:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 318:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrWord(Dev,
 509              		.loc 1 318 0
 510 0038 2821     		movs	r1, #40
 511 003a 92B2     		uxth	r2, r2
 512              	.LVL83:
 513 003c FFF7FEFF 		bl	VL53L0X_WrWord
 514              	.LVL84:
 319:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 320:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		encodedOffsetVal);
 321:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 322:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_END(Status);
ARM GAS  /tmp/ccEduhkC.s 			page 16


 323:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 324:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 515              		.loc 1 324 0
 516 0040 08BD     		pop	{r3, pc}
 517              	.L45:
 518 0042 00BF     		.align	2
 519              	.L44:
 520 0044 18CC0700 		.word	511000
 521 0048 0030F8FF 		.word	-512000
 522 004c D34D6210 		.word	274877907
 523              		.cfi_endproc
 524              	.LFE114:
 526              		.section	.text.VL53L0X_get_offset_calibration_data_micro_meter,"ax",%progbits
 527              		.align	2
 528              		.global	VL53L0X_get_offset_calibration_data_micro_meter
 529              		.thumb
 530              		.thumb_func
 532              	VL53L0X_get_offset_calibration_data_micro_meter:
 533              	.LFB115:
 325:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 326:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 327:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		int32_t *pOffsetCalibrationDataMicroMeter)
 328:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 534              		.loc 1 328 0
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 8
 537              		@ frame_needed = 0, uses_anonymous_args = 0
 538              	.LVL85:
 539 0000 10B5     		push	{r4, lr}
 540              	.LCFI7:
 541              		.cfi_def_cfa_offset 8
 542              		.cfi_offset 4, -8
 543              		.cfi_offset 14, -4
 544 0002 82B0     		sub	sp, sp, #8
 545              	.LCFI8:
 546              		.cfi_def_cfa_offset 16
 547 0004 0C46     		mov	r4, r1
 548              	.LVL86:
 329:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 330:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t RangeOffsetRegister;
 331:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cMaxOffset = 2047;
 332:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 333:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 334:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Note that offset has 10.2 format */
 335:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 336:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_RdWord(Dev,
 549              		.loc 1 336 0
 550 0006 2821     		movs	r1, #40
 551              	.LVL87:
 552 0008 0DF10602 		add	r2, sp, #6
 553 000c FFF7FEFF 		bl	VL53L0X_RdWord
 554              	.LVL88:
 337:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 338:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&RangeOffsetRegister);
 339:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 340:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 555              		.loc 1 340 0
ARM GAS  /tmp/ccEduhkC.s 			page 17


 556 0010 0246     		mov	r2, r0
 557 0012 88B9     		cbnz	r0, .L47
 341:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		RangeOffsetRegister = (RangeOffsetRegister & 0x0fff);
 558              		.loc 1 341 0
 559 0014 BDF80630 		ldrh	r3, [sp, #6]
 560 0018 C3F30B03 		ubfx	r3, r3, #0, #12
 561              	.LVL89:
 342:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 343:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Apply 12 bit 2's compliment conversion */
 344:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (RangeOffsetRegister > cMaxOffset)
 562              		.loc 1 344 0
 563 001c B3F5006F 		cmp	r3, #2048
 564 0020 06DB     		blt	.L48
 345:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 565              		.loc 1 345 0
 566 0022 A3F58053 		sub	r3, r3, #4096
 567              	.LVL90:
 346:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 347:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					* 250;
 568              		.loc 1 347 0
 569 0026 FA21     		movs	r1, #250
 570 0028 01FB03F3 		mul	r3, r1, r3
 571              	.LVL91:
 345:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 572              		.loc 1 345 0
 573 002c 2360     		str	r3, [r4]
 574              	.LVL92:
 575 002e 03E0     		b	.L47
 576              	.LVL93:
 577              	.L48:
 348:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		else
 349:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 350:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 578              		.loc 1 350 0
 579 0030 FA21     		movs	r1, #250
 580 0032 01FB03F3 		mul	r3, r1, r3
 581              	.LVL94:
 349:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 582              		.loc 1 349 0
 583 0036 2360     		str	r3, [r4]
 584              	.LVL95:
 585              	.L47:
 351:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 352:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 353:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 354:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 355:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 586              		.loc 1 355 0
 587 0038 1046     		mov	r0, r2
 588              	.LVL96:
 589 003a 02B0     		add	sp, sp, #8
 590              	.LCFI9:
 591              		.cfi_def_cfa_offset 8
 592              		@ sp needed
 593 003c 10BD     		pop	{r4, pc}
 594              		.cfi_endproc
 595              	.LFE115:
ARM GAS  /tmp/ccEduhkC.s 			page 18


 597 003e 00BF     		.section	.text.VL53L0X_apply_offset_adjustment,"ax",%progbits
 598              		.align	2
 599              		.global	VL53L0X_apply_offset_adjustment
 600              		.thumb
 601              		.thumb_func
 603              	VL53L0X_apply_offset_adjustment:
 604              	.LFB116:
 356:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 357:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 358:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_apply_offset_adjustment(VL53L0X_DEV Dev)
 359:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 605              		.loc 1 359 0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 8
 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609              	.LVL97:
 610 0000 30B5     		push	{r4, r5, lr}
 611              	.LCFI10:
 612              		.cfi_def_cfa_offset 12
 613              		.cfi_offset 4, -12
 614              		.cfi_offset 5, -8
 615              		.cfi_offset 14, -4
 616 0002 83B0     		sub	sp, sp, #12
 617              	.LCFI11:
 618              		.cfi_def_cfa_offset 24
 619 0004 0446     		mov	r4, r0
 620              	.LVL98:
 360:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 361:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t CorrectedOffsetMicroMeters;
 362:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t CurrentOffsetMicroMeters;
 363:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 364:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* if we run on this function we can read all the NVM info
 365:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * used by the API */
 366:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_get_info_from_device(Dev, 7);
 621              		.loc 1 366 0
 622 0006 0721     		movs	r1, #7
 623 0008 FFF7FEFF 		bl	VL53L0X_get_info_from_device
 624              	.LVL99:
 367:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 368:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read back current device offset */
 369:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 625              		.loc 1 369 0
 626 000c 0346     		mov	r3, r0
 627 000e 20B9     		cbnz	r0, .L51
 370:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 628              		.loc 1 370 0
 629 0010 2046     		mov	r0, r4
 630              	.LVL100:
 631 0012 01A9     		add	r1, sp, #4
 632 0014 FFF7FEFF 		bl	VL53L0X_GetOffsetCalibrationDataMicroMeter
 633              	.LVL101:
 634 0018 0346     		mov	r3, r0
 635              	.LVL102:
 636              	.L51:
 371:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&CurrentOffsetMicroMeters);
 372:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 373:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 19


 374:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Apply Offset Adjustment derived from 400mm measurements */
 375:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 637              		.loc 1 375 0
 638 001a 53B9     		cbnz	r3, .L52
 376:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 377:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Store initial device offset */
 378:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		PALDevDataSet(Dev, Part2PartOffsetNVMMicroMeter,
 639              		.loc 1 378 0
 640 001c 019D     		ldr	r5, [sp, #4]
 641 001e A560     		str	r5, [r4, #8]
 379:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 380:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 381:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		CorrectedOffsetMicroMeters = CurrentOffsetMicroMeters +
 382:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 642              		.loc 1 382 0
 643 0020 E368     		ldr	r3, [r4, #12]
 644              	.LVL103:
 381:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 645              		.loc 1 381 0
 646 0022 1D44     		add	r5, r5, r3
 647              	.LVL104:
 383:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 384:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 385:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 648              		.loc 1 385 0
 649 0024 2046     		mov	r0, r4
 650 0026 2946     		mov	r1, r5
 651 0028 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 652              	.LVL105:
 386:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 387:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 388:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* store current, adjusted offset */
 389:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 653              		.loc 1 389 0
 654 002c 0346     		mov	r3, r0
 655 002e 00B9     		cbnz	r0, .L52
 390:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 656              		.loc 1 390 0
 657 0030 6562     		str	r5, [r4, #36]
 658              	.LVL106:
 659              	.L52:
 391:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 392:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 393:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 394:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 395:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 396:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 660              		.loc 1 396 0
 661 0032 58B2     		sxtb	r0, r3
 662 0034 03B0     		add	sp, sp, #12
 663              	.LCFI12:
 664              		.cfi_def_cfa_offset 12
 665              		@ sp needed
 666 0036 30BD     		pop	{r4, r5, pc}
 667              		.cfi_endproc
 668              	.LFE116:
 670              		.section	.text.get_next_good_spad,"ax",%progbits
ARM GAS  /tmp/ccEduhkC.s 			page 20


 671              		.align	2
 672              		.global	get_next_good_spad
 673              		.thumb
 674              		.thumb_func
 676              	get_next_good_spad:
 677              	.LFB117:
 397:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 398:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** void get_next_good_spad(uint8_t goodSpadArray[], uint32_t size,
 399:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			uint32_t curr, int32_t *next)
 400:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 678              		.loc 1 400 0
 679              		.cfi_startproc
 680              		@ args = 0, pretend = 0, frame = 0
 681              		@ frame_needed = 0, uses_anonymous_args = 0
 682              	.LVL107:
 683 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 684              	.LCFI13:
 685              		.cfi_def_cfa_offset 20
 686              		.cfi_offset 4, -20
 687              		.cfi_offset 5, -16
 688              		.cfi_offset 6, -12
 689              		.cfi_offset 7, -8
 690              		.cfi_offset 14, -4
 691              	.LVL108:
 401:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t startIndex;
 402:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineOffset;
 403:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 404:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 405:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 406:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t dataByte;
 407:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t success = 0;
 408:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 409:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 410:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Starting with the current good spad, loop through the array to find
 411:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * the next. i.e. the next bit set in the sequence.
 412:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 413:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The coarse index is the byte index of the array and the fine index is
 414:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * the index of the bit within each byte.
 415:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 416:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 417:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*next = -1;
 692              		.loc 1 417 0
 693 0002 4FF0FF34 		mov	r4, #-1
 694 0006 1C60     		str	r4, [r3]
 418:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 419:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	startIndex = curr / cSpadsPerByte;
 695              		.loc 1 419 0
 696 0008 D708     		lsrs	r7, r2, #3
 697              	.LVL109:
 420:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	fineOffset = curr % cSpadsPerByte;
 698              		.loc 1 420 0
 699 000a 02F0070E 		and	lr, r2, #7
 700              	.LVL110:
 421:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (coarseIndex = startIndex; ((coarseIndex < size) && !success);
 701              		.loc 1 422 0
 702 000e 3D46     		mov	r5, r7
ARM GAS  /tmp/ccEduhkC.s 			page 21


 407:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 703              		.loc 1 407 0
 704 0010 0026     		movs	r6, #0
 705              		.loc 1 422 0
 706 0012 16E0     		b	.L55
 707              	.LVL111:
 708              	.L62:
 423:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 424:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 425:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 709              		.loc 1 425 0
 710 0014 445D     		ldrb	r4, [r0, r5]	@ zero_extendqisi2
 711              	.LVL112:
 426:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 427:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (coarseIndex == startIndex) {
 712              		.loc 1 427 0
 713 0016 BD42     		cmp	r5, r7
 714 0018 04D1     		bne	.L63
 428:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 429:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * spad bit before iterating */
 430:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			dataByte >>= fineOffset;
 715              		.loc 1 430 0
 716 001a 44FA0EF4 		asr	r4, r4, lr
 717              	.LVL113:
 718 001e E4B2     		uxtb	r4, r4
 719              	.LVL114:
 431:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			fineIndex = fineOffset;
 720              		.loc 1 431 0
 721 0020 7246     		mov	r2, lr
 722 0022 0BE0     		b	.L57
 723              	.LVL115:
 724              	.L63:
 424:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 725              		.loc 1 424 0
 726 0024 0022     		movs	r2, #0
 727 0026 09E0     		b	.L57
 728              	.LVL116:
 729              	.L60:
 432:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 433:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 434:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (fineIndex < cSpadsPerByte) {
 435:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 730              		.loc 1 435 0
 731 0028 14F0010F 		tst	r4, #1
 732 002c 04D0     		beq	.L58
 733              	.LVL117:
 436:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				success = 1;
 437:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 734              		.loc 1 437 0
 735 002e 02EBC502 		add	r2, r2, r5, lsl #3
 736              	.LVL118:
 737 0032 1A60     		str	r2, [r3]
 436:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				success = 1;
 738              		.loc 1 436 0
 739 0034 0126     		movs	r6, #1
 438:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 740              		.loc 1 438 0
ARM GAS  /tmp/ccEduhkC.s 			page 22


 741 0036 03E0     		b	.L59
 742              	.LVL119:
 743              	.L58:
 439:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 440:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			dataByte >>= 1;
 744              		.loc 1 440 0
 745 0038 6408     		lsrs	r4, r4, #1
 746              	.LVL120:
 441:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			fineIndex++;
 747              		.loc 1 441 0
 748 003a 0132     		adds	r2, r2, #1
 749              	.LVL121:
 750              	.L57:
 434:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 751              		.loc 1 434 0
 752 003c 072A     		cmp	r2, #7
 753 003e F3D9     		bls	.L60
 754              	.LVL122:
 755              	.L59:
 423:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 756              		.loc 1 423 0
 757 0040 0135     		adds	r5, r5, #1
 758              	.LVL123:
 759              	.L55:
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 760              		.loc 1 422 0 discriminator 1
 761 0042 8D42     		cmp	r5, r1
 762 0044 01D2     		bcs	.L54
 422:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 763              		.loc 1 422 0 is_stmt 0 discriminator 2
 764 0046 002E     		cmp	r6, #0
 765 0048 E4D0     		beq	.L62
 766              	.L54:
 767 004a F0BD     		pop	{r4, r5, r6, r7, pc}
 768              		.cfi_endproc
 769              	.LFE117:
 771              		.section	.text.is_aperture,"ax",%progbits
 772              		.align	2
 773              		.global	is_aperture
 774              		.thumb
 775              		.thumb_func
 777              	is_aperture:
 778              	.LFB118:
 442:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 443:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 444:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 445:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 446:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 447:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** uint8_t is_aperture(uint32_t spadIndex)
 448:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 779              		.loc 1 448 0 is_stmt 1
 780              		.cfi_startproc
 781              		@ args = 0, pretend = 0, frame = 0
 782              		@ frame_needed = 0, uses_anonymous_args = 0
 783              		@ link register save eliminated.
 784              	.LVL124:
 449:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
ARM GAS  /tmp/ccEduhkC.s 			page 23


 450:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function reports if a given spad index is an aperture SPAD by
 451:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * deriving the quadrant.
 452:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 453:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t quadrant;
 454:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 455:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 785              		.loc 1 455 0
 786 0000 8009     		lsrs	r0, r0, #6
 787              	.LVL125:
 456:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (refArrayQuadrants[quadrant] == REF_ARRAY_SPAD_0)
 788              		.loc 1 456 0
 789 0002 044B     		ldr	r3, .L68
 790 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
 791 0008 0BB1     		cbz	r3, .L67
 454:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 792              		.loc 1 454 0
 793 000a 0120     		movs	r0, #1
 794              	.LVL126:
 795 000c 7047     		bx	lr
 796              	.LVL127:
 797              	.L67:
 457:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		isAperture = 0;
 798              		.loc 1 457 0
 799 000e 0020     		movs	r0, #0
 800              	.LVL128:
 458:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 459:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return isAperture;
 460:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 801              		.loc 1 460 0
 802 0010 7047     		bx	lr
 803              	.L69:
 804 0012 00BF     		.align	2
 805              	.L68:
 806 0014 00000000 		.word	.LANCHOR0
 807              		.cfi_endproc
 808              	.LFE118:
 810              		.section	.text.enable_spad_bit,"ax",%progbits
 811              		.align	2
 812              		.global	enable_spad_bit
 813              		.thumb
 814              		.thumb_func
 816              	enable_spad_bit:
 817              	.LFB119:
 461:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 462:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 463:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error enable_spad_bit(uint8_t spadArray[], uint32_t size,
 464:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadIndex)
 465:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 818              		.loc 1 465 0
 819              		.cfi_startproc
 820              		@ args = 0, pretend = 0, frame = 0
 821              		@ frame_needed = 0, uses_anonymous_args = 0
 822              		@ link register save eliminated.
 823              	.LVL129:
 824 0000 10B4     		push	{r4}
 825              	.LCFI14:
 826              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccEduhkC.s 			page 24


 827              		.cfi_offset 4, -4
 828              	.LVL130:
 466:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 467:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 468:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 469:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 470:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 471:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	coarseIndex = spadIndex / cSpadsPerByte;
 829              		.loc 1 471 0
 830 0002 D408     		lsrs	r4, r2, #3
 831              	.LVL131:
 472:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	fineIndex = spadIndex % cSpadsPerByte;
 832              		.loc 1 472 0
 833 0004 02F00702 		and	r2, r2, #7
 834              	.LVL132:
 473:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (coarseIndex >= size)
 835              		.loc 1 473 0
 836 0008 8C42     		cmp	r4, r1
 837 000a 06D2     		bcs	.L72
 474:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 475:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	else
 476:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		spadArray[coarseIndex] |= (1 << fineIndex);
 838              		.loc 1 476 0
 839 000c 0123     		movs	r3, #1
 840 000e 9340     		lsls	r3, r3, r2
 841 0010 025D     		ldrb	r2, [r0, r4]	@ zero_extendqisi2
 842              	.LVL133:
 843 0012 1343     		orrs	r3, r3, r2
 844 0014 0355     		strb	r3, [r0, r4]
 466:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 845              		.loc 1 466 0
 846 0016 0020     		movs	r0, #0
 847              	.LVL134:
 848 0018 00E0     		b	.L71
 849              	.LVL135:
 850              	.L72:
 474:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 851              		.loc 1 474 0
 852 001a CE20     		movs	r0, #206
 853              	.LVL136:
 854              	.L71:
 477:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 478:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 479:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 855              		.loc 1 479 0
 856 001c 40B2     		sxtb	r0, r0
 857 001e 5DF8044B 		ldr	r4, [sp], #4
 858              	.LCFI15:
 859              		.cfi_restore 4
 860              		.cfi_def_cfa_offset 0
 861              	.LVL137:
 862 0022 7047     		bx	lr
 863              		.cfi_endproc
 864              	.LFE119:
 866              		.section	.text.count_enabled_spads,"ax",%progbits
 867              		.align	2
 868              		.global	count_enabled_spads
ARM GAS  /tmp/ccEduhkC.s 			page 25


 869              		.thumb
 870              		.thumb_func
 872              	count_enabled_spads:
 873              	.LFB120:
 480:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 481:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error count_enabled_spads(uint8_t spadArray[],
 482:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint32_t byteCount, uint32_t maxSpads,
 483:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint32_t *pTotalSpadsEnabled, uint8_t *pIsAperture)
 484:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 874              		.loc 1 484 0
 875              		.cfi_startproc
 876              		@ args = 4, pretend = 0, frame = 0
 877              		@ frame_needed = 0, uses_anonymous_args = 0
 878              	.LVL138:
 879 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 880              	.LCFI16:
 881              		.cfi_def_cfa_offset 24
 882              		.cfi_offset 4, -24
 883              		.cfi_offset 5, -20
 884              		.cfi_offset 6, -16
 885              		.cfi_offset 7, -12
 886              		.cfi_offset 8, -8
 887              		.cfi_offset 14, -4
 888 0004 069F     		ldr	r7, [sp, #24]
 889              	.LVL139:
 485:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 486:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 487:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastByte;
 488:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastBit;
 489:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t byteIndex = 0;
 490:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t bitIndex = 0;
 491:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t tempByte;
 492:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t spadTypeIdentified = 0;
 493:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 494:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* The entire array will not be used for spads, therefore the last
 495:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * byte and last bit is determined from the max spads value.
 496:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 497:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 498:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	lastByte = maxSpads / cSpadsPerByte;
 890              		.loc 1 498 0
 891 0006 4FEAD20C 		lsr	ip, r2, #3
 892              	.LVL140:
 499:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	lastBit = maxSpads % cSpadsPerByte;
 893              		.loc 1 499 0
 894 000a 02F0070E 		and	lr, r2, #7
 895              	.LVL141:
 500:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 501:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Check that the max spads value does not exceed the array bounds. */
 502:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (lastByte >= byteCount)
 896              		.loc 1 502 0
 897 000e 8C45     		cmp	ip, r1
 898 0010 02D2     		bcs	.L84
 485:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 899              		.loc 1 485 0
 900 0012 4FF00008 		mov	r8, #0
 901 0016 01E0     		b	.L75
 902              	.L84:
ARM GAS  /tmp/ccEduhkC.s 			page 26


 503:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 903              		.loc 1 503 0
 904 0018 4FF0CE08 		mov	r8, #206
 905              	.L75:
 906              	.LVL142:
 504:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 505:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*pTotalSpadsEnabled = 0;
 907              		.loc 1 505 0
 908 001c 0026     		movs	r6, #0
 909 001e 1E60     		str	r6, [r3]
 492:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 910              		.loc 1 492 0
 911 0020 3546     		mov	r5, r6
 506:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 507:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Count the bits enabled in the whole bytes */
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (byteIndex = 0; byteIndex <= (lastByte - 1); byteIndex++) {
 912              		.loc 1 508 0
 913 0022 1BE0     		b	.L76
 914              	.LVL143:
 915              	.L80:
 509:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 916              		.loc 1 509 0
 917 0024 815D     		ldrb	r1, [r0, r6]	@ zero_extendqisi2
 918              	.LVL144:
 510:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		for (bitIndex = 0; bitIndex <= cSpadsPerByte; bitIndex++) {
 919              		.loc 1 511 0
 920 0026 0022     		movs	r2, #0
 921 0028 15E0     		b	.L77
 922              	.LVL145:
 923              	.L79:
 512:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 924              		.loc 1 512 0
 925 002a 11F0010F 		tst	r1, #1
 926 002e 10D0     		beq	.L78
 513:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 927              		.loc 1 513 0
 928 0030 1C68     		ldr	r4, [r3]
 929 0032 0134     		adds	r4, r4, #1
 930 0034 1C60     		str	r4, [r3]
 514:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 515:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if (!spadTypeIdentified) {
 931              		.loc 1 515 0
 932 0036 65B9     		cbnz	r5, .L78
 516:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 933              		.loc 1 516 0
 934 0038 0124     		movs	r4, #1
 935 003a 3C70     		strb	r4, [r7]
 517:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 936              		.loc 1 517 0
 937 003c A642     		cmp	r6, r4
 938 003e 05D8     		bhi	.L85
 939              		.loc 1 517 0 is_stmt 0 discriminator 1
 940 0040 032A     		cmp	r2, #3
 941 0042 05D8     		bhi	.L86
 518:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 942              		.loc 1 518 0 is_stmt 1
ARM GAS  /tmp/ccEduhkC.s 			page 27


 943 0044 0024     		movs	r4, #0
 944 0046 3C70     		strb	r4, [r7]
 519:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 945              		.loc 1 519 0
 946 0048 0125     		movs	r5, #1
 947              	.LVL146:
 948 004a 02E0     		b	.L78
 949              	.LVL147:
 950              	.L85:
 951 004c 0125     		movs	r5, #1
 952              	.LVL148:
 953 004e 00E0     		b	.L78
 954              	.LVL149:
 955              	.L86:
 956 0050 0125     		movs	r5, #1
 957              	.LVL150:
 958              	.L78:
 520:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 521:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 522:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			tempByte >>= 1;
 959              		.loc 1 522 0 discriminator 2
 960 0052 4908     		lsrs	r1, r1, #1
 961              	.LVL151:
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 962              		.loc 1 511 0 discriminator 2
 963 0054 0132     		adds	r2, r2, #1
 964              	.LVL152:
 965              	.L77:
 511:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 966              		.loc 1 511 0 is_stmt 0 discriminator 1
 967 0056 082A     		cmp	r2, #8
 968 0058 E7D9     		bls	.L79
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 969              		.loc 1 508 0 is_stmt 1 discriminator 2
 970 005a 0136     		adds	r6, r6, #1
 971              	.LVL153:
 972              	.L76:
 508:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 973              		.loc 1 508 0 is_stmt 0 discriminator 1
 974 005c 0CF1FF32 		add	r2, ip, #-1
 975 0060 B242     		cmp	r2, r6
 976 0062 DFD2     		bcs	.L80
 523:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 524:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 525:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 526:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Count the number of bits enabled in the last byte accounting
 527:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * for the fact that not all bits in the byte may be used.
 528:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 529:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	tempByte = spadArray[lastByte];
 977              		.loc 1 529 0 is_stmt 1
 978 0064 10F80C00 		ldrb	r0, [r0, ip]	@ zero_extendqisi2
 979              	.LVL154:
 530:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (bitIndex = 0; bitIndex <= lastBit; bitIndex++) {
 980              		.loc 1 531 0
 981 0068 0022     		movs	r2, #0
 982 006a 06E0     		b	.L81
ARM GAS  /tmp/ccEduhkC.s 			page 28


 983              	.LVL155:
 984              	.L83:
 532:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 985              		.loc 1 532 0
 986 006c 10F0010F 		tst	r0, #1
 987 0070 02D0     		beq	.L82
 533:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(*pTotalSpadsEnabled)++;
 988              		.loc 1 533 0
 989 0072 1968     		ldr	r1, [r3]
 990 0074 0131     		adds	r1, r1, #1
 991 0076 1960     		str	r1, [r3]
 992              	.L82:
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 993              		.loc 1 531 0 discriminator 2
 994 0078 0132     		adds	r2, r2, #1
 995              	.LVL156:
 996              	.L81:
 531:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 997              		.loc 1 531 0 is_stmt 0 discriminator 1
 998 007a 7245     		cmp	r2, lr
 999 007c F6D9     		bls	.L83
 534:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 535:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 536:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 537:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1000              		.loc 1 537 0 is_stmt 1
 1001 007e 4FFA88F0 		sxtb	r0, r8
 1002              	.LVL157:
 1003 0082 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1004              		.cfi_endproc
 1005              	.LFE120:
 1007 0086 00BF     		.section	.text.set_ref_spad_map,"ax",%progbits
 1008              		.align	2
 1009              		.global	set_ref_spad_map
 1010              		.thumb
 1011              		.thumb_func
 1013              	set_ref_spad_map:
 1014              	.LFB121:
 538:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 539:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error set_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 540:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1015              		.loc 1 540 0
 1016              		.cfi_startproc
 1017              		@ args = 0, pretend = 0, frame = 0
 1018              		@ frame_needed = 0, uses_anonymous_args = 0
 1019              	.LVL158:
 1020 0000 08B5     		push	{r3, lr}
 1021              	.LCFI17:
 1022              		.cfi_def_cfa_offset 8
 1023              		.cfi_offset 3, -8
 1024              		.cfi_offset 14, -4
 1025 0002 0A46     		mov	r2, r1
 541:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_WriteMulti(Dev,
 1026              		.loc 1 541 0
 1027 0004 B021     		movs	r1, #176
 1028              	.LVL159:
 1029 0006 0623     		movs	r3, #6
ARM GAS  /tmp/ccEduhkC.s 			page 29


 1030 0008 FFF7FEFF 		bl	VL53L0X_WriteMulti
 1031              	.LVL160:
 542:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 543:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				refSpadArray, 6);
 544:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 545:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1032              		.loc 1 545 0
 1033 000c 08BD     		pop	{r3, pc}
 1034              		.cfi_endproc
 1035              	.LFE121:
 1037 000e 00BF     		.section	.text.get_ref_spad_map,"ax",%progbits
 1038              		.align	2
 1039              		.global	get_ref_spad_map
 1040              		.thumb
 1041              		.thumb_func
 1043              	get_ref_spad_map:
 1044              	.LFB122:
 546:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 547:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error get_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 548:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1045              		.loc 1 548 0
 1046              		.cfi_startproc
 1047              		@ args = 0, pretend = 0, frame = 0
 1048              		@ frame_needed = 0, uses_anonymous_args = 0
 1049              	.LVL161:
 1050 0000 08B5     		push	{r3, lr}
 1051              	.LCFI18:
 1052              		.cfi_def_cfa_offset 8
 1053              		.cfi_offset 3, -8
 1054              		.cfi_offset 14, -4
 1055 0002 0A46     		mov	r2, r1
 549:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ReadMulti(Dev,
 1056              		.loc 1 549 0
 1057 0004 B021     		movs	r1, #176
 1058              	.LVL162:
 1059 0006 0623     		movs	r3, #6
 1060 0008 FFF7FEFF 		bl	VL53L0X_ReadMulti
 1061              	.LVL163:
 550:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 551:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				refSpadArray,
 552:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				6);
 553:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 554:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1062              		.loc 1 554 0
 1063 000c 08BD     		pop	{r3, pc}
 1064              		.cfi_endproc
 1065              	.LFE122:
 1067 000e 00BF     		.section	.text.enable_ref_spads,"ax",%progbits
 1068              		.align	2
 1069              		.global	enable_ref_spads
 1070              		.thumb
 1071              		.thumb_func
 1073              	enable_ref_spads:
 1074              	.LFB123:
 555:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 556:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error enable_ref_spads(VL53L0X_DEV Dev,
 557:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t apertureSpads,
ARM GAS  /tmp/ccEduhkC.s 			page 30


 558:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t goodSpadArray[],
 559:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t spadArray[],
 560:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t size,
 561:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t start,
 562:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t offset,
 563:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t spadCount,
 564:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t *lastSpad)
 565:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1075              		.loc 1 565 0
 1076              		.cfi_startproc
 1077              		@ args = 20, pretend = 0, frame = 24
 1078              		@ frame_needed = 0, uses_anonymous_args = 0
 1079              	.LVL164:
 1080 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1081              	.LCFI19:
 1082              		.cfi_def_cfa_offset 36
 1083              		.cfi_offset 4, -36
 1084              		.cfi_offset 5, -32
 1085              		.cfi_offset 6, -28
 1086              		.cfi_offset 7, -24
 1087              		.cfi_offset 8, -20
 1088              		.cfi_offset 9, -16
 1089              		.cfi_offset 10, -12
 1090              		.cfi_offset 11, -8
 1091              		.cfi_offset 14, -4
 1092 0004 87B0     		sub	sp, sp, #28
 1093              	.LCFI20:
 1094              		.cfi_def_cfa_offset 64
 1095 0006 0190     		str	r0, [sp, #4]
 1096 0008 8B46     		mov	fp, r1
 1097 000a 0092     		str	r2, [sp]
 1098 000c 9846     		mov	r8, r3
 1099 000e 109E     		ldr	r6, [sp, #64]
 1100 0010 DDF844A0 		ldr	r10, [sp, #68]
 1101 0014 129F     		ldr	r7, [sp, #72]
 1102 0016 DDF84C90 		ldr	r9, [sp, #76]
 1103              	.LVL165:
 566:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 567:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 568:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t i;
 569:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = offset;
 1104              		.loc 1 569 0
 1105 001a 0597     		str	r7, [sp, #20]
 1106              	.LVL166:
 570:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpad;
 571:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t checkSpadArray[6];
 572:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 573:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 574:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function takes in a spad array which may or may not have SPADS
 575:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * already enabled and appends from a given offset a requested number
 576:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * of new SPAD enables. The 'good spad map' is applied to
 577:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * determine the next SPADs to enable.
 578:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 579:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function applies to only aperture or only non-aperture spads.
 580:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Checks are performed to ensure this.
 581:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 582:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 31


 583:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	currentSpad = offset;
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadCount; index++) {
 1107              		.loc 1 584 0
 1108 001c 0025     		movs	r5, #0
 1109 001e 16E0     		b	.L93
 1110              	.LVL167:
 1111              	.L95:
 585:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1112              		.loc 1 585 0
 1113 0020 0098     		ldr	r0, [sp]
 1114 0022 3146     		mov	r1, r6
 1115 0024 3A46     		mov	r2, r7
 1116 0026 05AB     		add	r3, sp, #20
 1117 0028 FFF7FEFF 		bl	get_next_good_spad
 1118              	.LVL168:
 586:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 587:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 588:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (nextGoodSpad == -1) {
 1119              		.loc 1 588 0
 1120 002c 059C     		ldr	r4, [sp, #20]
 1121 002e B4F1FF3F 		cmp	r4, #-1
 1122 0032 10D0     		beq	.L100
 589:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 590:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 591:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 592:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 593:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Confirm that the next good SPAD is non-aperture */
 594:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (is_aperture(start + nextGoodSpad) != apertureSpads) {
 1123              		.loc 1 594 0
 1124 0034 0AEB0400 		add	r0, r10, r4
 1125 0038 FFF7FEFF 		bl	is_aperture
 1126              	.LVL169:
 1127 003c 5845     		cmp	r0, fp
 1128 003e 0CD1     		bne	.L101
 1129              	.LVL170:
 595:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 596:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * spads from the current quadrant then this is an error
 597:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 598:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 599:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 600:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 601:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpad = (uint32_t)nextGoodSpad;
 602:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		enable_spad_bit(spadArray, size, currentSpad);
 1130              		.loc 1 602 0 discriminator 2
 1131 0040 4046     		mov	r0, r8
 1132 0042 3146     		mov	r1, r6
 1133 0044 2246     		mov	r2, r4
 1134 0046 FFF7FEFF 		bl	enable_spad_bit
 1135              	.LVL171:
 603:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpad++;
 1136              		.loc 1 603 0 discriminator 2
 1137 004a 671C     		adds	r7, r4, #1
 1138              	.LVL172:
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1139              		.loc 1 584 0 discriminator 2
 1140 004c 0135     		adds	r5, r5, #1
 1141              	.LVL173:
ARM GAS  /tmp/ccEduhkC.s 			page 32


 1142              	.L93:
 584:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1143              		.loc 1 584 0 is_stmt 0 discriminator 1
 1144 004e 4D45     		cmp	r5, r9
 1145 0050 E6D3     		bcc	.L95
 566:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 1146              		.loc 1 566 0 is_stmt 1
 1147 0052 0020     		movs	r0, #0
 1148 0054 02E0     		b	.L94
 1149              	.L100:
 589:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 1150              		.loc 1 589 0
 1151 0056 CE20     		movs	r0, #206
 1152 0058 00E0     		b	.L94
 1153              	.L101:
 598:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			break;
 1154              		.loc 1 598 0
 1155 005a CE20     		movs	r0, #206
 1156              	.L94:
 1157              	.LVL174:
 604:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 605:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*lastSpad = currentSpad;
 1158              		.loc 1 605 0
 1159 005c 149B     		ldr	r3, [sp, #80]
 1160 005e 1F60     		str	r7, [r3]
 606:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 607:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1161              		.loc 1 607 0
 1162 0060 18B9     		cbnz	r0, .L96
 608:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = set_ref_spad_map(Dev, spadArray);
 1163              		.loc 1 608 0
 1164 0062 0198     		ldr	r0, [sp, #4]
 1165              	.LVL175:
 1166 0064 4146     		mov	r1, r8
 1167 0066 FFF7FEFF 		bl	set_ref_spad_map
 1168              	.LVL176:
 1169              	.L96:
 609:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 610:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 611:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1170              		.loc 1 611 0
 1171 006a 90B9     		cbnz	r0, .L97
 612:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = get_ref_spad_map(Dev, checkSpadArray);
 1172              		.loc 1 612 0
 1173 006c 0198     		ldr	r0, [sp, #4]
 1174              	.LVL177:
 1175 006e 03A9     		add	r1, sp, #12
 1176 0070 FFF7FEFF 		bl	get_ref_spad_map
 1177              	.LVL178:
 613:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 614:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		i = 0;
 1178              		.loc 1 614 0
 1179 0074 0023     		movs	r3, #0
 615:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 616:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Compare spad maps. If not equal report error. */
 617:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (i < size) {
 1180              		.loc 1 617 0
ARM GAS  /tmp/ccEduhkC.s 			page 33


 1181 0076 08E0     		b	.L98
 1182              	.LVL179:
 1183              	.L99:
 618:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1184              		.loc 1 618 0
 1185 0078 18F80310 		ldrb	r1, [r8, r3]	@ zero_extendqisi2
 1186 007c 06AA     		add	r2, sp, #24
 1187 007e 1A44     		add	r2, r2, r3
 1188 0080 12F80C2C 		ldrb	r2, [r2, #-12]	@ zero_extendqisi2
 1189 0084 9142     		cmp	r1, r2
 1190 0086 03D1     		bne	.L102
 619:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 620:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 621:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 622:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			i++;
 1191              		.loc 1 622 0
 1192 0088 0133     		adds	r3, r3, #1
 1193              	.LVL180:
 1194              	.L98:
 617:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1195              		.loc 1 617 0
 1196 008a B342     		cmp	r3, r6
 1197 008c F4D3     		bcc	.L99
 1198 008e 00E0     		b	.L97
 1199              	.L102:
 619:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1200              		.loc 1 619 0
 1201 0090 CE20     		movs	r0, #206
 1202              	.LVL181:
 1203              	.L97:
 623:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 624:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 625:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 626:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1204              		.loc 1 626 0
 1205 0092 40B2     		sxtb	r0, r0
 1206 0094 07B0     		add	sp, sp, #28
 1207              	.LCFI21:
 1208              		.cfi_def_cfa_offset 36
 1209              	.LVL182:
 1210              		@ sp needed
 1211 0096 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1212              		.cfi_endproc
 1213              	.LFE123:
 1215 009a 00BF     		.section	.text.perform_ref_signal_measurement,"ax",%progbits
 1216              		.align	2
 1217              		.global	perform_ref_signal_measurement
 1218              		.thumb
 1219              		.thumb_func
 1221              	perform_ref_signal_measurement:
 1222              	.LFB124:
 627:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 628:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 629:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error perform_ref_signal_measurement(VL53L0X_DEV Dev,
 630:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint16_t *refSignalRate)
 631:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1223              		.loc 1 631 0
ARM GAS  /tmp/ccEduhkC.s 			page 34


 1224              		.cfi_startproc
 1225              		@ args = 0, pretend = 0, frame = 32
 1226              		@ frame_needed = 0, uses_anonymous_args = 0
 1227              	.LVL183:
 1228 0000 70B5     		push	{r4, r5, r6, lr}
 1229              	.LCFI22:
 1230              		.cfi_def_cfa_offset 16
 1231              		.cfi_offset 4, -16
 1232              		.cfi_offset 5, -12
 1233              		.cfi_offset 6, -8
 1234              		.cfi_offset 14, -4
 1235 0002 88B0     		sub	sp, sp, #32
 1236              	.LCFI23:
 1237              		.cfi_def_cfa_offset 48
 1238 0004 0446     		mov	r4, r0
 1239 0006 0E46     		mov	r6, r1
 1240              	.LVL184:
 632:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 633:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t rangingMeasurementData;
 634:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 635:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 636:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 637:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
 638:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
 639:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 640:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 641:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1241              		.loc 1 641 0
 1242 0008 90F83051 		ldrb	r5, [r0, #304]	@ zero_extendqisi2
 1243              	.LVL185:
 642:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 643:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 644:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function performs a reference signal rate measurement.
 645:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 646:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 647:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev,
 1244              		.loc 1 647 0
 1245 000c 0121     		movs	r1, #1
 1246              	.LVL186:
 1247 000e C022     		movs	r2, #192
 1248 0010 FFF7FEFF 		bl	VL53L0X_WrByte
 1249              	.LVL187:
 648:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0xC0);
 649:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 650:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1250              		.loc 1 650 0
 1251 0014 0346     		mov	r3, r0
 1252 0016 20B9     		cbnz	r0, .L105
 651:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 1253              		.loc 1 651 0
 1254 0018 2046     		mov	r0, r4
 1255              	.LVL188:
 1256 001a 01A9     		add	r1, sp, #4
 1257 001c FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 1258              	.LVL189:
 1259 0020 0346     		mov	r3, r0
 1260              	.LVL190:
ARM GAS  /tmp/ccEduhkC.s 			page 35


 1261              	.L105:
 652:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 653:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 654:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1262              		.loc 1 654 0
 1263 0022 2BB9     		cbnz	r3, .L106
 655:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1264              		.loc 1 655 0
 1265 0024 2046     		mov	r0, r4
 1266 0026 FF21     		movs	r1, #255
 1267 0028 0122     		movs	r2, #1
 1268 002a FFF7FEFF 		bl	VL53L0X_WrByte
 1269              	.LVL191:
 1270 002e 0346     		mov	r3, r0
 1271              	.LVL192:
 1272              	.L106:
 656:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 657:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1273              		.loc 1 657 0
 1274 0030 2BB9     		cbnz	r3, .L107
 658:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_RdWord(Dev,
 1275              		.loc 1 658 0
 1276 0032 2046     		mov	r0, r4
 1277 0034 B621     		movs	r1, #182
 1278 0036 3246     		mov	r2, r6
 1279 0038 FFF7FEFF 		bl	VL53L0X_RdWord
 1280              	.LVL193:
 1281 003c 0346     		mov	r3, r0
 1282              	.LVL194:
 1283              	.L107:
 659:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 660:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			refSignalRate);
 661:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 662:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1284              		.loc 1 662 0
 1285 003e 2BB9     		cbnz	r3, .L108
 663:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1286              		.loc 1 663 0
 1287 0040 2046     		mov	r0, r4
 1288 0042 FF21     		movs	r1, #255
 1289 0044 0022     		movs	r2, #0
 1290 0046 FFF7FEFF 		bl	VL53L0X_WrByte
 1291              	.LVL195:
 1292 004a 0346     		mov	r3, r0
 1293              	.LVL196:
 1294              	.L108:
 664:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 665:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1295              		.loc 1 665 0
 1296 004c 43B9     		cbnz	r3, .L109
 666:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
 667:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 1297              		.loc 1 667 0
 1298 004e 2046     		mov	r0, r4
 1299 0050 0121     		movs	r1, #1
 1300 0052 2A46     		mov	r2, r5
 1301 0054 FFF7FEFF 		bl	VL53L0X_WrByte
ARM GAS  /tmp/ccEduhkC.s 			page 36


 1302              	.LVL197:
 668:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
 669:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (status == VL53L0X_ERROR_NONE)
 1303              		.loc 1 669 0
 1304 0058 0346     		mov	r3, r0
 1305 005a 08B9     		cbnz	r0, .L109
 670:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1306              		.loc 1 670 0
 1307 005c 84F83051 		strb	r5, [r4, #304]
 1308              	.LVL198:
 1309              	.L109:
 671:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 672:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 673:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return status;
 674:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1310              		.loc 1 674 0
 1311 0060 58B2     		sxtb	r0, r3
 1312 0062 08B0     		add	sp, sp, #32
 1313              	.LCFI24:
 1314              		.cfi_def_cfa_offset 16
 1315              		@ sp needed
 1316 0064 70BD     		pop	{r4, r5, r6, pc}
 1317              		.cfi_endproc
 1318              	.LFE124:
 1320 0066 00BF     		.section	.text.VL53L0X_set_reference_spads,"ax",%progbits
 1321              		.align	2
 1322              		.global	VL53L0X_set_reference_spads
 1323              		.thumb
 1324              		.thumb_func
 1326              	VL53L0X_set_reference_spads:
 1327              	.LFB126:
 675:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 676:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_spad_management(VL53L0X_DEV Dev,
 677:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint32_t *refSpadCount,
 678:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				uint8_t *isApertureSpads)
 679:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 680:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 681:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 682:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 683:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 684:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 685:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 686:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 687:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 688:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 689:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 690:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 691:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 692:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 693:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 694:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 695:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
 696:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 697:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 700:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 37


 701:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 702:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The reference SPAD initialization procedure determines the minimum
 703:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * amount of reference spads to be enables to achieve a target reference
 704:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * signal rate and should be performed once during initialization.
 705:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 706:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Either aperture or non-aperture spads are applied but never both.
 707:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Firstly non-aperture spads are set, begining with 5 spads, and
 708:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * increased one spad at a time until the closest measurement to the
 709:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * target rate is achieved.
 710:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 711:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * If the target rate is exceeded when 5 non-aperture spads are enabled,
 712:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * initialization is performed instead with aperture spads.
 713:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 714:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * When setting spads, a 'Good Spad Map' is applied.
 715:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 *
 716:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This procedure operates within a SPAD window of interest of a maximum
 717:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * 44 spads.
 718:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The start point is currently fixed to 180, which lies towards the end
 719:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * of the non-aperture quadrant and runs in to the adjacent aperture
 720:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * quadrant.
 721:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 722:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 723:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 724:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	targetRefRate = PALDevDataGet(Dev, targetRefRate);
 725:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 726:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 727:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Initialize Spad arrays.
 728:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Currently the good spad map is initialised to 'All good'.
 729:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This is a short term implementation. The good spad map will be
 730:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * provided as an input.
 731:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * Note that there are 6 bytes. Only the first 44 bits will be used to
 732:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * represent spads.
 733:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 735:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 736:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 737:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 738:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 739:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 740:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 741:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 742:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 743:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 744:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 745:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 746:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 747:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 748:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 749:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 750:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 751:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 752:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 753:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 754:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			startSelect);
 755:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 756:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 757:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
ARM GAS  /tmp/ccEduhkC.s 			page 38


 758:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 759:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 760:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 761:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Perform ref calibration */
 762:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 763:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 764:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 765:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 766:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 767:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 768:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = 0;
 769:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 770:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 771:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 772:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 773:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 774:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 775:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize,
 776:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					startSelect,
 777:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 778:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 779:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 780:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 781:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 782:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 783:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 784:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 785:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = perform_ref_signal_measurement(Dev,
 786:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if ((Status == VL53L0X_ERROR_NONE) &&
 788:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 789:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 790:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * switch to APERTURE SPADs */
 791:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			for (index = 0; index < spadArraySize; index++)
 793:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 794:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 795:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 796:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Increment to the first APERTURE spad */
 797:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			while ((is_aperture(startSelect + currentSpadIndex)
 798:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 799:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 800:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 801:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			needAptSpads = 1;
 803:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 804:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = enable_ref_spads(Dev,
 805:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 806:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 807:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 808:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize,
 809:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					startSelect,
 810:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 811:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 812:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 813:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 814:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
ARM GAS  /tmp/ccEduhkC.s 			page 39


 815:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 816:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 817:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 818:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if ((Status == VL53L0X_ERROR_NONE) &&
 820:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 821:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 822:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * setting the minimum number of
 823:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * APERTURE spads. Can do no more
 824:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * therefore set the min number of
 825:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * aperture spads as the result.
 826:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 */
 827:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					isApertureSpads_int = 1;
 828:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 829:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 830:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 831:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} else {
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			needAptSpads = 0;
 833:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 834:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 835:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) &&
 837:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 838:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 839:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * or non-aperture spads have been set. Proceed to add
 840:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * spads and perform measurements until the target
 841:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 * reference is reached.
 842:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		 */
 843:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		isApertureSpads_int = needAptSpads;
 844:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 845:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 846:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		memcpy(lastSpadArray, Dev->Data.SpadData.RefSpadEnables,
 847:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize);
 848:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		lastSignalRateDiff = abs(peakSignalRateRef -
 849:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			targetRefRate);
 850:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		complete = 0;
 851:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while (!complete) {
 853:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 854:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 855:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize, currentSpadIndex,
 856:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&nextGoodSpad);
 857:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 858:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (nextGoodSpad == -1) {
 859:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 860:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 861:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 862:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 863:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Cannot combine Aperture and Non-Aperture spads, so
 864:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * ensure the current spad is of the correct type.
 865:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
 866:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (is_aperture((uint32_t)startSelect + nextGoodSpad) !=
 867:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads) {
 868:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* At this point we have enabled the maximum
 869:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * number of Aperture spads.
 870:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 */
 871:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				complete = 1;
ARM GAS  /tmp/ccEduhkC.s 			page 40


 872:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 873:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 874:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 875:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(refSpadCount_int)++;
 876:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 877:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			currentSpadIndex = nextGoodSpad;
 878:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 879:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 880:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 881:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 882:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 883:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 884:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 885:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * perform measurement. */
 886:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = set_ref_spad_map(Dev,
 887:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 888:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 889:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 890:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 891:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 892:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 893:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = perform_ref_signal_measurement(Dev,
 894:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 895:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 896:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 897:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 898:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 899:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			signalRateDiff = abs(peakSignalRateRef - targetRefRate);
 900:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 901:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (peakSignalRateRef > targetRefRate) {
 902:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 903:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * measurement closest to the target rate,
 904:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 * either above or below it.
 905:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 */
 906:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				if (signalRateDiff > lastSignalRateDiff) {
 907:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 908:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					 * measurement, so choose this. */
 909:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Status = set_ref_spad_map(Dev,
 910:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							lastSpadArray);
 911:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					memcpy(
 912:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 913:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					lastSpadArray, spadArraySize);
 914:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 915:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(refSpadCount_int)--;
 916:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				complete = 1;
 918:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 919:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Continue to add spads */
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				lastSignalRateDiff = signalRateDiff;
 921:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 922:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 923:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize);
 924:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 925:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 926:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		} /* while */
 927:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 928:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 41


 929:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 930:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 931:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 932:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 933:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 934:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 935:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 936:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 937:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 938:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 939:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 940:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
 941:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 942:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 943:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_reference_spads(VL53L0X_DEV Dev,
 944:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				 uint32_t count, uint8_t isApertureSpads)
 945:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1328              		.loc 1 945 0
 1329              		.cfi_startproc
 1330              		@ args = 0, pretend = 0, frame = 8
 1331              		@ frame_needed = 0, uses_anonymous_args = 0
 1332              	.LVL199:
 1333 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1334              	.LCFI25:
 1335              		.cfi_def_cfa_offset 20
 1336              		.cfi_offset 4, -20
 1337              		.cfi_offset 5, -16
 1338              		.cfi_offset 6, -12
 1339              		.cfi_offset 7, -8
 1340              		.cfi_offset 14, -4
 1341 0002 89B0     		sub	sp, sp, #36
 1342              	.LCFI26:
 1343              		.cfi_def_cfa_offset 56
 1344 0004 0546     		mov	r5, r0
 1345 0006 0F46     		mov	r7, r1
 1346 0008 1646     		mov	r6, r2
 1347              	.LVL200:
 946:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 947:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 948:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 949:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 950:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 951:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex;
 952:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t index;
 953:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 954:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/*
 955:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * This function applies a requested number of reference spads, either
 956:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * aperture or
 957:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * non-aperture, as requested.
 958:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * The good spad map will be applied.
 959:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
 960:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 961:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1348              		.loc 1 961 0
 1349 000a FF21     		movs	r1, #255
 1350              	.LVL201:
 1351 000c 0122     		movs	r2, #1
ARM GAS  /tmp/ccEduhkC.s 			page 42


 1352              	.LVL202:
 1353 000e FFF7FEFF 		bl	VL53L0X_WrByte
 1354              	.LVL203:
 962:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 963:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1355              		.loc 1 963 0
 1356 0012 0346     		mov	r3, r0
 1357 0014 28B9     		cbnz	r0, .L112
 964:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1358              		.loc 1 964 0
 1359 0016 2846     		mov	r0, r5
 1360              	.LVL204:
 1361 0018 4F21     		movs	r1, #79
 1362 001a 0022     		movs	r2, #0
 1363 001c FFF7FEFF 		bl	VL53L0X_WrByte
 1364              	.LVL205:
 1365 0020 0346     		mov	r3, r0
 1366              	.LVL206:
 1367              	.L112:
 965:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 966:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 967:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1368              		.loc 1 967 0
 1369 0022 2BB9     		cbnz	r3, .L113
 968:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1370              		.loc 1 968 0
 1371 0024 2846     		mov	r0, r5
 1372 0026 4E21     		movs	r1, #78
 1373 0028 2C22     		movs	r2, #44
 1374 002a FFF7FEFF 		bl	VL53L0X_WrByte
 1375              	.LVL207:
 1376 002e 0346     		mov	r3, r0
 1377              	.LVL208:
 1378              	.L113:
 969:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 970:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 971:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1379              		.loc 1 971 0
 1380 0030 2BB9     		cbnz	r3, .L114
 972:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1381              		.loc 1 972 0
 1382 0032 2846     		mov	r0, r5
 1383 0034 FF21     		movs	r1, #255
 1384 0036 0022     		movs	r2, #0
 1385 0038 FFF7FEFF 		bl	VL53L0X_WrByte
 1386              	.LVL209:
 1387 003c 0346     		mov	r3, r0
 1388              	.LVL210:
 1389              	.L114:
 973:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 974:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1390              		.loc 1 974 0
 1391 003e 23B9     		cbnz	r3, .L115
 975:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1392              		.loc 1 975 0
 1393 0040 2846     		mov	r0, r5
 1394 0042 B621     		movs	r1, #182
ARM GAS  /tmp/ccEduhkC.s 			page 43


 1395 0044 B422     		movs	r2, #180
 1396 0046 FFF7FEFF 		bl	VL53L0X_WrByte
 1397              	.LVL211:
 1398              	.L115:
 945:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1399              		.loc 1 945 0 discriminator 1
 1400 004a 0023     		movs	r3, #0
 1401 004c 04E0     		b	.L116
 1402              	.LVL212:
 1403              	.L117:
 976:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 977:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			startSelect);
 978:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 980:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1404              		.loc 1 980 0 discriminator 3
 1405 004e EA18     		adds	r2, r5, r3
 1406 0050 0021     		movs	r1, #0
 1407 0052 82F82411 		strb	r1, [r2, #292]
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1408              		.loc 1 979 0 discriminator 3
 1409 0056 0133     		adds	r3, r3, #1
 1410              	.LVL213:
 1411              	.L116:
 979:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1412              		.loc 1 979 0 is_stmt 0 discriminator 1
 1413 0058 052B     		cmp	r3, #5
 1414 005a F8D9     		bls	.L117
 981:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 982:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (isApertureSpads) {
 1415              		.loc 1 982 0 is_stmt 1
 1416 005c 1EB9     		cbnz	r6, .L122
 947:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1417              		.loc 1 947 0
 1418 005e 0024     		movs	r4, #0
 1419 0060 09E0     		b	.L119
 1420              	.LVL214:
 1421              	.L120:
 983:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Increment to the first APERTURE spad */
 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		while ((is_aperture(startSelect + currentSpadIndex) == 0) &&
 985:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 986:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			currentSpadIndex++;
 1422              		.loc 1 986 0
 1423 0062 0134     		adds	r4, r4, #1
 1424              	.LVL215:
 1425 0064 00E0     		b	.L118
 1426              	.LVL216:
 1427              	.L122:
 1428 0066 0024     		movs	r4, #0
 1429              	.LVL217:
 1430              	.L118:
 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1431              		.loc 1 984 0
 1432 0068 04F1B400 		add	r0, r4, #180
 1433 006c FFF7FEFF 		bl	is_aperture
 1434              	.LVL218:
 1435 0070 08B9     		cbnz	r0, .L119
ARM GAS  /tmp/ccEduhkC.s 			page 44


 984:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1436              		.loc 1 984 0 is_stmt 0 discriminator 1
 1437 0072 2B2C     		cmp	r4, #43
 1438 0074 F5D9     		bls	.L120
 1439              	.LVL219:
 1440              	.L119:
 987:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 988:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
 989:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = enable_ref_spads(Dev,
 1441              		.loc 1 989 0 is_stmt 1
 1442 0076 0623     		movs	r3, #6
 1443 0078 0093     		str	r3, [sp]
 1444 007a B423     		movs	r3, #180
 1445 007c 0193     		str	r3, [sp, #4]
 1446 007e 0294     		str	r4, [sp, #8]
 1447 0080 0397     		str	r7, [sp, #12]
 1448 0082 07AB     		add	r3, sp, #28
 1449 0084 0493     		str	r3, [sp, #16]
 1450 0086 2846     		mov	r0, r5
 1451 0088 3146     		mov	r1, r6
 1452 008a 05F59572 		add	r2, r5, #298
 1453 008e 05F59273 		add	r3, r5, #292
 1454 0092 FFF7FEFF 		bl	enable_ref_spads
 1455              	.LVL220:
 990:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				isApertureSpads,
 991:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 992:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables,
 993:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize,
 994:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				startSelect,
 995:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex,
 996:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				count,
 997:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				&lastSpadIndex);
 998:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 999:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1456              		.loc 1 999 0
 1457 0096 0346     		mov	r3, r0
 1458 0098 30B9     		cbnz	r0, .L121
1000:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 1459              		.loc 1 1000 0
 1460 009a 0122     		movs	r2, #1
 1461 009c 85F81521 		strb	r2, [r5, #277]
1001:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1462              		.loc 1 1001 0
 1463 00a0 85F81371 		strb	r7, [r5, #275]
1002:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(count));
1003:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1464              		.loc 1 1003 0
 1465 00a4 85F81461 		strb	r6, [r5, #276]
 1466              	.L121:
1004:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, isApertureSpads);
1005:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1006:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1007:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1008:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1467              		.loc 1 1008 0
 1468 00a8 1846     		mov	r0, r3
 1469              	.LVL221:
ARM GAS  /tmp/ccEduhkC.s 			page 45


 1470 00aa 09B0     		add	sp, sp, #36
 1471              	.LCFI27:
 1472              		.cfi_def_cfa_offset 20
 1473              		@ sp needed
 1474 00ac F0BD     		pop	{r4, r5, r6, r7, pc}
 1475              		.cfi_endproc
 1476              	.LFE126:
 1478 00ae 00BF     		.section	.text.VL53L0X_get_reference_spads,"ax",%progbits
 1479              		.align	2
 1480              		.global	VL53L0X_get_reference_spads
 1481              		.thumb
 1482              		.thumb_func
 1484              	VL53L0X_get_reference_spads:
 1485              	.LFB127:
1009:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1010:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_reference_spads(VL53L0X_DEV Dev,
1011:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			uint32_t *pSpadCount, uint8_t *pIsApertureSpads)
1012:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1486              		.loc 1 1012 0
 1487              		.cfi_startproc
 1488              		@ args = 0, pretend = 0, frame = 16
 1489              		@ frame_needed = 0, uses_anonymous_args = 0
 1490              	.LVL222:
 1491 0000 70B5     		push	{r4, r5, r6, lr}
 1492              	.LCFI28:
 1493              		.cfi_def_cfa_offset 16
 1494              		.cfi_offset 4, -16
 1495              		.cfi_offset 5, -12
 1496              		.cfi_offset 6, -8
 1497              		.cfi_offset 14, -4
 1498 0002 86B0     		sub	sp, sp, #24
 1499              	.LCFI29:
 1500              		.cfi_def_cfa_offset 40
 1501              	.LVL223:
1013:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1014:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
1015:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadArray[6];
1016:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cMaxSpadCount = 44;
1017:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t cSpadArraySize = 6;
1018:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t spadsEnabled;
1019:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t isApertureSpads = 0;
 1502              		.loc 1 1019 0
 1503 0004 0023     		movs	r3, #0
 1504 0006 8DF80B30 		strb	r3, [sp, #11]
1020:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1021:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	refSpadsInitialised = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1505              		.loc 1 1021 0
 1506 000a 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 1507              	.LVL224:
1022:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RefSpadsInitialised);
1023:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1024:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (refSpadsInitialised == 1) {
 1508              		.loc 1 1024 0
 1509 000e 012B     		cmp	r3, #1
 1510 0010 07D1     		bne	.L125
1025:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1026:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pSpadCount = (uint32_t)VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
ARM GAS  /tmp/ccEduhkC.s 			page 46


 1511              		.loc 1 1026 0
 1512 0012 90F81331 		ldrb	r3, [r0, #275]	@ zero_extendqisi2
 1513              	.LVL225:
 1514 0016 0B60     		str	r3, [r1]
 1515              	.LVL226:
1027:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
1028:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pIsApertureSpads = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1516              		.loc 1 1028 0
 1517 0018 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1518 001c 1370     		strb	r3, [r2]
1013:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
 1519              		.loc 1 1013 0
 1520 001e 0023     		movs	r3, #0
 1521 0020 1EE0     		b	.L126
 1522              	.LVL227:
 1523              	.L125:
 1524 0022 1646     		mov	r6, r2
 1525 0024 0D46     		mov	r5, r1
 1526 0026 0446     		mov	r4, r0
1029:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
1030:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
1031:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1032:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* obtain spad info from device.*/
1033:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = get_ref_spad_map(Dev, refSpadArray);
 1527              		.loc 1 1033 0
 1528 0028 04A9     		add	r1, sp, #16
 1529              	.LVL228:
 1530 002a FFF7FEFF 		bl	get_ref_spad_map
 1531              	.LVL229:
1034:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1035:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 1532              		.loc 1 1035 0
 1533 002e 0346     		mov	r3, r0
 1534 0030 B0B9     		cbnz	r0, .L126
1036:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
1037:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 * determine if Aperture or Non-Aperture.
1038:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			 */
1039:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status = count_enabled_spads(refSpadArray,
 1535              		.loc 1 1039 0
 1536 0032 0DF10B03 		add	r3, sp, #11
 1537 0036 0093     		str	r3, [sp]
 1538 0038 04A8     		add	r0, sp, #16
 1539              	.LVL230:
 1540 003a 0621     		movs	r1, #6
 1541 003c 2C22     		movs	r2, #44
 1542 003e 03AB     		add	r3, sp, #12
 1543 0040 FFF7FEFF 		bl	count_enabled_spads
 1544              	.LVL231:
1040:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							cSpadArraySize,
1041:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							cMaxSpadCount,
1042:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							&spadsEnabled,
1043:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							&isApertureSpads);
1044:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1045:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 1545              		.loc 1 1045 0
 1546 0044 0346     		mov	r3, r0
 1547 0046 58B9     		cbnz	r0, .L126
ARM GAS  /tmp/ccEduhkC.s 			page 47


1046:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1047:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*pSpadCount = spadsEnabled;
 1548              		.loc 1 1047 0
 1549 0048 0399     		ldr	r1, [sp, #12]
 1550 004a 2960     		str	r1, [r5]
1048:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 1551              		.loc 1 1048 0
 1552 004c 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 1553 0050 3270     		strb	r2, [r6]
1049:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1050:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1554              		.loc 1 1050 0
 1555 0052 0120     		movs	r0, #1
 1556              	.LVL232:
 1557 0054 84F81501 		strb	r0, [r4, #277]
1051:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
1052:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1558              		.loc 1 1052 0
 1559 0058 84F81311 		strb	r1, [r4, #275]
1053:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
1054:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(uint8_t)spadsEnabled);
1055:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1560              		.loc 1 1055 0
 1561 005c 84F81421 		strb	r2, [r4, #276]
 1562              	.LVL233:
 1563              	.L126:
1056:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
1057:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
1058:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
1059:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1060:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1061:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1062:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1564              		.loc 1 1062 0
 1565 0060 58B2     		sxtb	r0, r3
 1566 0062 06B0     		add	sp, sp, #24
 1567              	.LCFI30:
 1568              		.cfi_def_cfa_offset 16
 1569              		@ sp needed
 1570 0064 70BD     		pop	{r4, r5, r6, pc}
 1571              		.cfi_endproc
 1572              	.LFE127:
 1574 0066 00BF     		.section	.text.VL53L0X_perform_single_ref_calibration,"ax",%progbits
 1575              		.align	2
 1576              		.global	VL53L0X_perform_single_ref_calibration
 1577              		.thumb
 1578              		.thumb_func
 1580              	VL53L0X_perform_single_ref_calibration:
 1581              	.LFB128:
1063:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1064:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1065:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_single_ref_calibration(VL53L0X_DEV Dev,
1066:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t vhv_init_byte)
1067:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1582              		.loc 1 1067 0
 1583              		.cfi_startproc
 1584              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccEduhkC.s 			page 48


 1585              		@ frame_needed = 0, uses_anonymous_args = 0
 1586              	.LVL234:
 1587 0000 10B5     		push	{r4, lr}
 1588              	.LCFI31:
 1589              		.cfi_def_cfa_offset 8
 1590              		.cfi_offset 4, -8
 1591              		.cfi_offset 14, -4
 1592 0002 0446     		mov	r4, r0
 1593              	.LVL235:
1068:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1069:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1070:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
1071:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START,
 1594              		.loc 1 1071 0
 1595 0004 41F00102 		orr	r2, r1, #1
 1596 0008 0021     		movs	r1, #0
 1597              	.LVL236:
 1598 000a FFF7FEFF 		bl	VL53L0X_WrByte
 1599              	.LVL237:
1072:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_SYSRANGE_MODE_START_STOP |
1073:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				vhv_init_byte);
1074:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1075:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1600              		.loc 1 1075 0
 1601 000e 0346     		mov	r3, r0
 1602 0010 18B9     		cbnz	r0, .L129
1076:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_measurement_poll_for_completion(Dev);
 1603              		.loc 1 1076 0
 1604 0012 2046     		mov	r0, r4
 1605              	.LVL238:
 1606 0014 FFF7FEFF 		bl	VL53L0X_measurement_poll_for_completion
 1607              	.LVL239:
 1608 0018 0346     		mov	r3, r0
 1609              	.LVL240:
 1610              	.L129:
1077:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1078:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1611              		.loc 1 1078 0
 1612 001a 23B9     		cbnz	r3, .L130
1079:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
 1613              		.loc 1 1079 0
 1614 001c 2046     		mov	r0, r4
 1615 001e 0021     		movs	r1, #0
 1616 0020 FFF7FEFF 		bl	VL53L0X_ClearInterruptMask
 1617              	.LVL241:
 1618 0024 0346     		mov	r3, r0
 1619              	.LVL242:
 1620              	.L130:
1080:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1081:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1621              		.loc 1 1081 0
 1622 0026 2BB9     		cbnz	r3, .L131
1082:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
 1623              		.loc 1 1082 0
 1624 0028 2046     		mov	r0, r4
 1625 002a 0021     		movs	r1, #0
 1626 002c 0A46     		mov	r2, r1
ARM GAS  /tmp/ccEduhkC.s 			page 49


 1627 002e FFF7FEFF 		bl	VL53L0X_WrByte
 1628              	.LVL243:
 1629 0032 0346     		mov	r3, r0
 1630              	.LVL244:
 1631              	.L131:
1083:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1084:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1085:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1632              		.loc 1 1085 0
 1633 0034 58B2     		sxtb	r0, r3
 1634 0036 10BD     		pop	{r4, pc}
 1635              		.cfi_endproc
 1636              	.LFE128:
 1638              		.section	.text.VL53L0X_ref_calibration_io,"ax",%progbits
 1639              		.align	2
 1640              		.global	VL53L0X_ref_calibration_io
 1641              		.thumb
 1642              		.thumb_func
 1644              	VL53L0X_ref_calibration_io:
 1645              	.LFB129:
1086:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1087:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1088:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_ref_calibration_io(VL53L0X_DEV Dev, uint8_t read_not_write,
1089:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings, uint8_t PhaseCal,
1090:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal,
1091:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t vhv_enable, const uint8_t phase_enable)
1092:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1646              		.loc 1 1092 0
 1647              		.cfi_startproc
 1648              		@ args = 16, pretend = 0, frame = 8
 1649              		@ frame_needed = 0, uses_anonymous_args = 0
 1650              	.LVL245:
 1651 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1652              	.LCFI32:
 1653              		.cfi_def_cfa_offset 36
 1654              		.cfi_offset 4, -36
 1655              		.cfi_offset 5, -32
 1656              		.cfi_offset 6, -28
 1657              		.cfi_offset 7, -24
 1658              		.cfi_offset 8, -20
 1659              		.cfi_offset 9, -16
 1660              		.cfi_offset 10, -12
 1661              		.cfi_offset 11, -8
 1662              		.cfi_offset 14, -4
 1663 0004 83B0     		sub	sp, sp, #12
 1664              	.LCFI33:
 1665              		.cfi_def_cfa_offset 48
 1666 0006 0546     		mov	r5, r0
 1667 0008 8846     		mov	r8, r1
 1668 000a 9246     		mov	r10, r2
 1669 000c 9946     		mov	r9, r3
 1670 000e 9DF83870 		ldrb	r7, [sp, #56]	@ zero_extendqisi2
 1671 0012 9DF83C60 		ldrb	r6, [sp, #60]	@ zero_extendqisi2
 1672              	.LVL246:
1093:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1094:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalint = 0;
 1673              		.loc 1 1094 0
ARM GAS  /tmp/ccEduhkC.s 			page 50


 1674 0016 4FF0000B 		mov	fp, #0
 1675 001a 8DF807B0 		strb	fp, [sp, #7]
1095:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1096:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1097:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1676              		.loc 1 1097 0
 1677 001e FF21     		movs	r1, #255
 1678              	.LVL247:
 1679 0020 0122     		movs	r2, #1
 1680              	.LVL248:
 1681 0022 FFF7FEFF 		bl	VL53L0X_WrByte
 1682              	.LVL249:
 1683 0026 0446     		mov	r4, r0
 1684              	.LVL250:
1098:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x00);
 1685              		.loc 1 1098 0
 1686 0028 2846     		mov	r0, r5
 1687 002a 5946     		mov	r1, fp
 1688 002c 5A46     		mov	r2, fp
 1689 002e FFF7FEFF 		bl	VL53L0X_WrByte
 1690              	.LVL251:
 1691 0032 2043     		orrs	r0, r0, r4
 1692 0034 C4B2     		uxtb	r4, r0
 1693              	.LVL252:
1099:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1694              		.loc 1 1099 0
 1695 0036 2846     		mov	r0, r5
 1696 0038 FF21     		movs	r1, #255
 1697 003a 5A46     		mov	r2, fp
 1698 003c FFF7FEFF 		bl	VL53L0X_WrByte
 1699              	.LVL253:
 1700 0040 2043     		orrs	r0, r0, r4
 1701 0042 C4B2     		uxtb	r4, r0
 1702              	.LVL254:
1100:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1101:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (read_not_write) {
 1703              		.loc 1 1101 0
 1704 0044 B8F1000F 		cmp	r8, #0
 1705 0048 11D0     		beq	.L134
1102:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 1706              		.loc 1 1102 0
 1707 004a 37B1     		cbz	r7, .L135
1103:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xCB, pVhvSettings);
 1708              		.loc 1 1103 0
 1709 004c 2846     		mov	r0, r5
 1710 004e CB21     		movs	r1, #203
 1711 0050 0C9A     		ldr	r2, [sp, #48]
 1712 0052 FFF7FEFF 		bl	VL53L0X_RdByte
 1713              	.LVL255:
 1714 0056 2043     		orrs	r0, r0, r4
 1715 0058 C4B2     		uxtb	r4, r0
 1716              	.LVL256:
 1717              	.L135:
1104:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1718              		.loc 1 1104 0
 1719 005a CEB1     		cbz	r6, .L136
1105:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xEE, &PhaseCalint);
ARM GAS  /tmp/ccEduhkC.s 			page 51


 1720              		.loc 1 1105 0
 1721 005c 2846     		mov	r0, r5
 1722 005e EE21     		movs	r1, #238
 1723 0060 0DF10702 		add	r2, sp, #7
 1724 0064 FFF7FEFF 		bl	VL53L0X_RdByte
 1725              	.LVL257:
 1726 0068 2043     		orrs	r0, r0, r4
 1727 006a C4B2     		uxtb	r4, r0
 1728              	.LVL258:
 1729 006c 10E0     		b	.L136
 1730              	.L134:
1106:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else {
1107:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 1731              		.loc 1 1107 0
 1732 006e 37B1     		cbz	r7, .L137
1108:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 1733              		.loc 1 1108 0
 1734 0070 2846     		mov	r0, r5
 1735 0072 CB21     		movs	r1, #203
 1736 0074 5246     		mov	r2, r10
 1737 0076 FFF7FEFF 		bl	VL53L0X_WrByte
 1738              	.LVL259:
 1739 007a 2043     		orrs	r0, r0, r4
 1740 007c C4B2     		uxtb	r4, r0
 1741              	.LVL260:
 1742              	.L137:
1109:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1743              		.loc 1 1109 0
 1744 007e 3EB1     		cbz	r6, .L136
1110:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 1745              		.loc 1 1110 0
 1746 0080 2846     		mov	r0, r5
 1747 0082 EE21     		movs	r1, #238
 1748 0084 8022     		movs	r2, #128
 1749 0086 4B46     		mov	r3, r9
 1750 0088 FFF7FEFF 		bl	VL53L0X_UpdateByte
 1751              	.LVL261:
 1752 008c 2043     		orrs	r0, r0, r4
 1753 008e C4B2     		uxtb	r4, r0
 1754              	.LVL262:
 1755              	.L136:
1111:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1112:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1113:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1756              		.loc 1 1113 0
 1757 0090 2846     		mov	r0, r5
 1758 0092 FF21     		movs	r1, #255
 1759 0094 0122     		movs	r2, #1
 1760 0096 FFF7FEFF 		bl	VL53L0X_WrByte
 1761              	.LVL263:
 1762 009a 2043     		orrs	r0, r0, r4
 1763 009c C4B2     		uxtb	r4, r0
 1764              	.LVL264:
1114:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x01);
 1765              		.loc 1 1114 0
 1766 009e 2846     		mov	r0, r5
 1767 00a0 0021     		movs	r1, #0
ARM GAS  /tmp/ccEduhkC.s 			page 52


 1768 00a2 0122     		movs	r2, #1
 1769 00a4 FFF7FEFF 		bl	VL53L0X_WrByte
 1770              	.LVL265:
 1771 00a8 2043     		orrs	r0, r0, r4
 1772 00aa C4B2     		uxtb	r4, r0
 1773              	.LVL266:
1115:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1774              		.loc 1 1115 0
 1775 00ac 2846     		mov	r0, r5
 1776 00ae FF21     		movs	r1, #255
 1777 00b0 0022     		movs	r2, #0
 1778 00b2 FFF7FEFF 		bl	VL53L0X_WrByte
 1779              	.LVL267:
 1780 00b6 2043     		orrs	r0, r0, r4
 1781              	.LVL268:
1116:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1117:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	*pPhaseCal = (uint8_t)(PhaseCalint&0xEF);
 1782              		.loc 1 1117 0
 1783 00b8 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1784 00bc 03F0EF03 		and	r3, r3, #239
 1785 00c0 0D9A     		ldr	r2, [sp, #52]
 1786 00c2 1370     		strb	r3, [r2]
1118:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1119:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1120:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1787              		.loc 1 1120 0
 1788 00c4 40B2     		sxtb	r0, r0
 1789 00c6 03B0     		add	sp, sp, #12
 1790              	.LCFI34:
 1791              		.cfi_def_cfa_offset 36
 1792              		@ sp needed
 1793 00c8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1794              		.cfi_endproc
 1795              	.LFE129:
 1797              		.section	.text.VL53L0X_perform_vhv_calibration,"ax",%progbits
 1798              		.align	2
 1799              		.global	VL53L0X_perform_vhv_calibration
 1800              		.thumb
 1801              		.thumb_func
 1803              	VL53L0X_perform_vhv_calibration:
 1804              	.LFB130:
1121:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1122:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1123:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_vhv_calibration(VL53L0X_DEV Dev,
1124:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, const uint8_t get_data_enable,
1125:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1126:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1805              		.loc 1 1126 0
 1806              		.cfi_startproc
 1807              		@ args = 0, pretend = 0, frame = 8
 1808              		@ frame_needed = 0, uses_anonymous_args = 0
 1809              	.LVL269:
 1810 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1811              	.LCFI35:
 1812              		.cfi_def_cfa_offset 24
 1813              		.cfi_offset 4, -24
 1814              		.cfi_offset 5, -20
ARM GAS  /tmp/ccEduhkC.s 			page 53


 1815              		.cfi_offset 6, -16
 1816              		.cfi_offset 7, -12
 1817              		.cfi_offset 8, -8
 1818              		.cfi_offset 14, -4
 1819 0004 86B0     		sub	sp, sp, #24
 1820              	.LCFI36:
 1821              		.cfi_def_cfa_offset 48
 1822 0006 0446     		mov	r4, r0
 1823 0008 0D46     		mov	r5, r1
 1824 000a 1746     		mov	r7, r2
 1825              	.LVL270:
1127:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1129:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1130:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1131:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalInt = 0;
 1826              		.loc 1 1131 0
 1827 000c 0022     		movs	r2, #0
 1828              	.LVL271:
 1829 000e 8DF81720 		strb	r2, [sp, #23]
1132:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1133:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1134:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1135:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1136:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1137:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (restore_config)
 1830              		.loc 1 1137 0
 1831 0012 1E46     		mov	r6, r3
 1832 0014 13B1     		cbz	r3, .L145
1138:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1833              		.loc 1 1138 0
 1834 0016 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 1835              	.LVL272:
 1836 001a 01E0     		b	.L140
 1837              	.LVL273:
 1838              	.L145:
1128:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 1839              		.loc 1 1128 0
 1840 001c 4FF00008 		mov	r8, #0
 1841              	.LVL274:
 1842              	.L140:
1139:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1140:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Run VHV */
1141:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x01);
 1843              		.loc 1 1141 0
 1844 0020 2046     		mov	r0, r4
 1845              	.LVL275:
 1846 0022 0121     		movs	r1, #1
 1847              	.LVL276:
 1848 0024 0A46     		mov	r2, r1
 1849 0026 FFF7FEFF 		bl	VL53L0X_WrByte
 1850              	.LVL277:
1142:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1143:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1851              		.loc 1 1143 0
 1852 002a 0346     		mov	r3, r0
 1853 002c 20B9     		cbnz	r0, .L141
ARM GAS  /tmp/ccEduhkC.s 			page 54


1144:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x40);
 1854              		.loc 1 1144 0
 1855 002e 2046     		mov	r0, r4
 1856              	.LVL278:
 1857 0030 4021     		movs	r1, #64
 1858 0032 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 1859              	.LVL279:
 1860 0036 0346     		mov	r3, r0
 1861              	.LVL280:
 1862              	.L141:
1145:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1146:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1147:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 1863              		.loc 1 1147 0
 1864 0038 7BB9     		cbnz	r3, .L142
 1865              		.loc 1 1147 0 is_stmt 0 discriminator 1
 1866 003a 012F     		cmp	r7, #1
 1867 003c 0DD1     		bne	.L142
1148:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 1868              		.loc 1 1148 0 is_stmt 1
 1869 003e 0095     		str	r5, [sp]
 1870 0040 0DF11703 		add	r3, sp, #23
 1871              	.LVL281:
 1872 0044 0193     		str	r3, [sp, #4]
 1873 0046 0121     		movs	r1, #1
 1874 0048 0291     		str	r1, [sp, #8]
 1875 004a 0023     		movs	r3, #0
 1876 004c 0393     		str	r3, [sp, #12]
 1877 004e 2046     		mov	r0, r4
 1878 0050 1A46     		mov	r2, r3
 1879 0052 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 1880              	.LVL282:
 1881 0056 0346     		mov	r3, r0
 1882              	.LVL283:
 1883 0058 01E0     		b	.L143
 1884              	.L142:
1149:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1150:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			pVhvSettings, &PhaseCalInt,
1151:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			1, 0);
1152:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else
1153:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pVhvSettings = 0;
 1885              		.loc 1 1153 0
 1886 005a 0022     		movs	r2, #0
 1887 005c 2A70     		strb	r2, [r5]
 1888              	.L143:
1154:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1155:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1156:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 1889              		.loc 1 1156 0
 1890 005e 4BB9     		cbnz	r3, .L144
 1891              		.loc 1 1156 0 is_stmt 0 discriminator 1
 1892 0060 46B1     		cbz	r6, .L144
1157:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1158:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 1893              		.loc 1 1158 0 is_stmt 1
 1894 0062 2046     		mov	r0, r4
 1895 0064 0121     		movs	r1, #1
ARM GAS  /tmp/ccEduhkC.s 			page 55


 1896 0066 4246     		mov	r2, r8
 1897 0068 FFF7FEFF 		bl	VL53L0X_WrByte
 1898              	.LVL284:
1159:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1160:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 1899              		.loc 1 1160 0
 1900 006c 0346     		mov	r3, r0
 1901 006e 08B9     		cbnz	r0, .L144
1161:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1902              		.loc 1 1161 0
 1903 0070 84F83081 		strb	r8, [r4, #304]
 1904              	.LVL285:
 1905              	.L144:
1162:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1163:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1164:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1165:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1166:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 1906              		.loc 1 1166 0
 1907 0074 58B2     		sxtb	r0, r3
 1908 0076 06B0     		add	sp, sp, #24
 1909              	.LCFI37:
 1910              		.cfi_def_cfa_offset 24
 1911              		@ sp needed
 1912 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1913              		.cfi_endproc
 1914              	.LFE130:
 1916              		.section	.text.VL53L0X_perform_phase_calibration,"ax",%progbits
 1917              		.align	2
 1918              		.global	VL53L0X_perform_phase_calibration
 1919              		.thumb
 1920              		.thumb_func
 1922              	VL53L0X_perform_phase_calibration:
 1923              	.LFB131:
1167:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1168:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_phase_calibration(VL53L0X_DEV Dev,
1169:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pPhaseCal, const uint8_t get_data_enable,
1170:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1171:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 1924              		.loc 1 1171 0
 1925              		.cfi_startproc
 1926              		@ args = 0, pretend = 0, frame = 8
 1927              		@ frame_needed = 0, uses_anonymous_args = 0
 1928              	.LVL286:
 1929 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1930              	.LCFI38:
 1931              		.cfi_def_cfa_offset 24
 1932              		.cfi_offset 4, -24
 1933              		.cfi_offset 5, -20
 1934              		.cfi_offset 6, -16
 1935              		.cfi_offset 7, -12
 1936              		.cfi_offset 8, -8
 1937              		.cfi_offset 14, -4
 1938 0004 86B0     		sub	sp, sp, #24
 1939              	.LCFI39:
 1940              		.cfi_def_cfa_offset 48
 1941 0006 0446     		mov	r4, r0
ARM GAS  /tmp/ccEduhkC.s 			page 56


 1942 0008 0D46     		mov	r5, r1
 1943 000a 1746     		mov	r7, r2
 1944              	.LVL287:
1172:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1174:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1175:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1176:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettingsint;
1177:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1178:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1179:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1180:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1181:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1182:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (restore_config)
 1945              		.loc 1 1182 0
 1946 000c 1E46     		mov	r6, r3
 1947 000e 13B1     		cbz	r3, .L153
1183:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1948              		.loc 1 1183 0
 1949 0010 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 1950              	.LVL288:
 1951 0014 01E0     		b	.L148
 1952              	.LVL289:
 1953              	.L153:
1173:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 1954              		.loc 1 1173 0
 1955 0016 4FF00008 		mov	r8, #0
 1956              	.LVL290:
 1957              	.L148:
1184:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1185:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Run PhaseCal */
1186:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x02);
 1958              		.loc 1 1186 0
 1959 001a 2046     		mov	r0, r4
 1960              	.LVL291:
 1961 001c 0121     		movs	r1, #1
 1962              	.LVL292:
 1963 001e 0222     		movs	r2, #2
 1964              	.LVL293:
 1965 0020 FFF7FEFF 		bl	VL53L0X_WrByte
 1966              	.LVL294:
1187:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1188:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1967              		.loc 1 1188 0
 1968 0024 0346     		mov	r3, r0
 1969 0026 20B9     		cbnz	r0, .L149
1189:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x0);
 1970              		.loc 1 1189 0
 1971 0028 2046     		mov	r0, r4
 1972              	.LVL295:
 1973 002a 0021     		movs	r1, #0
 1974 002c FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 1975              	.LVL296:
 1976 0030 0346     		mov	r3, r0
 1977              	.LVL297:
 1978              	.L149:
1190:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 57


1191:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* Read PhaseCal from device */
1192:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 1979              		.loc 1 1192 0
 1980 0032 7BB9     		cbnz	r3, .L150
 1981              		.loc 1 1192 0 is_stmt 0 discriminator 1
 1982 0034 012F     		cmp	r7, #1
 1983 0036 0DD1     		bne	.L150
1193:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 1984              		.loc 1 1193 0 is_stmt 1
 1985 0038 0DF11703 		add	r3, sp, #23
 1986              	.LVL298:
 1987 003c 0093     		str	r3, [sp]
 1988 003e 0195     		str	r5, [sp, #4]
 1989 0040 0023     		movs	r3, #0
 1990 0042 0293     		str	r3, [sp, #8]
 1991 0044 0121     		movs	r1, #1
 1992 0046 0391     		str	r1, [sp, #12]
 1993 0048 2046     		mov	r0, r4
 1994 004a 1A46     		mov	r2, r3
 1995 004c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 1996              	.LVL299:
 1997 0050 0346     		mov	r3, r0
 1998              	.LVL300:
 1999 0052 01E0     		b	.L151
 2000              	.L150:
1194:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1195:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&VhvSettingsint, pPhaseCal,
1196:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			0, 1);
1197:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	} else
1198:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*pPhaseCal = 0;
 2001              		.loc 1 1198 0
 2002 0054 0022     		movs	r2, #0
 2003 0056 2A70     		strb	r2, [r5]
 2004              	.L151:
1199:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1200:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1201:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 2005              		.loc 1 1201 0
 2006 0058 4BB9     		cbnz	r3, .L152
 2007              		.loc 1 1201 0 is_stmt 0 discriminator 1
 2008 005a 46B1     		cbz	r6, .L152
1202:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1203:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 2009              		.loc 1 1203 0 is_stmt 1
 2010 005c 2046     		mov	r0, r4
 2011 005e 0121     		movs	r1, #1
 2012 0060 4246     		mov	r2, r8
 2013 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 2014              	.LVL301:
1204:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1205:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 2015              		.loc 1 1205 0
 2016 0066 0346     		mov	r3, r0
 2017 0068 08B9     		cbnz	r0, .L152
1206:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2018              		.loc 1 1206 0
 2019 006a 84F83081 		strb	r8, [r4, #304]
ARM GAS  /tmp/ccEduhkC.s 			page 58


 2020              	.LVL302:
 2021              	.L152:
1207:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1208:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1209:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1210:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1211:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2022              		.loc 1 1211 0
 2023 006e 58B2     		sxtb	r0, r3
 2024 0070 06B0     		add	sp, sp, #24
 2025              	.LCFI40:
 2026              		.cfi_def_cfa_offset 24
 2027              		@ sp needed
 2028 0072 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2029              		.cfi_endproc
 2030              	.LFE131:
 2032 0076 00BF     		.section	.text.VL53L0X_perform_ref_calibration,"ax",%progbits
 2033              		.align	2
 2034              		.global	VL53L0X_perform_ref_calibration
 2035              		.thumb
 2036              		.thumb_func
 2038              	VL53L0X_perform_ref_calibration:
 2039              	.LFB132:
1212:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1213:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_calibration(VL53L0X_DEV Dev,
1214:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal, uint8_t get_data_enable)
1215:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2040              		.loc 1 1215 0
 2041              		.cfi_startproc
 2042              		@ args = 0, pretend = 0, frame = 0
 2043              		@ frame_needed = 0, uses_anonymous_args = 0
 2044              	.LVL303:
 2045 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2046              	.LCFI41:
 2047              		.cfi_def_cfa_offset 24
 2048              		.cfi_offset 3, -24
 2049              		.cfi_offset 4, -20
 2050              		.cfi_offset 5, -16
 2051              		.cfi_offset 6, -12
 2052              		.cfi_offset 7, -8
 2053              		.cfi_offset 14, -4
 2054 0002 0446     		mov	r4, r0
 2055 0004 1746     		mov	r7, r2
 2056 0006 1D46     		mov	r5, r3
 2057              	.LVL304:
1216:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1217:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1218:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1219:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1220:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1221:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 */
1222:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1223:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2058              		.loc 1 1223 0
 2059 0008 90F83061 		ldrb	r6, [r0, #304]	@ zero_extendqisi2
 2060              	.LVL305:
1224:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/ccEduhkC.s 			page 59


1225:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	/* In the following function we don't save the config to optimize
1226:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	 * writes on device. Config is saved and restored only once. */
1227:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_perform_vhv_calibration(
 2061              		.loc 1 1227 0
 2062 000c 1A46     		mov	r2, r3
 2063              	.LVL306:
 2064 000e 0023     		movs	r3, #0
 2065              	.LVL307:
 2066 0010 FFF7FEFF 		bl	VL53L0X_perform_vhv_calibration
 2067              	.LVL308:
1228:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Dev, pVhvSettings, get_data_enable, 0);
1229:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1230:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1231:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2068              		.loc 1 1231 0
 2069 0014 0346     		mov	r3, r0
 2070 0016 30B9     		cbnz	r0, .L156
1232:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2071              		.loc 1 1232 0
 2072 0018 2046     		mov	r0, r4
 2073              	.LVL309:
 2074 001a 3946     		mov	r1, r7
 2075 001c 2A46     		mov	r2, r5
 2076 001e 0023     		movs	r3, #0
 2077 0020 FFF7FEFF 		bl	VL53L0X_perform_phase_calibration
 2078              	.LVL310:
 2079 0024 0346     		mov	r3, r0
 2080              	.LVL311:
 2081              	.L156:
1233:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			Dev, pPhaseCal, get_data_enable, 0);
1234:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1235:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1236:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2082              		.loc 1 1236 0
 2083 0026 43B9     		cbnz	r3, .L157
1237:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1238:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 2084              		.loc 1 1238 0
 2085 0028 2046     		mov	r0, r4
 2086 002a 0121     		movs	r1, #1
 2087 002c 3246     		mov	r2, r6
 2088 002e FFF7FEFF 		bl	VL53L0X_WrByte
 2089              	.LVL312:
1239:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				SequenceConfig);
1240:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 2090              		.loc 1 1240 0
 2091 0032 0346     		mov	r3, r0
 2092 0034 08B9     		cbnz	r0, .L157
1241:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2093              		.loc 1 1241 0
 2094 0036 84F83061 		strb	r6, [r4, #304]
 2095              	.LVL313:
 2096              	.L157:
1242:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1243:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	}
1244:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1245:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
ARM GAS  /tmp/ccEduhkC.s 			page 60


1246:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2097              		.loc 1 1246 0
 2098 003a 58B2     		sxtb	r0, r3
 2099 003c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2100              		.cfi_endproc
 2101              	.LFE132:
 2103 003e 00BF     		.section	.text.VL53L0X_perform_ref_spad_management,"ax",%progbits
 2104              		.align	2
 2105              		.global	VL53L0X_perform_ref_spad_management
 2106              		.thumb
 2107              		.thumb_func
 2109              	VL53L0X_perform_ref_spad_management:
 2110              	.LFB125:
 679:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2111              		.loc 1 679 0
 2112              		.cfi_startproc
 2113              		@ args = 0, pretend = 0, frame = 56
 2114              		@ frame_needed = 0, uses_anonymous_args = 0
 2115              	.LVL314:
 2116 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2117              	.LCFI42:
 2118              		.cfi_def_cfa_offset 36
 2119              		.cfi_offset 4, -36
 2120              		.cfi_offset 5, -32
 2121              		.cfi_offset 6, -28
 2122              		.cfi_offset 7, -24
 2123              		.cfi_offset 8, -20
 2124              		.cfi_offset 9, -16
 2125              		.cfi_offset 10, -12
 2126              		.cfi_offset 11, -8
 2127              		.cfi_offset 14, -4
 2128 0004 95B0     		sub	sp, sp, #84
 2129              	.LCFI43:
 2130              		.cfi_def_cfa_offset 120
 2131 0006 0446     		mov	r4, r0
 2132 0008 0C91     		str	r1, [sp, #48]
 2133 000a 0D92     		str	r2, [sp, #52]
 2134              	.LVL315:
 686:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 2135              		.loc 1 686 0
 2136 000c 0023     		movs	r3, #0
 2137 000e 1193     		str	r3, [sp, #68]
 687:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 2138              		.loc 1 687 0
 2139 0010 1093     		str	r3, [sp, #64]
 2140              	.LVL316:
 696:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2141              		.loc 1 696 0
 2142 0012 8DF83D30 		strb	r3, [sp, #61]
 697:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 2143              		.loc 1 697 0
 2144 0016 8DF83C30 		strb	r3, [sp, #60]
 2145              	.LVL317:
 724:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2146              		.loc 1 724 0
 2147 001a B0F83CB1 		ldrh	fp, [r0, #316]
 2148              	.LVL318:
ARM GAS  /tmp/ccEduhkC.s 			page 61


 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2149              		.loc 1 734 0
 2150 001e 04E0     		b	.L160
 2151              	.LVL319:
 2152              	.L161:
 735:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2153              		.loc 1 735 0 discriminator 3
 2154 0020 E218     		adds	r2, r4, r3
 2155 0022 0021     		movs	r1, #0
 2156 0024 82F82411 		strb	r1, [r2, #292]
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2157              		.loc 1 734 0 discriminator 3
 2158 0028 0133     		adds	r3, r3, #1
 2159              	.LVL320:
 2160              	.L160:
 734:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2161              		.loc 1 734 0 is_stmt 0 discriminator 1
 2162 002a 052B     		cmp	r3, #5
 2163 002c F8D9     		bls	.L161
 738:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2164              		.loc 1 738 0 is_stmt 1
 2165 002e 2046     		mov	r0, r4
 2166              	.LVL321:
 2167 0030 FF21     		movs	r1, #255
 2168 0032 0122     		movs	r2, #1
 2169 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2170              	.LVL322:
 740:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2171              		.loc 1 740 0
 2172 0038 0546     		mov	r5, r0
 2173 003a 28B9     		cbnz	r0, .L162
 741:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2174              		.loc 1 741 0
 2175 003c 2046     		mov	r0, r4
 2176              	.LVL323:
 2177 003e 4F21     		movs	r1, #79
 2178 0040 0022     		movs	r2, #0
 2179 0042 FFF7FEFF 		bl	VL53L0X_WrByte
 2180              	.LVL324:
 2181 0046 0546     		mov	r5, r0
 2182              	.LVL325:
 2183              	.L162:
 744:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2184              		.loc 1 744 0
 2185 0048 2DB9     		cbnz	r5, .L163
 745:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2186              		.loc 1 745 0
 2187 004a 2046     		mov	r0, r4
 2188 004c 4E21     		movs	r1, #78
 2189 004e 2C22     		movs	r2, #44
 2190 0050 FFF7FEFF 		bl	VL53L0X_WrByte
 2191              	.LVL326:
 2192 0054 0546     		mov	r5, r0
 2193              	.LVL327:
 2194              	.L163:
 748:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2195              		.loc 1 748 0
ARM GAS  /tmp/ccEduhkC.s 			page 62


 2196 0056 2DB9     		cbnz	r5, .L164
 749:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2197              		.loc 1 749 0
 2198 0058 2046     		mov	r0, r4
 2199 005a FF21     		movs	r1, #255
 2200 005c 0022     		movs	r2, #0
 2201 005e FFF7FEFF 		bl	VL53L0X_WrByte
 2202              	.LVL328:
 2203 0062 0546     		mov	r5, r0
 2204              	.LVL329:
 2205              	.L164:
 751:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2206              		.loc 1 751 0
 2207 0064 2DB9     		cbnz	r5, .L165
 752:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2208              		.loc 1 752 0
 2209 0066 2046     		mov	r0, r4
 2210 0068 B621     		movs	r1, #182
 2211 006a B422     		movs	r2, #180
 2212 006c FFF7FEFF 		bl	VL53L0X_WrByte
 2213              	.LVL330:
 2214 0070 0546     		mov	r5, r0
 2215              	.LVL331:
 2216              	.L165:
 757:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2217              		.loc 1 757 0
 2218 0072 2DB9     		cbnz	r5, .L166
 758:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2219              		.loc 1 758 0
 2220 0074 2046     		mov	r0, r4
 2221 0076 8021     		movs	r1, #128
 2222 0078 0022     		movs	r2, #0
 2223 007a FFF7FEFF 		bl	VL53L0X_WrByte
 2224              	.LVL332:
 2225 007e 0546     		mov	r5, r0
 2226              	.LVL333:
 2227              	.L166:
 762:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 2228              		.loc 1 762 0
 2229 0080 3DB9     		cbnz	r5, .L167
 763:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2230              		.loc 1 763 0
 2231 0082 2046     		mov	r0, r4
 2232 0084 0DF13D01 		add	r1, sp, #61
 2233 0088 0FAA     		add	r2, sp, #60
 2234 008a 0023     		movs	r3, #0
 2235 008c FFF7FEFF 		bl	VL53L0X_perform_ref_calibration
 2236              	.LVL334:
 2237 0090 0546     		mov	r5, r0
 2238              	.LVL335:
 2239              	.L167:
 766:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 2240              		.loc 1 766 0
 2241 0092 9DB9     		cbnz	r5, .L168
 769:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 2242              		.loc 1 769 0
 2243 0094 0021     		movs	r1, #0
ARM GAS  /tmp/ccEduhkC.s 			page 63


 2244 0096 14AB     		add	r3, sp, #80
 2245 0098 43F80C1D 		str	r1, [r3, #-12]!
 771:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 2246              		.loc 1 771 0
 2247 009c 0622     		movs	r2, #6
 2248 009e 0092     		str	r2, [sp]
 2249 00a0 B422     		movs	r2, #180
 2250 00a2 0192     		str	r2, [sp, #4]
 2251 00a4 0291     		str	r1, [sp, #8]
 2252 00a6 0322     		movs	r2, #3
 2253 00a8 0392     		str	r2, [sp, #12]
 2254 00aa 0493     		str	r3, [sp, #16]
 2255 00ac 2046     		mov	r0, r4
 2256 00ae 04F59572 		add	r2, r4, #298
 2257 00b2 04F59273 		add	r3, r4, #292
 2258 00b6 FFF7FEFF 		bl	enable_ref_spads
 2259              	.LVL336:
 2260 00ba 0546     		mov	r5, r0
 2261              	.LVL337:
 2262              	.L168:
 782:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 2263              		.loc 1 782 0
 2264 00bc 002D     		cmp	r5, #0
 2265 00be 48D1     		bne	.L182
 783:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2266              		.loc 1 783 0
 2267 00c0 119F     		ldr	r7, [sp, #68]
 2268              	.LVL338:
 785:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 2269              		.loc 1 785 0
 2270 00c2 2046     		mov	r0, r4
 2271 00c4 0DF13E01 		add	r1, sp, #62
 2272 00c8 FFF7FEFF 		bl	perform_ref_signal_measurement
 2273              	.LVL339:
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2274              		.loc 1 787 0
 2275 00cc 0546     		mov	r5, r0
 2276 00ce 0028     		cmp	r0, #0
 2277 00d0 45D1     		bne	.L183
 788:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 2278              		.loc 1 788 0 discriminator 1
 2279 00d2 BDF83E30 		ldrh	r3, [sp, #62]
 787:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2280              		.loc 1 787 0 discriminator 1
 2281 00d6 5B45     		cmp	r3, fp
 2282 00d8 0AD8     		bhi	.L184
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2283              		.loc 1 699 0
 2284 00da 0023     		movs	r3, #0
 2285 00dc 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2286              		.loc 1 698 0
 2287 00de 9846     		mov	r8, r3
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 2288              		.loc 1 832 0
 2289 00e0 0893     		str	r3, [sp, #32]
 2290 00e2 52E0     		b	.L169
ARM GAS  /tmp/ccEduhkC.s 			page 64


 2291              	.LVL340:
 2292              	.L171:
 793:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2293              		.loc 1 793 0 discriminator 3
 2294 00e4 E218     		adds	r2, r4, r3
 2295 00e6 0021     		movs	r1, #0
 2296 00e8 82F82411 		strb	r1, [r2, #292]
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2297              		.loc 1 792 0 discriminator 3
 2298 00ec 0133     		adds	r3, r3, #1
 2299              	.LVL341:
 2300 00ee 00E0     		b	.L170
 2301              	.LVL342:
 2302              	.L184:
 2303 00f0 0023     		movs	r3, #0
 2304              	.L170:
 2305              	.LVL343:
 792:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2306              		.loc 1 792 0 is_stmt 0 discriminator 1
 2307 00f2 052B     		cmp	r3, #5
 2308 00f4 F6D9     		bls	.L171
 2309 00f6 00E0     		b	.L172
 2310              	.LVL344:
 2311              	.L174:
 799:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			}
 2312              		.loc 1 799 0 is_stmt 1
 2313 00f8 0137     		adds	r7, r7, #1
 2314              	.LVL345:
 2315              	.L172:
 797:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2316              		.loc 1 797 0
 2317 00fa 07F1B400 		add	r0, r7, #180
 2318 00fe FFF7FEFF 		bl	is_aperture
 2319              	.LVL346:
 2320 0102 08B9     		cbnz	r0, .L173
 798:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2321              		.loc 1 798 0
 2322 0104 2B2F     		cmp	r7, #43
 2323 0106 F7D9     		bls	.L174
 2324              	.L173:
 2325              	.LVL347:
 804:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads,
 2326              		.loc 1 804 0
 2327 0108 0623     		movs	r3, #6
 2328 010a 0093     		str	r3, [sp]
 2329 010c B423     		movs	r3, #180
 2330 010e 0193     		str	r3, [sp, #4]
 2331 0110 0297     		str	r7, [sp, #8]
 2332 0112 0323     		movs	r3, #3
 2333 0114 0393     		str	r3, [sp, #12]
 2334 0116 11AB     		add	r3, sp, #68
 2335 0118 0493     		str	r3, [sp, #16]
 2336 011a 2046     		mov	r0, r4
 2337 011c 0121     		movs	r1, #1
 2338 011e 04F59572 		add	r2, r4, #298
 2339 0122 04F59273 		add	r3, r4, #292
 2340 0126 FFF7FEFF 		bl	enable_ref_spads
ARM GAS  /tmp/ccEduhkC.s 			page 65


 2341              	.LVL348:
 814:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2342              		.loc 1 814 0
 2343 012a 0546     		mov	r5, r0
 2344 012c E0B9     		cbnz	r0, .L185
 815:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 2345              		.loc 1 815 0
 2346 012e 119F     		ldr	r7, [sp, #68]
 2347              	.LVL349:
 816:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 2348              		.loc 1 816 0
 2349 0130 2046     		mov	r0, r4
 2350              	.LVL350:
 2351 0132 0DF13E01 		add	r1, sp, #62
 2352 0136 FFF7FEFF 		bl	perform_ref_signal_measurement
 2353              	.LVL351:
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2354              		.loc 1 819 0
 2355 013a 0546     		mov	r5, r0
 2356 013c D0B9     		cbnz	r0, .L186
 820:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 2357              		.loc 1 820 0 discriminator 1
 2358 013e BDF83E30 		ldrh	r3, [sp, #62]
 819:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2359              		.loc 1 819 0 discriminator 1
 2360 0142 5B45     		cmp	r3, fp
 2361 0144 1CD8     		bhi	.L187
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2362              		.loc 1 699 0
 2363 0146 0023     		movs	r3, #0
 2364 0148 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2365              		.loc 1 698 0
 2366 014a 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2367              		.loc 1 802 0
 2368 014c 0123     		movs	r3, #1
 2369 014e 0893     		str	r3, [sp, #32]
 2370 0150 1BE0     		b	.L169
 2371              	.LVL352:
 2372              	.L182:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2373              		.loc 1 699 0
 2374 0152 0023     		movs	r3, #0
 2375 0154 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2376              		.loc 1 698 0
 2377 0156 9846     		mov	r8, r3
 2378 0158 0893     		str	r3, [sp, #32]
 2379 015a 1F46     		mov	r7, r3
 2380 015c 15E0     		b	.L169
 2381              	.LVL353:
 2382              	.L183:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2383              		.loc 1 699 0
 2384 015e 0023     		movs	r3, #0
 2385 0160 0B93     		str	r3, [sp, #44]
ARM GAS  /tmp/ccEduhkC.s 			page 66


 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2386              		.loc 1 698 0
 2387 0162 9846     		mov	r8, r3
 832:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		}
 2388              		.loc 1 832 0
 2389 0164 0893     		str	r3, [sp, #32]
 2390 0166 10E0     		b	.L169
 2391              	.LVL354:
 2392              	.L185:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2393              		.loc 1 699 0
 2394 0168 0023     		movs	r3, #0
 2395 016a 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2396              		.loc 1 698 0
 2397 016c 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2398              		.loc 1 802 0
 2399 016e 0123     		movs	r3, #1
 2400 0170 0893     		str	r3, [sp, #32]
 2401 0172 0AE0     		b	.L169
 2402              	.L186:
 699:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2403              		.loc 1 699 0
 2404 0174 0023     		movs	r3, #0
 2405 0176 0B93     		str	r3, [sp, #44]
 698:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2406              		.loc 1 698 0
 2407 0178 9846     		mov	r8, r3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2408              		.loc 1 802 0
 2409 017a 0123     		movs	r3, #1
 2410 017c 0893     		str	r3, [sp, #32]
 2411 017e 04E0     		b	.L169
 2412              	.L187:
 827:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 2413              		.loc 1 827 0
 2414 0180 0123     		movs	r3, #1
 2415 0182 0B93     		str	r3, [sp, #44]
 828:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 2416              		.loc 1 828 0
 2417 0184 4FF00308 		mov	r8, #3
 802:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2418              		.loc 1 802 0
 2419 0188 0893     		str	r3, [sp, #32]
 2420              	.LVL355:
 2421              	.L169:
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2422              		.loc 1 836 0
 2423 018a 002D     		cmp	r5, #0
 2424 018c 7AD1     		bne	.L175
 837:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 2425              		.loc 1 837 0 discriminator 1
 2426 018e BDF83E30 		ldrh	r3, [sp, #62]
 836:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2427              		.loc 1 836 0 discriminator 1
 2428 0192 5B45     		cmp	r3, fp
ARM GAS  /tmp/ccEduhkC.s 			page 67


 2429 0194 76D2     		bcs	.L175
 843:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2430              		.loc 1 843 0
 2431 0196 9DF82020 		ldrb	r2, [sp, #32]	@ zero_extendqisi2
 2432 019a 0B92     		str	r2, [sp, #44]
 2433              	.LVL356:
 846:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				spadArraySize);
 2434              		.loc 1 846 0
 2435 019c D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2436 01a0 1290     		str	r0, [sp, #72]	@ unaligned
 2437 01a2 B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2438 01a6 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 848:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			targetRefRate);
 2439              		.loc 1 848 0
 2440 01aa CDF828B0 		str	fp, [sp, #40]
 2441 01ae CBEB0303 		rsb	r3, fp, r3
 2442 01b2 002B     		cmp	r3, #0
 2443 01b4 B8BF     		it	lt
 2444 01b6 5B42     		rsblt	r3, r3, #0
 2445 01b8 0993     		str	r3, [sp, #36]
 2446              	.LVL357:
 844:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2447              		.loc 1 844 0
 2448 01ba 4FF00308 		mov	r8, #3
 850:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2449              		.loc 1 850 0
 2450 01be 4FF0000A 		mov	r10, #0
 2451 01c2 0797     		str	r7, [sp, #28]
 2452 01c4 5F46     		mov	r7, fp
 2453              	.LVL358:
 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2454              		.loc 1 852 0
 2455 01c6 54E0     		b	.L176
 2456              	.LVL359:
 2457              	.L180:
 853:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 2458              		.loc 1 853 0
 2459 01c8 04F59570 		add	r0, r4, #298
 2460 01cc 0621     		movs	r1, #6
 2461 01ce 079A     		ldr	r2, [sp, #28]
 2462 01d0 10AB     		add	r3, sp, #64
 2463 01d2 FFF7FEFF 		bl	get_next_good_spad
 2464              	.LVL360:
 858:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 2465              		.loc 1 858 0
 2466 01d6 109E     		ldr	r6, [sp, #64]
 2467 01d8 B6F1FF3F 		cmp	r6, #-1
 2468 01dc 4DD0     		beq	.L188
 866:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					needAptSpads) {
 2469              		.loc 1 866 0
 2470 01de 0796     		str	r6, [sp, #28]
 2471              	.LVL361:
 2472 01e0 06F1B400 		add	r0, r6, #180
 2473 01e4 FFF7FEFF 		bl	is_aperture
 2474              	.LVL362:
 2475 01e8 089B     		ldr	r3, [sp, #32]
 2476 01ea 9842     		cmp	r0, r3
ARM GAS  /tmp/ccEduhkC.s 			page 68


 2477 01ec 4AD1     		bne	.L175
 875:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2478              		.loc 1 875 0
 2479 01ee 08F1010B 		add	fp, r8, #1
 2480              	.LVL363:
 879:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 2481              		.loc 1 879 0
 2482 01f2 04F59279 		add	r9, r4, #292
 878:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2483              		.loc 1 878 0
 2484 01f6 4846     		mov	r0, r9
 2485 01f8 0621     		movs	r1, #6
 2486 01fa 3246     		mov	r2, r6
 2487 01fc FFF7FEFF 		bl	enable_spad_bit
 2488              	.LVL364:
 882:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2489              		.loc 1 882 0
 2490 0200 0546     		mov	r5, r0
 2491 0202 30B9     		cbnz	r0, .L177
 883:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 2492              		.loc 1 883 0
 2493 0204 731C     		adds	r3, r6, #1
 2494 0206 0793     		str	r3, [sp, #28]
 2495              	.LVL365:
 886:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 2496              		.loc 1 886 0
 2497 0208 2046     		mov	r0, r4
 2498              	.LVL366:
 2499 020a 4946     		mov	r1, r9
 2500 020c FFF7FEFF 		bl	set_ref_spad_map
 2501              	.LVL367:
 2502 0210 0546     		mov	r5, r0
 2503              	.LVL368:
 2504              	.L177:
 890:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2505              		.loc 1 890 0
 2506 0212 A5BB     		cbnz	r5, .L189
 893:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 2507              		.loc 1 893 0
 2508 0214 2046     		mov	r0, r4
 2509 0216 0DF13E01 		add	r1, sp, #62
 2510 021a FFF7FEFF 		bl	perform_ref_signal_measurement
 2511              	.LVL369:
 896:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2512              		.loc 1 896 0
 2513 021e 0546     		mov	r5, r0
 2514 0220 78BB     		cbnz	r0, .L190
 899:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2515              		.loc 1 899 0
 2516 0222 BDF83E20 		ldrh	r2, [sp, #62]
 2517 0226 0A9B     		ldr	r3, [sp, #40]
 2518 0228 D31A     		subs	r3, r2, r3
 2519 022a 002B     		cmp	r3, #0
 2520 022c B8BF     		it	lt
 2521 022e 5B42     		rsblt	r3, r3, #0
 2522              	.LVL370:
 901:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
ARM GAS  /tmp/ccEduhkC.s 			page 69


 2523              		.loc 1 901 0
 2524 0230 9742     		cmp	r7, r2
 2525 0232 12D2     		bcs	.L178
 906:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 2526              		.loc 1 906 0
 2527 0234 099A     		ldr	r2, [sp, #36]
 2528 0236 9342     		cmp	r3, r2
 2529 0238 18D9     		bls	.L191
 909:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 							lastSpadArray);
 2530              		.loc 1 909 0
 2531 023a 2046     		mov	r0, r4
 2532              	.LVL371:
 2533 023c 12A9     		add	r1, sp, #72
 2534 023e FFF7FEFF 		bl	set_ref_spad_map
 2535              	.LVL372:
 2536 0242 0546     		mov	r5, r0
 2537              	.LVL373:
 911:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2538              		.loc 1 911 0
 2539 0244 1298     		ldr	r0, [sp, #72]	@ unaligned
 2540 0246 C4F82401 		str	r0, [r4, #292]	@ unaligned
 2541 024a BDF84C30 		ldrh	r3, [sp, #76]	@ unaligned
 2542 024e A4F82831 		strh	r3, [r4, #296]	@ unaligned
 2543              	.LVL374:
 915:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				}
 2544              		.loc 1 915 0
 2545 0252 C346     		mov	fp, r8
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 2546              		.loc 1 917 0
 2547 0254 4FF0010A 		mov	r10, #1
 2548              	.LVL375:
 2549 0258 0AE0     		b	.L179
 2550              	.LVL376:
 2551              	.L178:
 921:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2552              		.loc 1 921 0
 2553 025a D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2554              	.LVL377:
 2555 025e 1290     		str	r0, [sp, #72]	@ unaligned
 2556 0260 B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2557 0264 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2558              		.loc 1 920 0
 2559 0268 0993     		str	r3, [sp, #36]
 2560 026a 01E0     		b	.L179
 2561              	.LVL378:
 2562              	.L191:
 917:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			} else {
 2563              		.loc 1 917 0
 2564 026c 4FF0010A 		mov	r10, #1
 2565              	.LVL379:
 2566              	.L179:
 920:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2567              		.loc 1 920 0
 2568 0270 D846     		mov	r8, fp
 2569              	.LVL380:
 2570              	.L176:
ARM GAS  /tmp/ccEduhkC.s 			page 70


 852:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2571              		.loc 1 852 0
 2572 0272 BAF1000F 		cmp	r10, #0
 2573 0276 A7D0     		beq	.L180
 2574 0278 04E0     		b	.L175
 2575              	.L188:
 859:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 				break;
 2576              		.loc 1 859 0
 2577 027a CE25     		movs	r5, #206
 2578              	.LVL381:
 2579 027c 02E0     		b	.L175
 2580              	.LVL382:
 2581              	.L189:
 2582 027e D846     		mov	r8, fp
 2583 0280 00E0     		b	.L175
 2584              	.LVL383:
 2585              	.L190:
 2586 0282 D846     		mov	r8, fp
 2587              	.LVL384:
 2588              	.L175:
 929:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 2589              		.loc 1 929 0
 2590 0284 7DB9     		cbnz	r5, .L181
 930:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 2591              		.loc 1 930 0
 2592 0286 0C9A     		ldr	r2, [sp, #48]
 2593 0288 C2F80080 		str	r8, [r2]
 931:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2594              		.loc 1 931 0
 2595 028c 0D99     		ldr	r1, [sp, #52]
 2596 028e 9DF82C00 		ldrb	r0, [sp, #44]	@ zero_extendqisi2
 2597 0292 0870     		strb	r0, [r1]
 933:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2598              		.loc 1 933 0
 2599 0294 0123     		movs	r3, #1
 2600 0296 84F81531 		strb	r3, [r4, #277]
 934:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 2601              		.loc 1 934 0
 2602 029a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2603 029c 84F81331 		strb	r3, [r4, #275]
 936:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 2604              		.loc 1 936 0
 2605 02a0 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 2606 02a2 84F81431 		strb	r3, [r4, #276]
 2607              	.L181:
 941:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
 2608              		.loc 1 941 0
 2609 02a6 68B2     		sxtb	r0, r5
 2610 02a8 15B0     		add	sp, sp, #84
 2611              	.LCFI44:
 2612              		.cfi_def_cfa_offset 36
 2613              		@ sp needed
 2614 02aa BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2615              		.cfi_endproc
 2616              	.LFE125:
 2618 02ae 00BF     		.section	.text.VL53L0X_set_ref_calibration,"ax",%progbits
 2619              		.align	2
ARM GAS  /tmp/ccEduhkC.s 			page 71


 2620              		.global	VL53L0X_set_ref_calibration
 2621              		.thumb
 2622              		.thumb_func
 2624              	VL53L0X_set_ref_calibration:
 2625              	.LFB133:
1247:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1248:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_ref_calibration(VL53L0X_DEV Dev,
1249:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t VhvSettings, uint8_t PhaseCal)
1250:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2626              		.loc 1 1250 0
 2627              		.cfi_startproc
 2628              		@ args = 0, pretend = 0, frame = 8
 2629              		@ frame_needed = 0, uses_anonymous_args = 0
 2630              	.LVL385:
 2631 0000 10B5     		push	{r4, lr}
 2632              	.LCFI45:
 2633              		.cfi_def_cfa_offset 8
 2634              		.cfi_offset 4, -8
 2635              		.cfi_offset 14, -4
 2636 0002 86B0     		sub	sp, sp, #24
 2637              	.LCFI46:
 2638              		.cfi_def_cfa_offset 32
 2639 0004 0C46     		mov	r4, r1
 2640 0006 1346     		mov	r3, r2
 2641              	.LVL386:
1251:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1252:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t pVhvSettings;
1253:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t pPhaseCal;
1254:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1255:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 0,
 2642              		.loc 1 1255 0
 2643 0008 0DF11702 		add	r2, sp, #23
 2644              	.LVL387:
 2645 000c 0092     		str	r2, [sp]
 2646 000e 0DF11602 		add	r2, sp, #22
 2647 0012 0192     		str	r2, [sp, #4]
 2648 0014 0122     		movs	r2, #1
 2649 0016 0292     		str	r2, [sp, #8]
 2650 0018 0392     		str	r2, [sp, #12]
 2651 001a 0021     		movs	r1, #0
 2652              	.LVL388:
 2653 001c 2246     		mov	r2, r4
 2654 001e FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2655              	.LVL389:
1256:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1257:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		&pVhvSettings, &pPhaseCal,
1258:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		1, 1);
1259:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1260:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1261:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2656              		.loc 1 1261 0
 2657 0022 06B0     		add	sp, sp, #24
 2658              	.LCFI47:
 2659              		.cfi_def_cfa_offset 8
 2660              		@ sp needed
 2661 0024 10BD     		pop	{r4, pc}
 2662              		.cfi_endproc
ARM GAS  /tmp/ccEduhkC.s 			page 72


 2663              	.LFE133:
 2665 0026 00BF     		.section	.text.VL53L0X_get_ref_calibration,"ax",%progbits
 2666              		.align	2
 2667              		.global	VL53L0X_get_ref_calibration
 2668              		.thumb
 2669              		.thumb_func
 2671              	VL53L0X_get_ref_calibration:
 2672              	.LFB134:
1262:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1263:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_ref_calibration(VL53L0X_DEV Dev,
1264:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		uint8_t *pVhvSettings, uint8_t *pPhaseCal)
1265:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** {
 2673              		.loc 1 1265 0
 2674              		.cfi_startproc
 2675              		@ args = 0, pretend = 0, frame = 0
 2676              		@ frame_needed = 0, uses_anonymous_args = 0
 2677              	.LVL390:
 2678 0000 00B5     		push	{lr}
 2679              	.LCFI48:
 2680              		.cfi_def_cfa_offset 4
 2681              		.cfi_offset 14, -4
 2682 0002 85B0     		sub	sp, sp, #20
 2683              	.LCFI49:
 2684              		.cfi_def_cfa_offset 24
 2685              	.LVL391:
1266:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1267:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1268:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1269:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1270:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 1,
 2686              		.loc 1 1270 0
 2687 0004 0091     		str	r1, [sp]
 2688 0006 0192     		str	r2, [sp, #4]
 2689 0008 0121     		movs	r1, #1
 2690              	.LVL392:
 2691 000a 0291     		str	r1, [sp, #8]
 2692 000c 0391     		str	r1, [sp, #12]
 2693 000e 0022     		movs	r2, #0
 2694              	.LVL393:
 2695 0010 1346     		mov	r3, r2
 2696 0012 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2697              	.LVL394:
1271:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1272:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		pVhvSettings, pPhaseCal,
1273:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 		1, 1);
1274:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 
1275:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** 	return Status;
1276:../Drivers/BSP/Components/vl53l0x/vl53l0x_api_calibration.c **** }
 2698              		.loc 1 1276 0
 2699 0016 05B0     		add	sp, sp, #20
 2700              	.LCFI50:
 2701              		.cfi_def_cfa_offset 4
 2702              		@ sp needed
 2703 0018 5DF804FB 		ldr	pc, [sp], #4
 2704              		.cfi_endproc
 2705              	.LFE134:
 2707              		.global	refArrayQuadrants
ARM GAS  /tmp/ccEduhkC.s 			page 73


 2708              		.section	.data.refArrayQuadrants,"aw",%progbits
 2709              		.align	2
 2710              		.set	.LANCHOR0,. + 0
 2713              	refArrayQuadrants:
 2714 0000 0A000000 		.word	10
 2715 0004 05000000 		.word	5
 2716 0008 00000000 		.word	0
 2717 000c 05000000 		.word	5
 2718              		.text
 2719              	.Letext0:
 2720              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 2721              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 2722              		.file 4 "../Drivers/BSP/Components/vl53l0x/vl53l0x_types.h"
 2723              		.file 5 "../Drivers/BSP/Components/vl53l0x/vl53l0x_device.h"
 2724              		.file 6 "../Drivers/BSP/Components/vl53l0x/vl53l0x_def.h"
 2725              		.file 7 "../Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 2726              		.file 8 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2727              		.file 9 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2728              		.file 10 "../Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 2729              		.file 11 "../Drivers/BSP/X-NUCLEO-53L0A1/vl53l0x_platform.h"
 2730              		.file 12 "../Drivers/CMSIS/Include/core_cm4.h"
 2731              		.file 13 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api.h"
 2732              		.file 14 "../Drivers/BSP/Components/vl53l0x/vl53l0x_api_core.h"
ARM GAS  /tmp/ccEduhkC.s 			page 74


DEFINED SYMBOLS
                            *ABS*:0000000000000000 vl53l0x_api_calibration.c
     /tmp/ccEduhkC.s:21     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:26     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 VL53L0X_perform_xtalk_calibration
     /tmp/ccEduhkC.s:254    .text.VL53L0X_perform_offset_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:259    .text.VL53L0X_perform_offset_calibration:0000000000000000 VL53L0X_perform_offset_calibration
     /tmp/ccEduhkC.s:449    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 $t
     /tmp/ccEduhkC.s:454    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_set_offset_calibration_data_micro_meter
     /tmp/ccEduhkC.s:520    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000044 $d
     /tmp/ccEduhkC.s:527    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 $t
     /tmp/ccEduhkC.s:532    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_get_offset_calibration_data_micro_meter
     /tmp/ccEduhkC.s:598    .text.VL53L0X_apply_offset_adjustment:0000000000000000 $t
     /tmp/ccEduhkC.s:603    .text.VL53L0X_apply_offset_adjustment:0000000000000000 VL53L0X_apply_offset_adjustment
     /tmp/ccEduhkC.s:671    .text.get_next_good_spad:0000000000000000 $t
     /tmp/ccEduhkC.s:676    .text.get_next_good_spad:0000000000000000 get_next_good_spad
     /tmp/ccEduhkC.s:772    .text.is_aperture:0000000000000000 $t
     /tmp/ccEduhkC.s:777    .text.is_aperture:0000000000000000 is_aperture
     /tmp/ccEduhkC.s:806    .text.is_aperture:0000000000000014 $d
     /tmp/ccEduhkC.s:811    .text.enable_spad_bit:0000000000000000 $t
     /tmp/ccEduhkC.s:816    .text.enable_spad_bit:0000000000000000 enable_spad_bit
     /tmp/ccEduhkC.s:867    .text.count_enabled_spads:0000000000000000 $t
     /tmp/ccEduhkC.s:872    .text.count_enabled_spads:0000000000000000 count_enabled_spads
     /tmp/ccEduhkC.s:1008   .text.set_ref_spad_map:0000000000000000 $t
     /tmp/ccEduhkC.s:1013   .text.set_ref_spad_map:0000000000000000 set_ref_spad_map
     /tmp/ccEduhkC.s:1038   .text.get_ref_spad_map:0000000000000000 $t
     /tmp/ccEduhkC.s:1043   .text.get_ref_spad_map:0000000000000000 get_ref_spad_map
     /tmp/ccEduhkC.s:1068   .text.enable_ref_spads:0000000000000000 $t
     /tmp/ccEduhkC.s:1073   .text.enable_ref_spads:0000000000000000 enable_ref_spads
     /tmp/ccEduhkC.s:1216   .text.perform_ref_signal_measurement:0000000000000000 $t
     /tmp/ccEduhkC.s:1221   .text.perform_ref_signal_measurement:0000000000000000 perform_ref_signal_measurement
     /tmp/ccEduhkC.s:1321   .text.VL53L0X_set_reference_spads:0000000000000000 $t
     /tmp/ccEduhkC.s:1326   .text.VL53L0X_set_reference_spads:0000000000000000 VL53L0X_set_reference_spads
     /tmp/ccEduhkC.s:1479   .text.VL53L0X_get_reference_spads:0000000000000000 $t
     /tmp/ccEduhkC.s:1484   .text.VL53L0X_get_reference_spads:0000000000000000 VL53L0X_get_reference_spads
     /tmp/ccEduhkC.s:1575   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:1580   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 VL53L0X_perform_single_ref_calibration
     /tmp/ccEduhkC.s:1639   .text.VL53L0X_ref_calibration_io:0000000000000000 $t
     /tmp/ccEduhkC.s:1644   .text.VL53L0X_ref_calibration_io:0000000000000000 VL53L0X_ref_calibration_io
     /tmp/ccEduhkC.s:1798   .text.VL53L0X_perform_vhv_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:1803   .text.VL53L0X_perform_vhv_calibration:0000000000000000 VL53L0X_perform_vhv_calibration
     /tmp/ccEduhkC.s:1917   .text.VL53L0X_perform_phase_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:1922   .text.VL53L0X_perform_phase_calibration:0000000000000000 VL53L0X_perform_phase_calibration
     /tmp/ccEduhkC.s:2033   .text.VL53L0X_perform_ref_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:2038   .text.VL53L0X_perform_ref_calibration:0000000000000000 VL53L0X_perform_ref_calibration
     /tmp/ccEduhkC.s:2104   .text.VL53L0X_perform_ref_spad_management:0000000000000000 $t
     /tmp/ccEduhkC.s:2109   .text.VL53L0X_perform_ref_spad_management:0000000000000000 VL53L0X_perform_ref_spad_management
     /tmp/ccEduhkC.s:2619   .text.VL53L0X_set_ref_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:2624   .text.VL53L0X_set_ref_calibration:0000000000000000 VL53L0X_set_ref_calibration
     /tmp/ccEduhkC.s:2666   .text.VL53L0X_get_ref_calibration:0000000000000000 $t
     /tmp/ccEduhkC.s:2671   .text.VL53L0X_get_ref_calibration:0000000000000000 VL53L0X_get_ref_calibration
     /tmp/ccEduhkC.s:2713   .data.refArrayQuadrants:0000000000000000 refArrayQuadrants
     /tmp/ccEduhkC.s:2709   .data.refArrayQuadrants:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
VL53L0X_SetXTalkCompensationEnable
VL53L0X_SetLimitCheckEnable
ARM GAS  /tmp/ccEduhkC.s 			page 75


VL53L0X_PerformSingleRangingMeasurement
VL53L0X_SetXTalkCompensationRateMegaCps
VL53L0X_SetOffsetCalibrationDataMicroMeter
VL53L0X_GetSequenceStepEnable
VL53L0X_SetSequenceStepEnable
VL53L0X_WrWord
VL53L0X_RdWord
VL53L0X_get_info_from_device
VL53L0X_GetOffsetCalibrationDataMicroMeter
VL53L0X_WriteMulti
VL53L0X_ReadMulti
VL53L0X_WrByte
VL53L0X_measurement_poll_for_completion
VL53L0X_ClearInterruptMask
VL53L0X_RdByte
VL53L0X_UpdateByte
